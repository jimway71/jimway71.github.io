<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Ubuntu on 点滴随记</title>
        <link>https://jimway71.github.io/tags/ubuntu/</link>
        <description>Recent content in Ubuntu on 点滴随记</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Sat, 28 May 2022 20:46:00 +0800</lastBuildDate><atom:link href="https://jimway71.github.io/tags/ubuntu/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>为Newifi3编译Padavan</title>
        <link>https://jimway71.github.io/p/%E4%B8%BAnewifi3%E7%BC%96%E8%AF%91padavan/</link>
        <pubDate>Sat, 28 May 2022 20:46:00 +0800</pubDate>
        
        <guid>https://jimway71.github.io/p/%E4%B8%BAnewifi3%E7%BC%96%E8%AF%91padavan/</guid>
        <description>&lt;img src="https://jimway71.github.io/wallpaper/wallpaper-56.png" alt="Featured image of post 为Newifi3编译Padavan" /&gt;&lt;p&gt;注：第一次尝试，采用最简单的方法处理&lt;br&gt;
操作系统: &lt;a class=&#34;link&#34; href=&#34;https://releases.ubuntu.com/18.04/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ubuntu 18.04 LTS&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;第一次尝试编译&#34;&gt;第一次尝试编译&lt;/h2&gt;
&lt;h3 id=&#34;系统准备&#34;&gt;系统准备&lt;/h3&gt;
&lt;h4 id=&#34;操作系统更新&#34;&gt;操作系统更新&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo apt update&lt;br&gt;
$ sudo apt upgrade&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;安装依赖包&#34;&gt;安装依赖包&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo apt install unzip libtool-bin curl cmake gperf gawk flex bison nano xxd \&lt;br&gt;
fakeroot kmod cpio git python3-docutils gettext automake autopoint \&lt;br&gt;
texinfo build-essential help2man pkg-config zlib1g-dev libgmp3-dev \&lt;br&gt;
libmpc-dev libmpfr-dev libncurses5-dev libltdl-dev wget libc-dev-bin&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;编译过程结果-无扩展功能&#34;&gt;编译过程(结果: 无扩展功能)&lt;/h3&gt;
&lt;h4 id=&#34;准备目录&#34;&gt;准备目录&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo mkdir /opt/rt-n56u&lt;br&gt;
$ sudo chmod 0777 /opt/rt-n56u&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;拉取源码&#34;&gt;拉取源码:&lt;/h4&gt;
&lt;p&gt;选择github上的代码&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ git clone --depth=1 &lt;a class=&#34;link&#34; href=&#34;https://github.com/hanwckf/rt-n56u.git&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/hanwckf/rt-n56u.git&lt;/a&gt; /opt/rt-n56u&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;准备toolchain&#34;&gt;准备toolchain&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ cd /opt/rt-n56u/toolchain-mipsel&lt;br&gt;
# 使用脚本下载预编译的工具链：&lt;br&gt;
$ sh dl_toolchain.sh&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;如何有必要编辑配置文件模板&#34;&gt;(如何有必要)编辑配置文件(模板)&lt;/h4&gt;
&lt;p&gt;在/opt/rt-n56u/trunk/configs/templates/目录下&lt;br&gt;
Newifi3的配置文件名为NEWIFI3.config&lt;/p&gt;
&lt;h3 id=&#34;进行编译&#34;&gt;进行编译&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;$ cd /opt/rt-n56u/trunk&lt;br&gt;
# 对于WSL环境，需要使用sudo进行编译，或者使用fakeroot-tcp代替fakeroot&lt;br&gt;
$ sudo ./build_firmware_modify NEWIFI3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;坐等编译完成，时间会比较长，应该跟机器速度强相关。&lt;/p&gt;
&lt;h3 id=&#34;编译完成拷出固件&#34;&gt;编译完成，拷出固件&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;编译好的固件在:&lt;br&gt;
/opt/rt-n56u/trunk/images&lt;/li&gt;
&lt;li&gt;生成的固件为:&lt;br&gt;
NEWIFI3_3.4.3.9-099.trx&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注:&lt;br&gt;
有人提醒: 刷机后为避免各类怪异现象，请到&amp;quot;系统管理&amp;quot;-&amp;gt;&amp;ldquo;配置管理&amp;rdquo;, 重置路由器设置 (NVRAM)和 路由器内部存储 (/etc/storage)进行双清&lt;/p&gt;
&lt;p&gt;Pavadan的第一次编译过程比较顺利，相比而言，Openwrt的编译过程总是状况不断。&lt;br&gt;
好感度+1！&lt;/p&gt;
&lt;p&gt;后记:&lt;br&gt;
用编译后固件刷了NEWIFI3后, 进入后看到的图面如下:&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/2022-05-28_hanwckf_pdv_%e6%97%a0%e7%a7%91%e5%ad%a6%e7%95%8c%e9%9d%a2_%e8%87%aa%e7%bc%96%e8%af%91%e7%89%88%e6%9c%ac.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;完全没有扩展功能，功能不全，无法使用&lt;/strong&gt;。&lt;/p&gt;
&lt;h2 id=&#34;尝试下载已编译好的固件&#34;&gt;尝试下载已编译好的固件&lt;/h2&gt;
&lt;p&gt;好吧，那先找个大概能用的、编译好的固件看下再说&lt;br&gt;
在&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;恩山论坛&lt;/a&gt;上到个帖子，给指到&lt;a class=&#34;link&#34; href=&#34;https://github.com/hiboyhiboy/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;hiboyhiboy&lt;/a&gt;的&lt;a class=&#34;link&#34; href=&#34;https://github.com/hiboyhiboy/opt-script/issues/61&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ss订阅列表问题#61&lt;/a&gt;，里面有指到&lt;a class=&#34;link&#34; href=&#34;https://t.me/s/pdcn1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;hiboyhiboy的固件发布地址&lt;/a&gt;，在这里找到了&lt;a class=&#34;link&#34; href=&#34;https://opt.cn2qq.com/padavan&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;他的固件下载地址&lt;/a&gt;。&lt;br&gt;
下载&lt;a class=&#34;link&#34; href=&#34;https://opt.cn2qq.com/padavan/RT-N56UB1-newifi3D2-512M_3.4.3.9-099.trx&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;RT-N56UB1-newifi3D2-512M_3.4.3.9-099.trx&lt;/a&gt;，并刷入NEWIFI3，进入后的界面是这样的：&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/2022-05-28_hiboy_pdv_%e5%bc%b1%e7%a7%91%e5%ad%a6%e7%95%8c%e9%9d%a2.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;“V2RAY”配置菜单在“扩展功能”-“搭建Web环境”里的第二项，里面界面、配置方式与原来在OP里的完全不同，比较难于入手。&lt;br&gt;
放弃！&lt;/p&gt;
&lt;h2 id=&#34;尝试用可选科学上网插件的代码做编译&#34;&gt;尝试用可选科学上网插件的代码做编译&lt;/h2&gt;
&lt;p&gt;在&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/c31b58728778&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子Padavan固件编译笔记&lt;/a&gt;中发现&lt;a class=&#34;link&#34; href=&#34;https://github.com/chongshengB/rt-n56u&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;chongshengB&lt;/a&gt;的版本可以选择&lt;u&gt;科学上网&lt;/u&gt;插件，看样子有可能可用。&lt;br&gt;
跟着&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/c31b58728778&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子Padavan固件编译笔记&lt;/a&gt;的说明做编译。&lt;br&gt;
注：&lt;br&gt;
在编译过程中报了四次错&lt;/p&gt;
&lt;h3 id=&#34;报错为没有找到7z&#34;&gt;报错为没有找到7z&lt;/h3&gt;
&lt;p&gt;处理：安装7z&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$sudo apt install p7zip-full&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;但是，装完7z后还有报错，如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make[2]: Entering directory &amp;#39;/opt/rt-n56u/trunk/libs/boost&amp;#39;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;( if [ ! -d boost_1_72_0 ]; then \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        7z x -bsp0 boost_1_72_0.7z ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        patch -d boost_1_72_0 -p1 -i ../build.patch; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;fi )  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Error:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Incorrect command line  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;patch: **** Can&amp;#39;t change to directory boost_1_72_0 : No such file or directory  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Makefile:14: recipe for target &amp;#39;extract_test&amp;#39; failed  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make[2]: *** [extract_test] Error 2  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make[2]: Leaving directory &amp;#39;/opt/rt-n56u/trunk/libs/boost&amp;#39;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;查找问题原因&#34;&gt;查找问题原因&lt;/h4&gt;
&lt;p&gt;查找原因，直接执行 7z x -bsp0 boost_1_72_0.7z，报错如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ 7z x -bsp0 /opt/rt-n56u/trunk/libs/boost/boost_1_72_0.7z  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Error:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Incorrect command line  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;显示的错误一致。&lt;br&gt;
如果修改一下，执行 7z x boost_1_72_0.7z&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;/tmp$ 7z x  /opt/rt-n56u/trunk/libs/boost/boost_1_72_0.7z&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;则能正确执行。&lt;br&gt;
通过Google搜索＂7z bsp0 error＂，可以查到一篇＂&lt;a class=&#34;link&#34; href=&#34;https://superuser.com/questions/194659/how-to-disable-the-output-of-7-zip&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;How to disable the output of 7-Zip?&lt;/a&gt;＂，里面有提到&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You can use the -bs command to control where output goes. To stop anything but error output, I would add -bso0 -bsp0.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;即参数-bsp0可以停止除错误输出之外的任何操作，&lt;br&gt;
下一个回复则说到&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is correct, but introduced in 7Zip version 15.01 or after 9.38beta Source: sourceforge.net/p/sevenzip/discussion/45797/thread/8a45fa74 The actual Synology DSM 6.1.x includes 7zip with the version 9.20 and has no such option.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;应该是后来的版本里没有这个选项。&lt;br&gt;
由此可以确定是由于7z版本更新后，不再支持-bsp0选项，而造成的这个错误。&lt;/p&gt;
&lt;h4 id=&#34;解决问题&#34;&gt;解决问题&lt;/h4&gt;
&lt;p&gt;解决方法应该是去掉命令中的-bsp0。&lt;br&gt;
搜索这个命令的位置：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ /opt/rt-n56u/trunk$ grep -r &amp;#39;bsp0 &amp;#39; *  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;libs/boost/Makefile:            7z x -bsp0 $(SRC_NAME).7z ; \  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;那就是在文件/opt/rt-n56u/trunk/libs/boost/Makefile里，打开该文件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ vim /opt/rt-n56u/trunk/libs/boost/Makefile  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SRC_NAME = boost_1_72_0  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;THISDIR = $(shell pwd)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CFLAGS := -O3 -ffunction-sections -fdata-sections  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CXXFLAGS := -O3 -ffunction-sections -fdata-sections  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;LDFLAGS := -Wl,--gc-sections  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Boost_libs := date_time,program_options,system  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;all: extract_test config_test  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ( cd $(SRC_NAME); \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ./b2 -d 0 -j $(HOST_NCPU) toolset=gcc-cross link=static variant=release runtime-link=shared install ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        )  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;extract_test:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ( if [ ! -d $(SRC_NAME) ]; then \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                7z x -bsp0 $(SRC_NAME).7z ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                patch -d $(SRC_NAME) -p1 -i ../build.patch; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        fi )  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;config_test:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ( if [ -f ./config_done ]; then \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                echo &amp;#34;config done&amp;#34;; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        else \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        cd $(SRC_NAME); \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ./bootstrap.sh --with-libraries=$(Boost_libs) --prefix=$(STAGEDIR) ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        echo &amp;#34;using gcc : cross : $(CXX) : &amp;lt;compileflags&amp;gt;\&amp;#34;$(CPUFLAGS)\&amp;#34; &amp;lt;cxxflags&amp;gt;\&amp;#34;$(CXXFLAGS)\&amp;#34; &amp;lt;cflags&amp;gt;\&amp;#34;$(CFLAGS)\&amp;#34; &amp;lt;linkflags&amp;gt;\&amp;#34;$(LDFLAGS)\&amp;#34; ;&amp;#34; &amp;gt;&amp;gt; project-config.jam ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        touch ../config_done; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        fi )  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;clean:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        rm -f config_done  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;romfs:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        cp -fP $(STAGEDIR)/lib/libboost_*.so* $(ROMFSDIR)/lib  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;修改第15行 &amp;quot;                7z x -bsp0 $(SRC_NAME).7z ; &amp;quot;，去掉-bsp0，改为：&lt;br&gt;
&amp;quot;                7z x $(SRC_NAME).7z ; &amp;quot;&lt;br&gt;
&lt;strong&gt;已确认修改完成后该问题解决&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;没有htop-302targz且在试图下载htop-302targz时报错&#34;&gt;没有htop-3.0.2.tar.gz，且在试图下载htop-3.0.2.tar.gz时报错&lt;/h3&gt;
&lt;p&gt;报错内容为：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;HTTP request sent, awaiting response&amp;hellip; 403 Forbidden&lt;br&gt;
2022-05-29 11:09:25 ERROR 403: Forbidden.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;帖子&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/thread-4064867-1-1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;C大源码编译到htop时出错&lt;/a&gt;里描述了相同的错误，并说明了解决方案，如下：&lt;br&gt;
把&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/forum.php?mod=attachment&amp;amp;aid=NDQxMTk5fDY4MDg5ZDU3fDE2NTM4Mzc5MDZ8MHw0MDY0ODY3&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;htop-3.0.2.tar.gz&lt;/a&gt;文件放/opt/rt-n56u/trunk/user/htop下就行了。&lt;br&gt;
&lt;strong&gt;已确认该解决方案可行&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;在编译到trojan时报错&#34;&gt;在编译到trojan时报错&lt;/h3&gt;
&lt;p&gt;报错如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;CMake Error at CMakeLists.txt:1 (cmake_minimum_required):&lt;br&gt;
CMake 3.7.2 or higher is required.  You are running version 3.5.1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;参考&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/u010420283/article/details/117632307&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ubuntu18/16 升级默认apt安装的cmake版本&lt;/a&gt;，从&lt;a class=&#34;link&#34; href=&#34;https://cmake.org/download/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CMakedownload&lt;/a&gt;下载cmake。&lt;br&gt;
当前cmake版本为3.22.4&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;/tmp$ wget &lt;a class=&#34;link&#34; href=&#34;https://github.com/Kitware/CMake/releases/download/v3.22.4/cmake-3.22.4-linux-x86_64.tar.gz&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/Kitware/CMake/releases/download/v3.22.4/cmake-3.22.4-linux-x86_64.tar.gz&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意：上面下载的是linux的&lt;strong&gt;可执行版本&lt;/strong&gt;，而不是源代码包。&lt;br&gt;
解压后，移动到/opt目录下，并做链接(ln)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ tar zxvf cmake-3.22.4-linux-x86_64.tar.gz   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 查看版本号  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ ./cmake-3.22.4-linux-x86_64/bin/cmake --version  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 新建目录  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ sudo mkdir /opt/cmake-3.22.4  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ sudo chmod 0777 /opt/cmake-3.22.4  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 移动  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ mv cmake-3.22.4-linux-x86_64/* /opt/cmake-3.22.4/ -f  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 建立软链接  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ln -sf /opt/cmake-3.22.4/bin/* /usr/bin/  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 再次查看版本  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cmake --version  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;最后编译完成后报错说包太大&#34;&gt;最后编译完成后报错，说包太大&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Padded Kernel Image Size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;1273856 /opt/rt-n56u/trunk/images/zImage.lzma  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Original RootFs Size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;110628938       /opt/rt-n56u/trunk/romfs  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Compressed RootFs Size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;43246464 /opt/rt-n56u/trunk/images/ramdisk  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Padded Kernel Image + Compressed Rootfs Size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;44520320 /opt/rt-n56u/trunk/images/zImage.lzma  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# !!! Please make sure that Padded Kernel Image + Compressed Rootfs size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# can&amp;#39;t bigger than 32964544 !!!  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#===========================================  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Pack final image and write headers  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# For No padded, need write kernel size in image header   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# to correct mount partition in mtd drivers address  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;img file: /opt/rt-n56u/trunk/images/NEWIFI3_3.4.3.9-099.trx  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;查看images目录，包还是生成了&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/opt/rt-n56u/trunk$ ll images/  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;total 132812  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;drwxr-xr-x  2 root   root       4096 May 30 05:35 ./  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;drwxrwxr-x 14 jimway jimway     4096 May 30 04:59 ../  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r--  1 root   root   44520384 May 30 05:35 NEWIFI3_3.4.3.9-099.trx  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r--  1 root   root   43246464 May 30 05:35 ramdisk  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rwxr-xr-x  1 root   root    3692352 May 30 05:35 zImage*  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r--  1 root   root   44520320 May 30 05:35 zImage.lzma  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;多用了12-13M空间，看下怎么能减下来。&lt;/p&gt;
&lt;h3 id=&#34;修改原老毛子padavan固件编译笔记中的编译操作总结&#34;&gt;修改原老毛子Padavan固件编译笔记中的编译操作总结&lt;/h3&gt;
&lt;p&gt;综上所述，修改原&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/c31b58728778&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子Padavan固件编译笔记&lt;/a&gt;中的编译操作如下：&lt;/p&gt;
&lt;h3 id=&#34;系统准备-1&#34;&gt;系统准备&lt;/h3&gt;
&lt;h4 id=&#34;操作系统更新-1&#34;&gt;操作系统更新&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo apt update&lt;br&gt;
$ sudo apt upgrade&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;安装依赖包-1&#34;&gt;安装依赖包&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$  sudo apt install unzip libtool-bin curl cmake gperf gawk flex bison nano fakeroot cpio git python-docutils gettext automake autopoint texinfo build-essential help2man pkg-config zlib1g-dev libgmp3-dev libmpc-dev libmpfr-dev libncurses5-dev libltdl-dev wget p7zip-full&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;编译过程&#34;&gt;编译过程&lt;/h3&gt;
&lt;h4 id=&#34;准备目录-1&#34;&gt;准备目录&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo mkdir /opt/rt-n56u&lt;br&gt;
$ sudo chmod 0777 /opt/rt-n56u&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;拉取源码-1&#34;&gt;拉取源码:&lt;/h4&gt;
&lt;p&gt;选择github上的代码&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ git clone --depth=1 &lt;a class=&#34;link&#34; href=&#34;https://github.com/chongshengB/rt-n56u.git&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/chongshengB/rt-n56u.git&lt;/a&gt; /opt/rt-n56u&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;准备toolchain-1&#34;&gt;准备toolchain&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ cd /opt/rt-n56u/toolchain-mipsel&lt;br&gt;
# 使用脚本下载预编译的工具链：&lt;br&gt;
$ sh dl_toolchain.sh&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;将前述htop-302targz文件拷贝到optrt-n56utrunkuserhtop目录下&#34;&gt;将前述htop-3.0.2.tar.gz文件拷贝到/opt/rt-n56u/trunk/user/htop目录下&lt;/h4&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/forum.php?mod=attachment&amp;amp;aid=NDQxMTk5fDY4MDg5ZDU3fDE2NTM4Mzc5MDZ8MHw0MDY0ODY3&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;htop-3.0.2.tar.gz文件链接&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ cp htop-3.0.2.tar.gz /opt/rt-n56u/trunk/user/htop&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;修改libsboostmakefile&#34;&gt;修改libs/boost/Makefile&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ vim /opt/rt-n56u/trunk/libs/boost/Makefile&lt;br&gt;
修改第15行”7z x -bsp0 $(SRC_NAME).7z ; \”，改为：&lt;br&gt;
&amp;ldquo;7z x $(SRC_NAME).7z ; &amp;quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;升级cmake版本&#34;&gt;升级cmake版本&lt;/h4&gt;
&lt;p&gt;下载新版本cmake(可执行版本)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;/tmp$ wget &lt;a class=&#34;link&#34; href=&#34;https://github.com/Kitware/CMake/releases/download/v3.22.4/cmake-3.22.4-linux-x86_64.tar.gz&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/Kitware/CMake/releases/download/v3.22.4/cmake-3.22.4-linux-x86_64.tar.gz&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;解压后，移动到/opt目录下，并做链接(ln)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 解压  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ tar zxvf cmake-3.22.4-linux-x86_64.tar.gz   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 新建目录  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ sudo mkdir /opt/cmake-3.22.4  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ sudo chmod 0777 /opt/cmake-3.22.4  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 移动  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ mv cmake-3.22.4-linux-x86_64/* /opt/cmake-3.22.4/ -f  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 建立软链接  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ln -sf /opt/cmake-3.22.4/bin/* /usr/bin/  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;查看并修改自定义插件配置文件是optrt-n56utrunkbuild_firmware_modify&#34;&gt;查看并修改自定义插件，配置文件是/opt/rt-n56u/trunk/build_firmware_modify&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ vim /opt/rt-n56u/trunk/build_firmware_modify&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;将文件中的插件自定义修改y/n，y是编译，n是不编译。&lt;br&gt;
注意：至少要保留科学上网相关的插件。&lt;/p&gt;
&lt;h4 id=&#34;可选编辑配置文件模板&#34;&gt;(可选)编辑配置文件(模板)&lt;/h4&gt;
&lt;p&gt;在/opt/rt-n56u/trunk/configs/templates/目录下&lt;br&gt;
Newifi3的配置文件名为NEWIFI3.config&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ vim /opt/rt-n56u/trunk/configs/templates/NEWIFI3.config&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;进行编译-1&#34;&gt;进行编译&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cd /opt/rt-n56u/trunk  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 对于WSL环境，需要使用sudo进行编译，或者使用fakeroot-tcp代替fakeroot  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ./build_firmware_modify NEWIFI3  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;坐等编译完成，时间会比较长，大概与机器速度强相关。&lt;/p&gt;
&lt;h3 id=&#34;编译完成拷出固件-1&#34;&gt;编译完成，拷出固件&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;编译好的固件在:&lt;br&gt;
/opt/rt-n56u/trunk/images&lt;/li&gt;
&lt;li&gt;生成的固件为:&lt;br&gt;
NEWIFI3_3.4.3.9-099.trx&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;编译成功，功能较多，尚未测试。(5.30)&lt;/p&gt;
&lt;p&gt;(第一次成功编译后_5.30之前)用编译后固件刷了NEWIFI3后, 进入后看到的图面如下:&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/2022-05-28_chongshengB_pdv_%e7%a7%91%e5%ad%a6%e7%95%8c%e9%9d%a2.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;符合预期!&lt;/p&gt;
&lt;p&gt;又:&lt;br&gt;
经测试，&lt;strong&gt;科学功能不稳定&lt;/strong&gt;！且功能简单，远不如op上的科学功能强大，而且功能远少于op。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;注:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;关于清理代码树并重新开始编译:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cd /opt/rt-n56u/trunk  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ./clear_tree  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ./build_firmware_modify NEWIFI3  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;再次尝试用可选科学上网插件的代码做编译&#34;&gt;再次尝试用可选科学上网插件的代码做编译&lt;/h2&gt;
&lt;p&gt;又又在网上找了一个版本：&lt;br&gt;
&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/thread-4055964-1-1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;【2021-01-10】NEWIFI3 基于chongshengB源码编译彩虹版主题padavan,更新手机版页面&lt;/a&gt;&lt;br&gt;
下载了其中的&lt;a class=&#34;link&#34; href=&#34;https://wwa.lanzoui.com/iqAick8u2kf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;完整版&lt;/a&gt;(似乎并不是这个)&lt;br&gt;
刷机后如下:&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/2022-05-30_122926_%e7%bd%91%e7%bb%9c%e4%b8%8b%e8%bd%bd%e6%9f%90%e7%89%88%e6%9c%ac_%e8%83%bd%e7%a7%91%e5%ad%a6%e4%b8%8d%e7%a8%b3%e5%ae%9a.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;功能是有了，但是&lt;strong&gt;科学功能依然不稳定&lt;/strong&gt;：开机后长时间不能科学，但睡一觉后．．．．．又能科学了！(还有，出现在本来能科学，改下科学的配置并保存后，居然也不能科学了！这很不科学！)(之后还又不能科学了/_ )&lt;/p&gt;
&lt;h2 id=&#34;再再次尝试&#34;&gt;再再次尝试&lt;/h2&gt;
&lt;p&gt;成功不完全，就是完全不成功！&lt;br&gt;
换：CM520+自制全套OP办科学，NWF3+自制全套PDV做交换+wifi。&lt;br&gt;
2020.5.30记录&lt;/p&gt;
&lt;p&gt;&amp;hellip;当前NWF3+PDV还能凑合用，先用着&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自制&amp;hellip;完成&lt;/li&gt;
&lt;li&gt;CM520+自制测试，NWF3(不刷+不做拨号和DHCP)做WIFI(如失败，NWF3恢复后继续凑合)&lt;br&gt;
如成功&lt;/li&gt;
&lt;li&gt;再刷NWF3&lt;br&gt;
希望最终CM520、NWF3都能独立使用。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2022.6.1记录:&lt;br&gt;
最后还是成功了的(还未上线测), 看图&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/56-pdv-10.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/56-pdv-11.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;参考列表&#34;&gt;参考列表&lt;/h2&gt;
&lt;h3 id=&#34;编译参考&#34;&gt;编译参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/6b8403cdea46&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Padavan固件编译办法&lt;/a&gt;: 
第一次编译时参考&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;源代码列表&#34;&gt;源代码列表&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/hanwckf/rt-n56u&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;hanwckf的Padavan库_Github&lt;/a&gt;:&lt;br&gt;
最先支持了7915无线芯片，也就是支持了wifi6的机型比如CR660x和JCG Q20/Q10 Pro&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/chongshengB/rt-n56u&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;chongshengB的Padavan库_Github&lt;/a&gt;:&lt;br&gt;
在hanwckf的基础上增加修改出了7615/7915对kvr的支持&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/padavanonly/rt-n56u&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;padavanonly的Padavan库 Github&lt;/a&gt;:&lt;br&gt;
具有一些别人没有的插件，使用比较方便&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/immortalwrt/padavan&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;immortalwrt的Padavan库 Github&lt;/a&gt;:&lt;br&gt;
在一些细节上有优化&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/Yuclee/Padavan-Minimal&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Yuclee的Padavan-mini库 Github&lt;/a&gt;:&lt;br&gt;
看样子是个精简版本&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;其他参考&#34;&gt;其他参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.cxymm.net/article/m0_60027682/120075617&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Padavan各源码融合教程_m0_60027682的博客-程序员秘密&lt;/a&gt;:&lt;br&gt;
整合多个源代码的功能&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/cb51fb0fb2ac&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子固件使用说明&lt;/a&gt;:&lt;br&gt;
有初始化说明&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/c31b58728778&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子Padavan固件编译笔记&lt;/a&gt; &lt;strong&gt;(最终参考)&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/thread-4740979-1-1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;NEWIFI3 D2自编译PADAVAN老毛子固件，基于hanwckf最新源码编译整合常用插件&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/thread-4064867-1-1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;C大源码编译到htop时出错&lt;/a&gt;:&lt;br&gt;
编译错误处理&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;tbd&#34;&gt;TBD&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;机编op for cm520(全套, 主用v2, 不用无线, 做拨号)&lt;/li&gt;
&lt;li&gt;机编pdv for newifi3, chongshengB版, 全套, 仅用来做无线(5G放149)&lt;/li&gt;
&lt;li&gt;git编pdv for newifi3&lt;br&gt;
看来是完成了的(2022.11.1)&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Ｗindows10: WSL &#43; Ubuntu</title>
        <link>https://jimway71.github.io/p/%EF%BD%97indows10-wsl--ubuntu/</link>
        <pubDate>Sat, 28 May 2022 12:41:00 +0800</pubDate>
        
        <guid>https://jimway71.github.io/p/%EF%BD%97indows10-wsl--ubuntu/</guid>
        <description>&lt;img src="https://jimway71.github.io/wallpaper/wallpaper-55.jpg" alt="Featured image of post Ｗindows10: WSL &#43; Ubuntu" /&gt;&lt;p&gt;Vmware用烦了，太麻烦，太占用资源，换个轻量点的：WSL + Ubuntu&lt;/p&gt;
&lt;h2 id=&#34;关于wsl&#34;&gt;关于WSL&lt;/h2&gt;
&lt;p&gt;Windows Subsystem for Linux（WSL）是一个用于在本地运行linux二进制可执行文件（ELF格式）的兼容层。与虚拟机相比，wsl没有虚拟硬件的过程，而是直接在windows上虚拟一个linux内核，模拟linux系统调用，以运行linux执行文件。因此效率要比虚拟机高，但是它使用的是自己实现的init进程而不是发行版的init进程，并且几乎没有实现任何系统服务，因此只适用于软件的开发，而不是作为桌面环境或生产性的服务器。&lt;/p&gt;
&lt;h2 id=&#34;安装wsl&#34;&gt;安装WSL&lt;/h2&gt;
&lt;h3 id=&#34;安装适用于linux的windows子系统&#34;&gt;安装“适用于Linux的Windows子系统”&lt;/h3&gt;
&lt;p&gt;(在Windows10系统中搜索)打开“启用或关闭Windows功能”, 选中“适用于Linux的Windows子系统”，点击确认按钮，并根据提示重启电脑。&lt;/p&gt;
&lt;h3 id=&#34;使用windows应用商店安装ubuntu&#34;&gt;使用Windows应用商店安装Ubuntu&lt;/h3&gt;
&lt;p&gt;(搜索)打开“Microsoft Store”，在里面的搜索栏输入“Ubuntu”，选择需要的版本进行安装。&lt;br&gt;
当前最旧的版本为Ubuntu 18.04.5 LTS，最新的Ubuntu 22.04 LTS。&lt;br&gt;
有未标注版本号的Ubuntu，这是可以滚动升级的版本，使用do_release-upgrade命令可以直接滚动升级到最新版Ubuntu&lt;br&gt;
说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;关于硬盘分区&lt;br&gt;
windows的硬盘分区到加载到Ubuntu的/mnt目录下, 如Ｃ盘在/mnt/c，E盘在/mnt/e。&lt;/li&gt;
&lt;li&gt;关于网络&lt;br&gt;
WSL的Ubuntu采用桥接模式连接网络, 用ifconfig查看，可以看到另一个内网网段的地址，内外网均可访问。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;初始使用wsl的ubuntu&#34;&gt;初始使用WSL的Ubuntu&lt;/h2&gt;
&lt;p&gt;(在Windows10系统中搜索)打开“Ubuntu”，即可进入Ubuntu界面。&lt;br&gt;
第一次进入时，系统会要求增加一个用户，设置用户名和密码。&lt;/p&gt;
&lt;h2 id=&#34;windows与ubuntu的互操作&#34;&gt;Windows与Ubuntu的互操作&lt;/h2&gt;
&lt;p&gt;互操作性是指，既可以在windows中运行linux进程，也可以在linux中运行windows进程，并且支持两个不同进程间的输入输出重定向。&lt;/p&gt;
&lt;h3 id=&#34;在windows中运行linux进程&#34;&gt;在windows中运行linux进程&lt;/h3&gt;
&lt;p&gt;在windows中使用wsl [command]运行linux命令，需要注意：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;linux命令使用当前目录作为工作目录;&lt;/li&gt;
&lt;li&gt;对于windows文件，拥有运行WSL的windows用户权限；对于linux文件拥有登录用户权限;&lt;/li&gt;
&lt;li&gt;文件路径使用linux格式;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例子(抄的，没太看明白，估计用不着)：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C:\temp&amp;gt; wsl ls -la  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;- contents of C:\temp -&amp;gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C:\temp&amp;gt; wsl sudo apt-get update  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[sudo] password for username:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Hit:1 https://archive.ubuntu.com/ubuntu xenial InRelease   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Get:2 https://security.ubuntu.com/ubuntu xenial-security InRelease [94.5 kB]  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C:\temp&amp;gt; wsl ls -la | findstr &amp;#34;foo&amp;#34;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rwxrwxrwx 1 root root 14 Sep 27 14:26 foo.bat  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C:\temp&amp;gt; dir | wsl grep foo  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;09/27/2016 02:26 PM  14 foo.bat  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C:\temp&amp;gt; wsl ls -la &amp;gt; out.txt  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C:\temp&amp;gt; wsl ls -la /proc/cpuinfo  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;1 root root 0 Sep 28 11:28 /proc/cpuinfo  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C:\temp&amp;gt; wsl ls -la &amp;#34;/mnt/c/Program Files&amp;#34;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;- contents of C:\Program Files -&amp;gt;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;在linux中运行windows命令&#34;&gt;在linux中运行windows命令&lt;/h3&gt;
&lt;p&gt;在linux中运行windows命令，使用[binary name].exe（后缀不要省略），linux可以直接访问windows命令的原因在于linux共享了windows的PATH环境变量（我猜是linux中唯一的守护进程init做的）。&lt;br&gt;
需要注意：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一般windows命令的工作目录为当前linux的工作目录。如果linux工作目录位于linux文件系统内，则windows的工作目录会改为Base.exe的工作目录（原因见2.4小节）。&lt;/li&gt;
&lt;li&gt;拥有与运行WSL拥有者一致的权限&lt;/li&gt;
&lt;li&gt;需要注意路径，看下面的例子&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例子(也是抄的)：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ notepad.exe  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ ipconfig.exe | grep IPv4 | cut -d：-f2  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;172.21.240.1  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.159.21.24  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ ls -la | findstr.exe foo.txt  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cmd.exe /c dir  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;- contents of C:\ -&amp;gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$#cmd 原生命名需要通过cmd.exe运行  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cmd.exe /C dir  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;- contents of C:\ -&amp;gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ PING.EXE www.microsoft.com  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Pinging e1863.dspb.akamaiedge.net [2600:1409:a:5a2::747] with 32 bytes of data:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Reply from 2600:1409:a:5a2::747：time=2ms  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ notepad.exe &amp;#34;C:\temp\foo.txt&amp;#34;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ notepad.exe C:\\temp\\foo.txt  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;ubuntu更换国内镜像源并更新软件包&#34;&gt;Ubuntu更换国内镜像源并更新软件包&lt;/h2&gt;
&lt;p&gt;Ubuntu的官方镜像列表在&lt;a class=&#34;link&#34; href=&#34;https://launchpad.net/ubuntu/&amp;#43;archivemirrors&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Official Archive Mirrors for Ubuntu&lt;/a&gt;，里面有大学、组织、公司，由于往往只有大公司可能在全国布置多节点以提高访问速度，所以对比了下几家大公司(的ping值)，最后&lt;a class=&#34;link&#34; href=&#34;https://mirrors.cloud.tencent.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;腾讯云镜像&lt;/a&gt;最快，&lt;a class=&#34;link&#34; href=&#34;http://mirrors.aliyun.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;阿里云镜像&lt;/a&gt;略慢，&lt;a class=&#34;link&#34; href=&#34;https://repo.huaweicloud.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;华为云镜像&lt;/a&gt;不太稳定。&lt;br&gt;
操作：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo sed -i &amp;#39;s#http://archive.ubuntu.com#https://mirrors.cloud.tencent.com#&amp;#39; /etc/apt/sources.list  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo sed -i &amp;#39;s#http://security.ubuntu.com#https://mirrors.cloud.tencent.com#&amp;#39; /etc/apt/sources.list  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt update  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt upgrade  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;参考&#34;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/jdbdh/article/details/88653434&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;windows上的linux子系统(WSL)&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/zh-cn/windows/wsl/about&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;微软官方文档&lt;/a&gt;：介绍了安装、使用&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://devblogs.microsoft.com/commandline/learn-about-windows-console-and-windows-subsystem-for-linux-wsl/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Learn About Windows Console &amp;amp; Windows Subsystem For Linux (WSL)&lt;/a&gt;：介绍了wsl原理&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;wsl wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://devblogs.microsoft.com/commandline/do-not-change-linux-files-using-windows-apps-and-tools/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Do not change Linux files using Windows apps and tools&lt;/a&gt;: 来自Rich的警告&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/zh-cn/archive/blogs/wsl/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;wsl官方博客集合&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://research.wmz.ninja/articles/2017/11/setting-up-wsl-with-graphics-and-audio.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Setting Up WSL with Graphics and Audio&lt;/a&gt;：对WSL理解的很好&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/henryhu712/article/details/108910727&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;在Windows10上安装Ubuntu&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Q&amp;A</title>
        <link>https://jimway71.github.io/p/qa/</link>
        <pubDate>Sat, 03 Apr 2021 22:57:16 +0800</pubDate>
        
        <guid>https://jimway71.github.io/p/qa/</guid>
        <description>&lt;img src="https://jimway71.github.io/wallpaper/wallpaper-29.jpg" alt="Featured image of post Q&amp;A" /&gt;&lt;h2 id=&#34;问题-旧版securecrt不能连接新版本的sshd服务器&#34;&gt;问题: 旧版SecureCrt不能连接新版本的sshd服务器&lt;/h2&gt;
&lt;p&gt;报错如下:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Key exchange failed. No compatible key exchange method. The server supports these methods: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;原因分析:&lt;br&gt;
旧版SecureCrt(版本号6.7.0 (build 153))支持的密钥交换(Key exchange)为以下5种:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kerberos&lt;/li&gt;
&lt;li&gt;Kerberos(Group Exchange)&lt;/li&gt;
&lt;li&gt;Diffie-hellman-group14&lt;/li&gt;
&lt;li&gt;Diffie-hellman-group&lt;/li&gt;
&lt;li&gt;Diffie-hellman&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这5种均不被新的sshd支持, 当前sshd版本信息为:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;OpenSSH_8.3p1, OpenSSL 1.1.1j  16 Feb 2021&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;处理方式:&lt;br&gt;
修改/etc/ssh/sshd_config文件, 添加(我是在文件最后添加):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;KexAlgorithms diffie-hellman-group14-sha1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;然后重启sshd:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;#service sshd restart&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;即可。&lt;br&gt;
(看参考的文档, 说的是添加:&lt;br&gt;
KexAlgorithms &lt;a class=&#34;link&#34; href=&#34;mailto:curve25519-sha256@libssh.org&#34; &gt;curve25519-sha256@libssh.org&lt;/a&gt;,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha1,diffie-hellman-group-exchange-sha1,diffie-hellman-group1-sha1&lt;br&gt;
其实添加一种SecureCrt支持的方式就可以了)&lt;br&gt;
参考:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/duanbiren123/article/details/103034914&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;升级ssh后续问题&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;http://www.tomato.cm/179.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;使用SecureCRT连接Ubuntu20.04报错：Key exchange failed. No compatible key exchange method&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/shenjianyu/p/6407042.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;升级openssh带来的问题&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;更新:&lt;/strong&gt;&lt;br&gt;
可以改用基于&lt;a class=&#34;link&#34; href=&#34;file:///C:/Users/jimway/AppData/Local/Temp/Mxt220/tmp/licenses/EulaHOME.html&#34; &gt;MobaXterm license&lt;/a&gt;许可的&lt;a class=&#34;link&#34; href=&#34;https://mobaxterm.mobatek.net/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MobaXterm&lt;/a&gt;, 不再有这种问题。&lt;/p&gt;
&lt;h2 id=&#34;问题-在openwrt上新建一个可用的samba用户&#34;&gt;问题: 在openwrt上新建一个可用的samba用户&lt;/h2&gt;
&lt;p&gt;需要解决的问题:&lt;br&gt;
需要新增一个samba用户, 而samba用户是与同名系统用户关联的, 所以需要先建立一个同名的系统用户.&lt;br&gt;
但是, 当前Openwrt的底层系统里没有useradd或者adduser命令, 用opkg update更新后, 搜索可用的包里也没找到相关的包, 包括有人提到的shadow-useradd或者类似的命令, 所以, 不能用命令添加一个用户&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;那, 就先手动来新增一个用户&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;修改/etc/passwd文件, 增加新用户信息&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# vim /etc/passwd&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;增加一行:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;newuser:x:66666:66666:newuser:/home/newuser:/bin/ash&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;说明:&lt;br&gt;
newuser是用户名, /home/newuser就是newuser用户的根目录了.&lt;br&gt;
66666是用户ID, 要注意在整个passwd文件是应该是唯一的.&lt;br&gt;
/bin/ash是shell, 是从root用户那行抄来的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改/etc/group文件, 增加新用户的组信息: 组名和用户名一般都是相同的&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# vim /etc/group&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;增加一行:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;newuser:x:66666:newuser&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;说明:&lt;br&gt;
组名和用户名相同&lt;br&gt;
组ID号和用户ID号也相同&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;建立新用户根目录, 并设置属主/组&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# mkdir /home/newuser&lt;br&gt;
# chown newuser /home/newuser&lt;br&gt;
# chgrp newuser /home/newuser&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;给新用户设置密码&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# passwd newuser&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;该设置samba用户了&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;给samba新用户设置密码&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;del&gt;# smbpasswd newuser&lt;/del&gt;&lt;br&gt;
&lt;del&gt;&amp;hellip;&amp;hellip;&lt;/del&gt;&lt;br&gt;
&lt;del&gt;Failed to find entry for user newuser.&lt;/del&gt;&lt;br&gt;
# smbpasswd -a newuser&lt;br&gt;
&amp;hellip;&amp;hellip;&lt;br&gt;
Added user newuser.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使samba新用户可用&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# smbpasswd -e newuser&lt;br&gt;
Enabled user newuser.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;问题-在openwrt上设置samba服务器-windowswin10es文件浏览器都可以通过网络访问&#34;&gt;问题: 在openwrt上设置samba服务器, Windows/Win10/Es文件浏览器都可以通过网络访问.&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;环境说明:&lt;/strong&gt;&lt;br&gt;
用S905L的盒子装了个openwrt, 装在TF卡上, 用TF卡启动.&lt;br&gt;
TF卡上除了装op系统的大概1G空间外, 剩下的空间分区并格式化为exfat格式, op启动时会自动加载这个exfat分区, 使用samba(web上在网络存储-网络共享)共享出来可供局域网内设备访问.&lt;br&gt;
Win10当前版本缺省不支持SMB 1.0/CIFS, 为了访问低版本的samba设备, 已通过&amp;quot;启用或关闭Windows功能&amp;quot;打开&amp;quot;SMB 1.0/CIFS文件共享支持&amp;quot;+&amp;ldquo;SMB Direct&amp;rdquo;, 需要能让这种设备访问盒子上的samba服务器 - 其实这并不是一个问题, 当前版本的samba(V4.11.6)早已支持新版本的samba协议.&lt;br&gt;
安卓手机app&amp;quot;Es文件管理器&amp;quot;也需要在局域网内能访问同一个samba服务器.&lt;br&gt;
&lt;strong&gt;问题详述:&lt;/strong&gt;&lt;br&gt;
&lt;u&gt;问题1. linux上的samba服务器与Windows的Samba服务器是有区别的&lt;/u&gt;&lt;br&gt;
Windows的samba服务器被访问时, 如果需要用户登录, 会在开始连接时就要求登录.&lt;br&gt;
而Linux的samba服务器被访问时, 只有当访问到&amp;quot;共享目录&amp;quot;时, 才会问到登录信息.&lt;br&gt;
&lt;u&gt;问题2. 当前版本的Win10在访问samba服务时, 已经不支匿名访问, 只能修改注册表信息来支持&lt;/u&gt;&lt;br&gt;
这个操作比较麻烦, 不考虑&lt;br&gt;
测试中发现, 当一个samba服务器里只要存在任何一个可以匿名访问的文件共享, Win10就无法访问整个Samba服务器, 因此要求samba服务器中的任何共享都是非匿名访问的.&lt;br&gt;
&lt;u&gt;问题3 Es文件管理器App访问linux上的Samba服务器时, 缺省是以匿名方式访问&lt;/u&gt;&lt;br&gt;
不会主动弹出登录信息窗口, 即使无法打开一个需要登录的共享时, 也不会主动弹出.&lt;br&gt;
这就需要手动设置Es的登录信息.&lt;br&gt;
这个问题和问题1有相关性.&lt;br&gt;
&lt;strong&gt;其他&lt;/strong&gt;&lt;br&gt;
由于exfat是微软的文件格式, 没有用户权限信息, 避开了linux复杂的权限问题, 因此选择使用这种文件格式&lt;br&gt;
&lt;strong&gt;结论:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;op上的samba共享都需要设置成用户登录访问&lt;/li&gt;
&lt;li&gt;Es访问时需要手动设置用户登录信息.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Samba服务器的设置如下&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;配置文件&lt;br&gt;
op上luci的缺省配置文件如下:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[global]&lt;br&gt;
netbios name = |NAME|&lt;br&gt;
interfaces = |INTERFACES|&lt;br&gt;
server string = |DESCRIPTION|&lt;br&gt;
unix charset = |CHARSET|&lt;br&gt;
workgroup = |WORKGROUP|&lt;/p&gt;
&lt;p&gt;## This global parameter allows the Samba admin to limit what interfaces on a machine will serve SMB requests.&lt;br&gt;
bind interfaces only = yes&lt;/p&gt;
&lt;p&gt;## time for inactive connections to-be closed in minutes&lt;br&gt;
deadtime = 15&lt;/p&gt;
&lt;p&gt;## disable core dumps&lt;br&gt;
enable core files = no&lt;/p&gt;
&lt;p&gt;## set security (auto, user, domain, ads)&lt;br&gt;
security = user&lt;/p&gt;
&lt;p&gt;## This parameter controls whether a remote client is allowed or required to use SMB encryption.&lt;br&gt;
## It has different effects depending on whether the connection uses SMB1 or SMB2 and newer:&lt;br&gt;
## If the connection uses SMB1, then this option controls the use of a Samba-specific extension to the SMB protocol introduced in Samba 3.2 that makes   use of the Unix extensions.
server min protocol = NT1&lt;br&gt;
client min protocol = NT1&lt;br&gt;
## If the connection uses SMB2 or newer, then this option controls the use of the SMB-level encryption that is supported in SMB version 3.0 and above and available in Windows 8 and newer.&lt;br&gt;
## (default/auto,desired,required,off)&lt;br&gt;
#smb encrypt = default&lt;/p&gt;
&lt;p&gt;## set invalid users&lt;br&gt;
invalid users = root&lt;/p&gt;
&lt;p&gt;## map unknow users to guest&lt;br&gt;
map to guest = Bad User&lt;/p&gt;
&lt;p&gt;## allow client access to accounts that have null passwords.&lt;br&gt;
null passwords = yes&lt;/p&gt;
&lt;p&gt;## The old plaintext passdb backend. Some Samba features will not work if this passdb backend is used. (NOTE: enabled for size reasons)&lt;br&gt;
## (tdbsam,smbpasswd,ldapsam)&lt;br&gt;
passdb backend = smbpasswd&lt;/p&gt;
&lt;p&gt;## Set location of smbpasswd (&amp;lsquo;smbd -b&amp;rsquo; will show default compiled location)&lt;br&gt;
#smb passwd file = /etc/samba/smbpasswd&lt;/p&gt;
&lt;p&gt;## LAN/WAN options (IPTOS_LOWDELAY TCP_NODELAY) WAN (IPTOS_THROUGHPUT)&lt;br&gt;
socket options = IPTOS_LOWDELAY TCP_NODELAY&lt;/p&gt;
&lt;p&gt;## If this integer parameter is set to a non-zero value, Samba will read from files asynchronously when the request size is bigger than this value.&lt;br&gt;
## Note that it happens only for non-chained and non-chaining reads and when not using write cache.&lt;br&gt;
## The only reasonable values for this parameter are 0 (no async I/O) and 1 (always do async I/O).&lt;br&gt;
## (1/0)&lt;br&gt;
#aio read size = 0&lt;br&gt;
#aio write size = 0&lt;/p&gt;
&lt;p&gt;## If Samba has been built with asynchronous I/O support, Samba will not wait until write requests are finished before returning the result to the client for files listed in this parameter.&lt;br&gt;
## Instead, Samba will immediately return that the write request has been finished successfully, no matter if the operation will succeed or not.&lt;br&gt;
## This might speed up clients without aio support, but is really dangerous, because data could be lost and files could be damaged.&lt;br&gt;
#aio write behind = /*.tmp/&lt;/p&gt;
&lt;p&gt;## lower CPU useage if supported and aio is disabled (aio read size = 0 ; aio write size = 0)&lt;br&gt;
## currently broken (NOTE: see &lt;a class=&#34;link&#34; href=&#34;https://bugzilla.samba.org/show_bug.cgi?id=14095&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://bugzilla.samba.org/show_bug.cgi?id=14095&lt;/a&gt; )&lt;br&gt;
## (no, yes)&lt;br&gt;
#use sendfile = yes&lt;/p&gt;
&lt;p&gt;## samba will behave as previous versions of Samba would and will fail the lock request immediately if the lock range cannot be obtained.&lt;br&gt;
#blocking locks = No&lt;/p&gt;
&lt;p&gt;## disable loading of all printcap printers by default (iprint, cups, lpstat)&lt;br&gt;
load printers = No&lt;br&gt;
printcap name = /dev/null&lt;/p&gt;
&lt;p&gt;## Enabling this parameter will disable Samba&amp;rsquo;s support for the SPOOLSS set of MS-RPC&amp;rsquo;s.&lt;br&gt;
disable spoolss = yes&lt;/p&gt;
&lt;p&gt;## This parameters controls how printer status information is interpreted on your system.&lt;br&gt;
## (BSD, AIX, LPRNG, PLP, SYSV, HPUX, QNX, SOFTQ)&lt;br&gt;
printing = bsd&lt;/p&gt;
&lt;p&gt;## Disable that nmbd is acting as a WINS server for unknow netbios names&lt;br&gt;
#dns proxy = No&lt;/p&gt;
&lt;p&gt;## win/unix user mapping backend&lt;br&gt;
#idmap config * : backend = tdb&lt;/p&gt;
&lt;p&gt;## Allows the server name that is advertised through MDNS to be set to the hostname rather than the Samba NETBIOS name.&lt;br&gt;
## This allows an administrator to make Samba registered MDNS records match the case of the hostname rather than being in all capitals.&lt;br&gt;
## (netbios, mdns)&lt;br&gt;
mdns name = mdns&lt;/p&gt;
&lt;p&gt;## Clients that only support netbios won&amp;rsquo;t be able to see your samba server when netbios support is disabled.&lt;br&gt;
#disable netbios = Yes&lt;/p&gt;
&lt;p&gt;## Setting this value to no will cause nmbd never to become a local master browser.&lt;br&gt;
#local master = no&lt;/p&gt;
&lt;p&gt;## (auto, yes) If this is set to yes, on startup, nmbd will force an election, and it will have a slight advantage in winning the election. It is recommended that this parameter is used in conjunction with domain master = yes, so that nmbd can guarantee becoming a domain master.&lt;br&gt;
#preferred master = yes&lt;/p&gt;
&lt;p&gt;## (445 139) Specifies which ports the server should listen on for SMB traffic.&lt;br&gt;
## 139 is netbios/nmbd&lt;br&gt;
#smb ports = 445 139&lt;/p&gt;
&lt;p&gt;## This is a list of files and directories that are neither visible nor accessible.&lt;br&gt;
## Each entry in the list must be separated by a &amp;lsquo;/&amp;rsquo;, which allows spaces to be included in the entry. &amp;lsquo;*&amp;rsquo; and &amp;lsquo;?&amp;rsquo; can be used to specify multiple files or directories as in DOS wildcards.&lt;br&gt;
veto files = /Thumbs.db/.DS_Store/._.DS_Store/.apdisk/&lt;/p&gt;
&lt;p&gt;## If a directory that is to be deleted contains nothing but veto files this deletion will fail unless you also set the delete veto files parameter to   yes.&lt;br&gt;
delete veto files = yes&lt;/p&gt;
&lt;p&gt;################ Filesystem and creation rules ################&lt;br&gt;
## reported filesystem type (NTFS,Samba,FAT)&lt;br&gt;
#fstype = FAT&lt;/p&gt;
&lt;p&gt;## Allows a user who has write access to the file (by whatever means, including an ACL permission) to modify the permissions (including ACL) on it.&lt;br&gt;
#dos filemode = Yes&lt;/p&gt;
&lt;p&gt;## file/dir creating rules&lt;br&gt;
#create mask = 0666&lt;br&gt;
#directory mask = 0777&lt;br&gt;
#force group = root&lt;br&gt;
#force user = root&lt;br&gt;
#inherit owner = windows and unix&lt;br&gt;
################################################################&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个配置文件只需要屏蔽 invalid users = root 这一句, 如下:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;#invalid users = root&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置samba用户&lt;br&gt;
使用&amp;quot;&lt;a class=&#34;link&#34; href=&#34;https://jimway71.github.io/p/qa/#%E9%97%AE%E9%A2%98-%E5%9C%A8openwrt%E4%B8%8A%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84samba%E7%94%A8%E6%88%B7&#34; &gt;在openwrt上新建一个可用的samba用户&lt;/a&gt;&amp;ldquo;的方法建立用户&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置共享目录(补记: 可能是在Luci的界面里)&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/29-qa-01.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;设置共享目录&#34;
	
	
&gt;&lt;br&gt;
按上图方式设置共享目录, 允许用户是刚才设置的smb用户.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;访问&lt;br&gt;
Win10正常访问.&lt;br&gt;
Es文件浏览器App在局域网里设置相应服务器的登录信息后就可以正常访问.&lt;br&gt;
读写都没有问题.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;emuelec2020春节整合版s905-被百毒封了&#34;&gt;EmuELEC2020春节整合版(s905) 被百毒封了&lt;/h2&gt;
&lt;p&gt;EmuELEC 3.3.1 2020春节整合版详细说明: &lt;a class=&#34;link&#34; href=&#34;https://www.bilibili.com/read/cv4420521/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.bilibili.com/read/cv4420521/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;u&gt;下载地址：&lt;/u&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://cloud.189.cn/t/F7JfYbF7VnU&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;EmuELEC2020春节整合版(s905) 被百毒封了&lt;/a&gt;  (访问码:nlp7) -&amp;gt; 已经转&lt;a class=&#34;link&#34; href=&#34;https://cloud.189.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;天翼云&lt;/a&gt; 需要的请下载&lt;a class=&#34;link&#34; href=&#34;https://space.bilibili.com/97745521&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;@人中日月&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;基础包链接：&lt;a class=&#34;link&#34; href=&#34;https://pan.baidu.com/s/1s03OQf60qQCmH8dejykplw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pan.baidu.com/s/1s03OQf60qQCmH8dejykplw&lt;/a&gt; 提取码：g13u&lt;br&gt;
(三个增补包，分别是街机改版、ATOMISWAVE和NAOMI的整合包，需要自己另外根据EMUELEC使用指南里面的方法传到系统里。)&lt;/li&gt;
&lt;li&gt;增量包链接：&lt;a class=&#34;link&#34; href=&#34;https://pan.baidu.com/s/17xkfIu-Wg1CzKAq9sGrXIw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pan.baidu.com/s/17xkfIu-Wg1CzKAq9sGrXIw&lt;/a&gt; 提取码：zkdr&lt;/li&gt;
&lt;li&gt;斐讯N1补丁包链接：&lt;a class=&#34;link&#34; href=&#34;https://pan.baidu.com/s/1RaNq2VaWiPvxX-4q2cjs1A&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pan.baidu.com/s/1RaNq2VaWiPvxX-4q2cjs1A&lt;/a&gt; 提取码：pty4&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;另外, 还有&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Vol4增量包, 应该是FBN街机的&lt;/li&gt;
&lt;li&gt;3.4版的更新包,更新emuelec到3.4&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;问题-openwrt的history只能看到当前连接的命令记录&#34;&gt;问题: openwrt的history只能看到当前连接的命令记录&lt;/h2&gt;
&lt;p&gt;原因: op缺省使用的是ash, 这个轻量化的shell就是这样，除非改用别的shell, 比如bash&lt;br&gt;
处理:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;安装bash&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# opkg update &amp;amp; opkg install bash&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置用户使用bash&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# vim /etc/passwd&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;修改相应用户的shell为bash，并保存退出。&lt;br&gt;
登出并重新登录后新的shell生效&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# echo $SHELL&lt;br&gt;
/bin/bash&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;查看history&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# history&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;应该能看到记录，登出再进，可以看到文件～/.bash_history(bash的history 记录文件)&lt;/p&gt;
&lt;h2 id=&#34;网络相关问题-内网互联&#34;&gt;网络相关问题: 内网互联&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://segmentfault.com/a/1190000016556569&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;frp 和 nginx 搭建一个内网穿透服务器&lt;/a&gt;&lt;br&gt;
网络结构: 外网nginx -&amp;gt; 外网frp server &amp;lt;-&amp;gt; 内网frp client -&amp;gt; 内网web&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.anquanke.com/post/id/231424&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;内网渗透代理之frp的应用与改造（一）&lt;/a&gt;&lt;br&gt;
相关的&lt;a class=&#34;link&#34; href=&#34;https://github.com/mstxq17/FrpProPlugin&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;FrpProPlugin&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://hostloc.com/forum.php?mod=viewthread&amp;amp;tid=820833&amp;amp;extra=&amp;amp;page=2&amp;amp;mobile=2&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;(rinetd YYDS)socat居然比iptab效率高&lt;/a&gt;&lt;br&gt;
我映象比较深的就是 iptables frp nginx socat haproxy rinetd&lt;br&gt;
因为我是转发到rdp然后看油管，稍微卡顿都可以很明显的感觉出来。rinetd很流畅，haproxy和frp可以勉强用用，其它的都是战五渣。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.v2ex.com/t/567570&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;自认为比 frp 更好用的内网穿透工具 nps&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这里列举了一些比较好用的开源的内网穿透工具，详细介绍一下各个软件工具的特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;frp&lt;br&gt;
FRP 功能完整，主要采用 GO 语言实现，重量级的工具，服务端界面样式风格一般。&lt;br&gt;
配置繁琐，不同的协议需要配置不同的参数，采用文件存放数据，不支持数据库管理数据。&lt;/li&gt;
&lt;li&gt;holer&lt;br&gt;
轻量级的内网穿透工具，holer 服务端采用 Java 语言实现，服务端界面漂亮简洁。&lt;br&gt;
Holer 客户端采用了 Java 语言和 GO 语言实现了两种版本，支持几乎所有的 OS 平台。&lt;br&gt;
用到流行的微服务框架 springboot 和 Java 网络框架 netty。&lt;br&gt;
配置很简单，针对所有 TCP 协议只需在客户端设置一个 holer access key 即可。&lt;br&gt;
采用 MySQL 数据库统一管理数据。&lt;/li&gt;
&lt;li&gt;nps&lt;br&gt;
轻量级的内网穿透工具，完全采用 GO 语言实现，服务端界面漂亮简洁。&lt;br&gt;
支持的协议最广泛，配置稍简单，采用文件存放数据，不支持数据库管理数据。&lt;/li&gt;
&lt;li&gt;lanproxy&lt;br&gt;
轻量级的内网穿透工具，客户端采用 GO 语言和 Java 语言实现两种版本，采用了 Java 网络框架 netty，服务端界面体验较差。&lt;br&gt;
配置稍繁琐，采用文件存放数据，不支持数据库管理数据。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其他:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.nasge.com/archives/48.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;内网穿透工具比较(ngrok,frp,lanproxy,goproxy,nps)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://doubibackup.com/wkcjzpyd-2.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;关于目前 GFW(墙) 的封锁方式TCP封锁(阻断)猜想&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;问题-ubuntu采用docker官方shell安装时报错&#34;&gt;问题: ubuntu采用Docker官方shell安装时报错&lt;/h2&gt;
&lt;p&gt;报错信息如下:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# curl -fsSL &lt;a class=&#34;link&#34; href=&#34;https://get.docker.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://get.docker.com&lt;/a&gt; -o get-docker.sh&lt;br&gt;
# sh get-docker.sh&lt;br&gt;
# Executing docker install script, commit: 7cae5f8b0decc17d6571f9f52eb840fbc13b2737&lt;br&gt;
+ sh -c apt-get update -qq &amp;gt;/dev/null&lt;br&gt;
W: The repository &amp;lsquo;cdrom://Ubuntu-Server 16.04.6 LTS &lt;em&gt;Xenial Xerus&lt;/em&gt; - Release amd64 (20190226) xenial Release&amp;rsquo; does not have a Release file.&lt;br&gt;
E: Failed to fetch cdrom://Ubuntu-Server 16.04.6 LTS &lt;em&gt;Xenial Xerus&lt;/em&gt; - Release amd64 (20190226)/dists/xenial/main/binary-amd64/Packages  Please use apt-cdrom to make this CD-ROM recognized by APT. apt-get update cannot be used to add new CD-ROMs&lt;br&gt;
E: Some index files failed to download. They have been ignored, or old ones used instead.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;错误处理, 操作如下:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# vim /etc/apt/sources.list&lt;br&gt;
# 屏蔽掉有cdrom的那一行, 如下&lt;br&gt;
#deb cdrom:[Ubuntu-Server 16.04.6 LTS &lt;em&gt;Xenial Xerus&lt;/em&gt; - Release amd64 (20190226)]/ xenial main restricted&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;参考: &lt;a class=&#34;link&#34; href=&#34;https://linux.cn/article-5409-1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;如何修复 apt-get update 无法添加新的 CD-ROM 的错误&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;问题-padavan路由作二级桥接无线路由时-系统时间混乱的问题处理&#34;&gt;问题: Padavan路由作二级桥接无线路由时, 系统时间混乱的问题处理&lt;/h2&gt;
&lt;p&gt;状态: 配置了NTP同步, 但无效&lt;br&gt;
原因: 可能是没有配置WAN造成的&lt;br&gt;
处理:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;手动:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# ntpd -t -p 192.168.1.1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;自动&lt;br&gt;
在&amp;quot;系统管理&amp;rdquo;-&amp;ldquo;服务&amp;quot;中修改&amp;quot;调度任务 (Crontab)&amp;rdquo;, 增加&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;0 * * * * ntpd -t -p 192.168.1.1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;让系统每小时都做一次时间同步.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;linux下-以指定用户身份执行&#34;&gt;Linux下, 以指定用户身份执行&lt;/h2&gt;
&lt;p&gt;例: # su - 用户名 -c &amp;ldquo;命令&amp;rdquo;&lt;br&gt;
如:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# su - user -c &amp;ldquo;whoami&amp;rdquo;&lt;br&gt;
user&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;说明: 以用户user身份执行whoami, 返回的用户身份是&amp;quot;user&amp;quot;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>花生壳动态域名 for Linux 在ubuntu 8.0.4 x86_64系统下的使用</title>
        <link>https://jimway71.github.io/p/%E8%8A%B1%E7%94%9F%E5%A3%B3%E5%8A%A8%E6%80%81%E5%9F%9F%E5%90%8D-for-linux-%E5%9C%A8ubuntu-8.0.4-x86_64%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E4%BD%BF%E7%94%A8/</link>
        <pubDate>Thu, 14 May 2009 21:39:16 +0800</pubDate>
        
        <guid>https://jimway71.github.io/p/%E8%8A%B1%E7%94%9F%E5%A3%B3%E5%8A%A8%E6%80%81%E5%9F%9F%E5%90%8D-for-linux-%E5%9C%A8ubuntu-8.0.4-x86_64%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E4%BD%BF%E7%94%A8/</guid>
        <description>&lt;img src="https://jimway71.github.io/wallpaper/wallpaper-13.jpg" alt="Featured image of post 花生壳动态域名 for Linux 在ubuntu 8.0.4 x86_64系统下的使用" /&gt;&lt;p&gt;一、花生壳for linux安装包里有phlinux-1.1-install.ubuntu.8.04.tar.gz, 是为ubuntu 8.0.4 i386下使用&lt;br&gt;
二、在ubuntu 8.0.4 x86_64下使用, 会报错(无文件错误)&lt;br&gt;
三、分析原因, 是因为在ubuntu x86_64下没有i386的库&lt;br&gt;
解决方法是安装32位的库文件&lt;br&gt;
四、安装方法:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# sudo apt-get install ia32-libs*&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注:&lt;br&gt;
新装系统, 需要更新/etc/apt/sources.list&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# sudo vim /etc/apt/sources.list&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;并做update&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# sudo apt-get update&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;hr&gt;
&lt;p&gt;嗯, 原来就没写完 :)&lt;br&gt;
怪不得这么短&lt;br&gt;
就这样吧&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
