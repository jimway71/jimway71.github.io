<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>编译 on 点滴随记</title>
        <link>https://jimway71.github.io/tags/%E7%BC%96%E8%AF%91/</link>
        <description>Recent content in 编译 on 点滴随记</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Sat, 28 May 2022 20:46:00 +0800</lastBuildDate><atom:link href="https://jimway71.github.io/tags/%E7%BC%96%E8%AF%91/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>为Newifi3编译Padavan</title>
        <link>https://jimway71.github.io/p/%E4%B8%BAnewifi3%E7%BC%96%E8%AF%91padavan/</link>
        <pubDate>Sat, 28 May 2022 20:46:00 +0800</pubDate>
        
        <guid>https://jimway71.github.io/p/%E4%B8%BAnewifi3%E7%BC%96%E8%AF%91padavan/</guid>
        <description>&lt;img src="https://jimway71.github.io/wallpaper/wallpaper-56.png" alt="Featured image of post 为Newifi3编译Padavan" /&gt;&lt;p&gt;注：第一次尝试，采用最简单的方法处理&lt;br&gt;
操作系统: &lt;a class=&#34;link&#34; href=&#34;https://releases.ubuntu.com/18.04/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ubuntu 18.04 LTS&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;第一次尝试编译&#34;&gt;第一次尝试编译&lt;/h2&gt;
&lt;h3 id=&#34;系统准备&#34;&gt;系统准备&lt;/h3&gt;
&lt;h4 id=&#34;操作系统更新&#34;&gt;操作系统更新&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo apt update&lt;br&gt;
$ sudo apt upgrade&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;安装依赖包&#34;&gt;安装依赖包&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo apt install unzip libtool-bin curl cmake gperf gawk flex bison nano xxd \&lt;br&gt;
fakeroot kmod cpio git python3-docutils gettext automake autopoint \&lt;br&gt;
texinfo build-essential help2man pkg-config zlib1g-dev libgmp3-dev \&lt;br&gt;
libmpc-dev libmpfr-dev libncurses5-dev libltdl-dev wget libc-dev-bin&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;编译过程结果-无扩展功能&#34;&gt;编译过程(结果: 无扩展功能)&lt;/h3&gt;
&lt;h4 id=&#34;准备目录&#34;&gt;准备目录&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo mkdir /opt/rt-n56u&lt;br&gt;
$ sudo chmod 0777 /opt/rt-n56u&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;拉取源码&#34;&gt;拉取源码:&lt;/h4&gt;
&lt;p&gt;选择github上的代码&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ git clone --depth=1 &lt;a class=&#34;link&#34; href=&#34;https://github.com/hanwckf/rt-n56u.git&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/hanwckf/rt-n56u.git&lt;/a&gt; /opt/rt-n56u&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;准备toolchain&#34;&gt;准备toolchain&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ cd /opt/rt-n56u/toolchain-mipsel&lt;br&gt;
# 使用脚本下载预编译的工具链：&lt;br&gt;
$ sh dl_toolchain.sh&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;如何有必要编辑配置文件模板&#34;&gt;(如何有必要)编辑配置文件(模板)&lt;/h4&gt;
&lt;p&gt;在/opt/rt-n56u/trunk/configs/templates/目录下&lt;br&gt;
Newifi3的配置文件名为NEWIFI3.config&lt;/p&gt;
&lt;h3 id=&#34;进行编译&#34;&gt;进行编译&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;$ cd /opt/rt-n56u/trunk&lt;br&gt;
# 对于WSL环境，需要使用sudo进行编译，或者使用fakeroot-tcp代替fakeroot&lt;br&gt;
$ sudo ./build_firmware_modify NEWIFI3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;坐等编译完成，时间会比较长，应该跟机器速度强相关。&lt;/p&gt;
&lt;h3 id=&#34;编译完成拷出固件&#34;&gt;编译完成，拷出固件&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;编译好的固件在:&lt;br&gt;
/opt/rt-n56u/trunk/images&lt;/li&gt;
&lt;li&gt;生成的固件为:&lt;br&gt;
NEWIFI3_3.4.3.9-099.trx&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注:&lt;br&gt;
有人提醒: 刷机后为避免各类怪异现象，请到&amp;quot;系统管理&amp;quot;-&amp;gt;&amp;ldquo;配置管理&amp;rdquo;, 重置路由器设置 (NVRAM)和 路由器内部存储 (/etc/storage)进行双清&lt;/p&gt;
&lt;p&gt;Pavadan的第一次编译过程比较顺利，相比而言，Openwrt的编译过程总是状况不断。&lt;br&gt;
好感度+1！&lt;/p&gt;
&lt;p&gt;后记:&lt;br&gt;
用编译后固件刷了NEWIFI3后, 进入后看到的图面如下:&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/2022-05-28_hanwckf_pdv_%e6%97%a0%e7%a7%91%e5%ad%a6%e7%95%8c%e9%9d%a2_%e8%87%aa%e7%bc%96%e8%af%91%e7%89%88%e6%9c%ac.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;完全没有扩展功能，功能不全，无法使用&lt;/strong&gt;。&lt;/p&gt;
&lt;h2 id=&#34;尝试下载已编译好的固件&#34;&gt;尝试下载已编译好的固件&lt;/h2&gt;
&lt;p&gt;好吧，那先找个大概能用的、编译好的固件看下再说&lt;br&gt;
在&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;恩山论坛&lt;/a&gt;上到个帖子，给指到&lt;a class=&#34;link&#34; href=&#34;https://github.com/hiboyhiboy/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;hiboyhiboy&lt;/a&gt;的&lt;a class=&#34;link&#34; href=&#34;https://github.com/hiboyhiboy/opt-script/issues/61&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ss订阅列表问题#61&lt;/a&gt;，里面有指到&lt;a class=&#34;link&#34; href=&#34;https://t.me/s/pdcn1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;hiboyhiboy的固件发布地址&lt;/a&gt;，在这里找到了&lt;a class=&#34;link&#34; href=&#34;https://opt.cn2qq.com/padavan&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;他的固件下载地址&lt;/a&gt;。&lt;br&gt;
下载&lt;a class=&#34;link&#34; href=&#34;https://opt.cn2qq.com/padavan/RT-N56UB1-newifi3D2-512M_3.4.3.9-099.trx&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;RT-N56UB1-newifi3D2-512M_3.4.3.9-099.trx&lt;/a&gt;，并刷入NEWIFI3，进入后的界面是这样的：&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/2022-05-28_hiboy_pdv_%e5%bc%b1%e7%a7%91%e5%ad%a6%e7%95%8c%e9%9d%a2.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;“V2RAY”配置菜单在“扩展功能”-“搭建Web环境”里的第二项，里面界面、配置方式与原来在OP里的完全不同，比较难于入手。&lt;br&gt;
放弃！&lt;/p&gt;
&lt;h2 id=&#34;尝试用可选科学上网插件的代码做编译&#34;&gt;尝试用可选科学上网插件的代码做编译&lt;/h2&gt;
&lt;p&gt;在&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/c31b58728778&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子Padavan固件编译笔记&lt;/a&gt;中发现&lt;a class=&#34;link&#34; href=&#34;https://github.com/chongshengB/rt-n56u&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;chongshengB&lt;/a&gt;的版本可以选择&lt;u&gt;科学上网&lt;/u&gt;插件，看样子有可能可用。&lt;br&gt;
跟着&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/c31b58728778&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子Padavan固件编译笔记&lt;/a&gt;的说明做编译。&lt;br&gt;
注：&lt;br&gt;
在编译过程中报了四次错&lt;/p&gt;
&lt;h3 id=&#34;报错为没有找到7z&#34;&gt;报错为没有找到7z&lt;/h3&gt;
&lt;p&gt;处理：安装7z&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$sudo apt install p7zip-full&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;但是，装完7z后还有报错，如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make[2]: Entering directory &amp;#39;/opt/rt-n56u/trunk/libs/boost&amp;#39;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;( if [ ! -d boost_1_72_0 ]; then \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        7z x -bsp0 boost_1_72_0.7z ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        patch -d boost_1_72_0 -p1 -i ../build.patch; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;fi )  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Error:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Incorrect command line  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;patch: **** Can&amp;#39;t change to directory boost_1_72_0 : No such file or directory  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Makefile:14: recipe for target &amp;#39;extract_test&amp;#39; failed  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make[2]: *** [extract_test] Error 2  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make[2]: Leaving directory &amp;#39;/opt/rt-n56u/trunk/libs/boost&amp;#39;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;查找问题原因&#34;&gt;查找问题原因&lt;/h4&gt;
&lt;p&gt;查找原因，直接执行 7z x -bsp0 boost_1_72_0.7z，报错如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ 7z x -bsp0 /opt/rt-n56u/trunk/libs/boost/boost_1_72_0.7z  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Error:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Incorrect command line  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;显示的错误一致。&lt;br&gt;
如果修改一下，执行 7z x boost_1_72_0.7z&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;/tmp$ 7z x  /opt/rt-n56u/trunk/libs/boost/boost_1_72_0.7z&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;则能正确执行。&lt;br&gt;
通过Google搜索＂7z bsp0 error＂，可以查到一篇＂&lt;a class=&#34;link&#34; href=&#34;https://superuser.com/questions/194659/how-to-disable-the-output-of-7-zip&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;How to disable the output of 7-Zip?&lt;/a&gt;＂，里面有提到&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You can use the -bs command to control where output goes. To stop anything but error output, I would add -bso0 -bsp0.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;即参数-bsp0可以停止除错误输出之外的任何操作，&lt;br&gt;
下一个回复则说到&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is correct, but introduced in 7Zip version 15.01 or after 9.38beta Source: sourceforge.net/p/sevenzip/discussion/45797/thread/8a45fa74 The actual Synology DSM 6.1.x includes 7zip with the version 9.20 and has no such option.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;应该是后来的版本里没有这个选项。&lt;br&gt;
由此可以确定是由于7z版本更新后，不再支持-bsp0选项，而造成的这个错误。&lt;/p&gt;
&lt;h4 id=&#34;解决问题&#34;&gt;解决问题&lt;/h4&gt;
&lt;p&gt;解决方法应该是去掉命令中的-bsp0。&lt;br&gt;
搜索这个命令的位置：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ /opt/rt-n56u/trunk$ grep -r &amp;#39;bsp0 &amp;#39; *  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;libs/boost/Makefile:            7z x -bsp0 $(SRC_NAME).7z ; \  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;那就是在文件/opt/rt-n56u/trunk/libs/boost/Makefile里，打开该文件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ vim /opt/rt-n56u/trunk/libs/boost/Makefile  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SRC_NAME = boost_1_72_0  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;THISDIR = $(shell pwd)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CFLAGS := -O3 -ffunction-sections -fdata-sections  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CXXFLAGS := -O3 -ffunction-sections -fdata-sections  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;LDFLAGS := -Wl,--gc-sections  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Boost_libs := date_time,program_options,system  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;all: extract_test config_test  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ( cd $(SRC_NAME); \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ./b2 -d 0 -j $(HOST_NCPU) toolset=gcc-cross link=static variant=release runtime-link=shared install ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        )  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;extract_test:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ( if [ ! -d $(SRC_NAME) ]; then \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                7z x -bsp0 $(SRC_NAME).7z ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                patch -d $(SRC_NAME) -p1 -i ../build.patch; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        fi )  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;config_test:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ( if [ -f ./config_done ]; then \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                echo &amp;#34;config done&amp;#34;; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        else \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        cd $(SRC_NAME); \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ./bootstrap.sh --with-libraries=$(Boost_libs) --prefix=$(STAGEDIR) ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        echo &amp;#34;using gcc : cross : $(CXX) : &amp;lt;compileflags&amp;gt;\&amp;#34;$(CPUFLAGS)\&amp;#34; &amp;lt;cxxflags&amp;gt;\&amp;#34;$(CXXFLAGS)\&amp;#34; &amp;lt;cflags&amp;gt;\&amp;#34;$(CFLAGS)\&amp;#34; &amp;lt;linkflags&amp;gt;\&amp;#34;$(LDFLAGS)\&amp;#34; ;&amp;#34; &amp;gt;&amp;gt; project-config.jam ; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        touch ../config_done; \  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        fi )  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;clean:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        rm -f config_done  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;romfs:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        cp -fP $(STAGEDIR)/lib/libboost_*.so* $(ROMFSDIR)/lib  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;修改第15行 &amp;quot;                7z x -bsp0 $(SRC_NAME).7z ; &amp;quot;，去掉-bsp0，改为：&lt;br&gt;
&amp;quot;                7z x $(SRC_NAME).7z ; &amp;quot;&lt;br&gt;
&lt;strong&gt;已确认修改完成后该问题解决&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;没有htop-302targz且在试图下载htop-302targz时报错&#34;&gt;没有htop-3.0.2.tar.gz，且在试图下载htop-3.0.2.tar.gz时报错&lt;/h3&gt;
&lt;p&gt;报错内容为：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;HTTP request sent, awaiting response&amp;hellip; 403 Forbidden&lt;br&gt;
2022-05-29 11:09:25 ERROR 403: Forbidden.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;帖子&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/thread-4064867-1-1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;C大源码编译到htop时出错&lt;/a&gt;里描述了相同的错误，并说明了解决方案，如下：&lt;br&gt;
把&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/forum.php?mod=attachment&amp;amp;aid=NDQxMTk5fDY4MDg5ZDU3fDE2NTM4Mzc5MDZ8MHw0MDY0ODY3&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;htop-3.0.2.tar.gz&lt;/a&gt;文件放/opt/rt-n56u/trunk/user/htop下就行了。&lt;br&gt;
&lt;strong&gt;已确认该解决方案可行&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;在编译到trojan时报错&#34;&gt;在编译到trojan时报错&lt;/h3&gt;
&lt;p&gt;报错如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;CMake Error at CMakeLists.txt:1 (cmake_minimum_required):&lt;br&gt;
CMake 3.7.2 or higher is required.  You are running version 3.5.1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;参考&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/u010420283/article/details/117632307&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ubuntu18/16 升级默认apt安装的cmake版本&lt;/a&gt;，从&lt;a class=&#34;link&#34; href=&#34;https://cmake.org/download/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CMakedownload&lt;/a&gt;下载cmake。&lt;br&gt;
当前cmake版本为3.22.4&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;/tmp$ wget &lt;a class=&#34;link&#34; href=&#34;https://github.com/Kitware/CMake/releases/download/v3.22.4/cmake-3.22.4-linux-x86_64.tar.gz&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/Kitware/CMake/releases/download/v3.22.4/cmake-3.22.4-linux-x86_64.tar.gz&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意：上面下载的是linux的&lt;strong&gt;可执行版本&lt;/strong&gt;，而不是源代码包。&lt;br&gt;
解压后，移动到/opt目录下，并做链接(ln)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ tar zxvf cmake-3.22.4-linux-x86_64.tar.gz   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 查看版本号  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ ./cmake-3.22.4-linux-x86_64/bin/cmake --version  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 新建目录  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ sudo mkdir /opt/cmake-3.22.4  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ sudo chmod 0777 /opt/cmake-3.22.4  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 移动  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ mv cmake-3.22.4-linux-x86_64/* /opt/cmake-3.22.4/ -f  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 建立软链接  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ln -sf /opt/cmake-3.22.4/bin/* /usr/bin/  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 再次查看版本  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cmake --version  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;最后编译完成后报错说包太大&#34;&gt;最后编译完成后报错，说包太大&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Padded Kernel Image Size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;1273856 /opt/rt-n56u/trunk/images/zImage.lzma  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Original RootFs Size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;110628938       /opt/rt-n56u/trunk/romfs  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Compressed RootFs Size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;43246464 /opt/rt-n56u/trunk/images/ramdisk  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Padded Kernel Image + Compressed Rootfs Size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;44520320 /opt/rt-n56u/trunk/images/zImage.lzma  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# !!! Please make sure that Padded Kernel Image + Compressed Rootfs size  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# can&amp;#39;t bigger than 32964544 !!!  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#===========================================  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Pack final image and write headers  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# For No padded, need write kernel size in image header   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# to correct mount partition in mtd drivers address  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;img file: /opt/rt-n56u/trunk/images/NEWIFI3_3.4.3.9-099.trx  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;查看images目录，包还是生成了&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/opt/rt-n56u/trunk$ ll images/  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;total 132812  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;drwxr-xr-x  2 root   root       4096 May 30 05:35 ./  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;drwxrwxr-x 14 jimway jimway     4096 May 30 04:59 ../  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r--  1 root   root   44520384 May 30 05:35 NEWIFI3_3.4.3.9-099.trx  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r--  1 root   root   43246464 May 30 05:35 ramdisk  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rwxr-xr-x  1 root   root    3692352 May 30 05:35 zImage*  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r--  1 root   root   44520320 May 30 05:35 zImage.lzma  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;多用了12-13M空间，看下怎么能减下来。&lt;/p&gt;
&lt;h3 id=&#34;修改原老毛子padavan固件编译笔记中的编译操作总结&#34;&gt;修改原老毛子Padavan固件编译笔记中的编译操作总结&lt;/h3&gt;
&lt;p&gt;综上所述，修改原&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/c31b58728778&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子Padavan固件编译笔记&lt;/a&gt;中的编译操作如下：&lt;/p&gt;
&lt;h3 id=&#34;系统准备-1&#34;&gt;系统准备&lt;/h3&gt;
&lt;h4 id=&#34;操作系统更新-1&#34;&gt;操作系统更新&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo apt update&lt;br&gt;
$ sudo apt upgrade&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;安装依赖包-1&#34;&gt;安装依赖包&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$  sudo apt install unzip libtool-bin curl cmake gperf gawk flex bison nano fakeroot cpio git python-docutils gettext automake autopoint texinfo build-essential help2man pkg-config zlib1g-dev libgmp3-dev libmpc-dev libmpfr-dev libncurses5-dev libltdl-dev wget p7zip-full&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;编译过程&#34;&gt;编译过程&lt;/h3&gt;
&lt;h4 id=&#34;准备目录-1&#34;&gt;准备目录&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ sudo mkdir /opt/rt-n56u&lt;br&gt;
$ sudo chmod 0777 /opt/rt-n56u&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;拉取源码-1&#34;&gt;拉取源码:&lt;/h4&gt;
&lt;p&gt;选择github上的代码&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ git clone --depth=1 &lt;a class=&#34;link&#34; href=&#34;https://github.com/chongshengB/rt-n56u.git&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/chongshengB/rt-n56u.git&lt;/a&gt; /opt/rt-n56u&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;准备toolchain-1&#34;&gt;准备toolchain&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ cd /opt/rt-n56u/toolchain-mipsel&lt;br&gt;
# 使用脚本下载预编译的工具链：&lt;br&gt;
$ sh dl_toolchain.sh&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;将前述htop-302targz文件拷贝到optrt-n56utrunkuserhtop目录下&#34;&gt;将前述htop-3.0.2.tar.gz文件拷贝到/opt/rt-n56u/trunk/user/htop目录下&lt;/h4&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/forum.php?mod=attachment&amp;amp;aid=NDQxMTk5fDY4MDg5ZDU3fDE2NTM4Mzc5MDZ8MHw0MDY0ODY3&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;htop-3.0.2.tar.gz文件链接&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ cp htop-3.0.2.tar.gz /opt/rt-n56u/trunk/user/htop&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;修改libsboostmakefile&#34;&gt;修改libs/boost/Makefile&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ vim /opt/rt-n56u/trunk/libs/boost/Makefile&lt;br&gt;
修改第15行”7z x -bsp0 $(SRC_NAME).7z ; \”，改为：&lt;br&gt;
&amp;ldquo;7z x $(SRC_NAME).7z ; &amp;quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;升级cmake版本&#34;&gt;升级cmake版本&lt;/h4&gt;
&lt;p&gt;下载新版本cmake(可执行版本)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;/tmp$ wget &lt;a class=&#34;link&#34; href=&#34;https://github.com/Kitware/CMake/releases/download/v3.22.4/cmake-3.22.4-linux-x86_64.tar.gz&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/Kitware/CMake/releases/download/v3.22.4/cmake-3.22.4-linux-x86_64.tar.gz&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;解压后，移动到/opt目录下，并做链接(ln)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 解压  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ tar zxvf cmake-3.22.4-linux-x86_64.tar.gz   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 新建目录  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ sudo mkdir /opt/cmake-3.22.4  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ sudo chmod 0777 /opt/cmake-3.22.4  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 移动  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/tmp$ mv cmake-3.22.4-linux-x86_64/* /opt/cmake-3.22.4/ -f  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 建立软链接  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ln -sf /opt/cmake-3.22.4/bin/* /usr/bin/  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;查看并修改自定义插件配置文件是optrt-n56utrunkbuild_firmware_modify&#34;&gt;查看并修改自定义插件，配置文件是/opt/rt-n56u/trunk/build_firmware_modify&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;$ vim /opt/rt-n56u/trunk/build_firmware_modify&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;将文件中的插件自定义修改y/n，y是编译，n是不编译。&lt;br&gt;
注意：至少要保留科学上网相关的插件。&lt;/p&gt;
&lt;h4 id=&#34;可选编辑配置文件模板&#34;&gt;(可选)编辑配置文件(模板)&lt;/h4&gt;
&lt;p&gt;在/opt/rt-n56u/trunk/configs/templates/目录下&lt;br&gt;
Newifi3的配置文件名为NEWIFI3.config&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ vim /opt/rt-n56u/trunk/configs/templates/NEWIFI3.config&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;进行编译-1&#34;&gt;进行编译&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cd /opt/rt-n56u/trunk  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 对于WSL环境，需要使用sudo进行编译，或者使用fakeroot-tcp代替fakeroot  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ./build_firmware_modify NEWIFI3  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;坐等编译完成，时间会比较长，大概与机器速度强相关。&lt;/p&gt;
&lt;h3 id=&#34;编译完成拷出固件-1&#34;&gt;编译完成，拷出固件&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;编译好的固件在:&lt;br&gt;
/opt/rt-n56u/trunk/images&lt;/li&gt;
&lt;li&gt;生成的固件为:&lt;br&gt;
NEWIFI3_3.4.3.9-099.trx&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;编译成功，功能较多，尚未测试。(5.30)&lt;/p&gt;
&lt;p&gt;(第一次成功编译后_5.30之前)用编译后固件刷了NEWIFI3后, 进入后看到的图面如下:&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/2022-05-28_chongshengB_pdv_%e7%a7%91%e5%ad%a6%e7%95%8c%e9%9d%a2.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;符合预期!&lt;/p&gt;
&lt;p&gt;又:&lt;br&gt;
经测试，&lt;strong&gt;科学功能不稳定&lt;/strong&gt;！且功能简单，远不如op上的科学功能强大，而且功能远少于op。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;注:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;关于清理代码树并重新开始编译:  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cd /opt/rt-n56u/trunk  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ./clear_tree  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ./build_firmware_modify NEWIFI3  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;再次尝试用可选科学上网插件的代码做编译&#34;&gt;再次尝试用可选科学上网插件的代码做编译&lt;/h2&gt;
&lt;p&gt;又又在网上找了一个版本：&lt;br&gt;
&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/thread-4055964-1-1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;【2021-01-10】NEWIFI3 基于chongshengB源码编译彩虹版主题padavan,更新手机版页面&lt;/a&gt;&lt;br&gt;
下载了其中的&lt;a class=&#34;link&#34; href=&#34;https://wwa.lanzoui.com/iqAick8u2kf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;完整版&lt;/a&gt;(似乎并不是这个)&lt;br&gt;
刷机后如下:&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/2022-05-30_122926_%e7%bd%91%e7%bb%9c%e4%b8%8b%e8%bd%bd%e6%9f%90%e7%89%88%e6%9c%ac_%e8%83%bd%e7%a7%91%e5%ad%a6%e4%b8%8d%e7%a8%b3%e5%ae%9a.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;功能是有了，但是&lt;strong&gt;科学功能依然不稳定&lt;/strong&gt;：开机后长时间不能科学，但睡一觉后．．．．．又能科学了！(还有，出现在本来能科学，改下科学的配置并保存后，居然也不能科学了！这很不科学！)(之后还又不能科学了/_ )&lt;/p&gt;
&lt;h2 id=&#34;再再次尝试&#34;&gt;再再次尝试&lt;/h2&gt;
&lt;p&gt;成功不完全，就是完全不成功！&lt;br&gt;
换：CM520+自制全套OP办科学，NWF3+自制全套PDV做交换+wifi。&lt;br&gt;
2020.5.30记录&lt;/p&gt;
&lt;p&gt;&amp;hellip;当前NWF3+PDV还能凑合用，先用着&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自制&amp;hellip;完成&lt;/li&gt;
&lt;li&gt;CM520+自制测试，NWF3(不刷+不做拨号和DHCP)做WIFI(如失败，NWF3恢复后继续凑合)&lt;br&gt;
如成功&lt;/li&gt;
&lt;li&gt;再刷NWF3&lt;br&gt;
希望最终CM520、NWF3都能独立使用。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2022.6.1记录:&lt;br&gt;
最后还是成功了的(还未上线测), 看图&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/56-pdv-10.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;br&gt;
&lt;img src=&#34;https://jimway71.github.io/img/56-pdv-11.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;参考列表&#34;&gt;参考列表&lt;/h2&gt;
&lt;h3 id=&#34;编译参考&#34;&gt;编译参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/6b8403cdea46&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Padavan固件编译办法&lt;/a&gt;: 
第一次编译时参考&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;源代码列表&#34;&gt;源代码列表&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/hanwckf/rt-n56u&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;hanwckf的Padavan库_Github&lt;/a&gt;:&lt;br&gt;
最先支持了7915无线芯片，也就是支持了wifi6的机型比如CR660x和JCG Q20/Q10 Pro&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/chongshengB/rt-n56u&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;chongshengB的Padavan库_Github&lt;/a&gt;:&lt;br&gt;
在hanwckf的基础上增加修改出了7615/7915对kvr的支持&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/padavanonly/rt-n56u&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;padavanonly的Padavan库 Github&lt;/a&gt;:&lt;br&gt;
具有一些别人没有的插件，使用比较方便&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/immortalwrt/padavan&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;immortalwrt的Padavan库 Github&lt;/a&gt;:&lt;br&gt;
在一些细节上有优化&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/Yuclee/Padavan-Minimal&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Yuclee的Padavan-mini库 Github&lt;/a&gt;:&lt;br&gt;
看样子是个精简版本&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;其他参考&#34;&gt;其他参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.cxymm.net/article/m0_60027682/120075617&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Padavan各源码融合教程_m0_60027682的博客-程序员秘密&lt;/a&gt;:&lt;br&gt;
整合多个源代码的功能&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/cb51fb0fb2ac&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子固件使用说明&lt;/a&gt;:&lt;br&gt;
有初始化说明&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/c31b58728778&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;老毛子Padavan固件编译笔记&lt;/a&gt; &lt;strong&gt;(最终参考)&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/thread-4740979-1-1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;NEWIFI3 D2自编译PADAVAN老毛子固件，基于hanwckf最新源码编译整合常用插件&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.right.com.cn/forum/thread-4064867-1-1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;C大源码编译到htop时出错&lt;/a&gt;:&lt;br&gt;
编译错误处理&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;tbd&#34;&gt;TBD&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;机编op for cm520(全套, 主用v2, 不用无线, 做拨号)&lt;/li&gt;
&lt;li&gt;机编pdv for newifi3, chongshengB版, 全套, 仅用来做无线(5G放149)&lt;/li&gt;
&lt;li&gt;git编pdv for newifi3&lt;br&gt;
看来是完成了的(2022.11.1)&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>WSL下编译LEDE的openwrt, 用于斐讯K2</title>
        <link>https://jimway71.github.io/p/wsl%E4%B8%8B%E7%BC%96%E8%AF%91lede%E7%9A%84openwrt-%E7%94%A8%E4%BA%8E%E6%96%90%E8%AE%AFk2/</link>
        <pubDate>Mon, 01 Jun 2020 01:06:16 +0800</pubDate>
        
        <guid>https://jimway71.github.io/p/wsl%E4%B8%8B%E7%BC%96%E8%AF%91lede%E7%9A%84openwrt-%E7%94%A8%E4%BA%8E%E6%96%90%E8%AE%AFk2/</guid>
        <description>&lt;img src="https://jimway71.github.io/wallpaper/wallpaper-22.jpg" alt="Featured image of post WSL下编译LEDE的openwrt, 用于斐讯K2" /&gt;&lt;p&gt;2020.6.1&lt;/p&gt;
&lt;h3 id=&#34;openwrt编译命令汇总&#34;&gt;Openwrt编译命令汇总:&lt;/h3&gt;
&lt;p&gt;开始编译:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt-get update  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt-get -y install build-essential asciidoc binutils bzip2 gawk gettext git libncurses5-dev libz-dev patch python3.5 python2.7 unzip zlib1g-dev lib32gcc1 libc6-dev-i386 subversion flex uglifyjs git-core gcc-multilib p7zip p7zip-full msmtp libssl-dev texinfo libglib2.0-dev xmlto qemu-utils upx libelf-dev autoconf automake libtool autopoint device-tree-compiler g++-multilib antlr3 gperf wget  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ git clone https://github.com/coolsnowwolf/lede  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; ./lede  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ vim feeds.conf.default  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ ./scripts/feeds update -a  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ ./scripts/feeds install -a  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ make menuconfig  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在make menuconfig中:&lt;br&gt;
选择: MediaTek Ralink MIPS / MT7620 based boards /Phicomm PSG128 rev.Ax&amp;quot;&lt;br&gt;
选择: Luci _ Application _ SSR PLUS&amp;hellip;&amp;quot;&lt;br&gt;
说明: 斐讯K2路由器, CPU型号为MT7620, 芯片架构为MIPS, 路由器型号为PSG1218 rev.Ax; K1 是 PSG1208,K2 是 PSG1218 rev.Ax, K2C是PSG1218 rev.Bx&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Target system -&amp;gt; MediaTek Ralink MIPS  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Subtarget -&amp;gt; MT7620 based boards  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Target Profile -&amp;gt; Phicomm PSG128 rev.Ax  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;继续编译:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ make -j8 download &lt;span class=&#34;nv&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;s  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ make -j15 &lt;span class=&#34;nv&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;s  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;由于空间不够，luci-&amp;gt;application留下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;accesscontrol  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- adbyby-plus  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;arpbind  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;autoreboot  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- ddns  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;firewall  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;flowoffload  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- nlbwmon 流量监控  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ramfree  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ssr_plus + trojan  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;upnp  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;(因为不能保存配置, 再去掉IPV6支持)  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;不知道为什么, 内网的网段(ip)不能成功修改, 每次改过后, 路由就不能保存(或者会丢失)修改的内容: 需要在编译的时候就改掉这个地址。&lt;br&gt;
位于: ./package/base-files/files/bin/config_generate&lt;br&gt;
在make menuconfig完成后修改&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;关于用WSL代替虚拟机运行Ubuntu:&lt;br&gt;
当前WSL上Ubuntu最早版本是18.04LTS(16.04LTS已经没有了)，最新的是20.04LTS&lt;br&gt;
用WSL比较简单, 不用费劲去安装, 但移动虚拟机会很麻烦。这个问题可以参考:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在系统重置或重新安装之前，如何备份（WSL）Windows 10的Linux子系统: &lt;br&gt;
Windows 10 v1903 包含内置的WSL导出/导入命令。具体来说，wsl &amp;ndash;export会产生tar和wsl &amp;ndash;import，并会导入先前导出的tar。然后，您可以在计算机之间移动此文件。 您还可以使用指定stdin / stdout -，这应允许您直接转移到另一台计算机并使用远程shell（如）导入ssh。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;错误处理&#34;&gt;错误处理:&lt;/h3&gt;
&lt;p&gt;1 sudo apt-get install gcc-multilib g++-multilib&lt;br&gt;
原因：type_traits:38:10: fatal error: bits/c++config.h: No such file or directory&lt;br&gt;
参考: &lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/4643197/missing-include-bits-cconfig-h-when-cross-compiling-64-bit-program-on-32-bit&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://stackoverflow.com/questions/4643197/missing-include-bits-cconfig-h-when-cross-compiling-64-bit-program-on-32-bit&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2 sudo apt install qtchooser&lt;br&gt;
原因: File &amp;ldquo;/usr/lib/python2.7/subprocess.py&amp;rdquo;, line 1047, in _execute_child&lt;br&gt;
参考: &lt;a class=&#34;link&#34; href=&#34;https://github.com/kovidgoyal/build-calibre/issues/9&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/kovidgoyal/build-calibre/issues/9&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;编译时长记录&#34;&gt;编译时长记录:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;在Google云主机(e2-standard-8（8 个 vCPU，32 GB 内存), 30GSSD硬盘, Ubuntu 16.04)上完成，最后编译用了7个线程，总共用时不到1小时&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;参考&#34;&gt;参考:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://mianao.info/2020/05/05/%E7%BC%96%E8%AF%91%E6%9B%B4%E6%96%B0OpenWrt-PassWall%E5%92%8CSSR-plus%E6%8F%92%E4%BB%B6&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;编译更新OpenWrt PassWall和SSR-plus插件&lt;/a&gt; From &lt;a class=&#34;link&#34; href=&#34;https://mianao.info/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mianao&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/coolsnowwolf/lede&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Lean 的 Openwrt 源码仓库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
