[{"content":"在Windows系统上安装Python运行环境 Python语言相关 Python官网: https://www.python.org/ Python官网当前最新版本(Python 3.10.6)安装包: https://www.python.org/downloads/release/python-3106/ Python官网安装说明: 在Windows上使用Python Microsoft Store中也提供了Python包, Python官网的说明如下:\nMicrosoft Store 包 is a simple installation of Python that is suitable for running scripts and packages, and using IDLE or other development environments. It requires Windows 10 and above, but can be safely installed without corrupting other programs. It also provides many convenient commands for launching Python and its tools.\n但我使用Microsoft Store安装Python后(应该是Python 3.7), 再安装auto-py-to-exe, 发现auto-py-to-exe不能正常运行, 报错说\u0026quot;不能找到指定目录的Python\u0026quot;, 因此还是需要使用Python官网提供的安装包进行安装。\nPycharm开发环境 PyCharm是一个用于计算机编程的集成开发环境(IDE)，主要用于Python语言开发，由捷克公司JetBrains开发，提供代码分析、图形化调试器，集成测试器、集成版本控制系统，并支持使用Django进行网页开发。\nPyCharm官网: https://www.jetbrains.com/pycharm/ pycharm如何配置python环境 Pycharm 外部工具设置 Qt图形框架模块PySide6 PySide6是来自于Qt for Python项目的官方Python模块，它提供了对完整Qt 6.0+框架的访问。\nPySide6官网: https://pypi.org/project/PySide6/ 关于Qt开发: Qt for Python Deployment 关于选用PySide, 参考: 调查五款Python GUI框架 关于常用编译打包系统的支持情况:\n编译打包工具 auto-py-to-exe Auto PY to EXE是一个基于Eel 和PyInstaller构建的、通过简单的UI界面将python项目中的.py文件(可以是单个py文件或多个py文件)打包为.exe文件的简单工具，与PyInstaller相比，Auto PY to EXE更简单直观，可以自动生成执行转换代码，进而将python程序打包为exe文件。\n官网: https://pypi.org/project/auto-py-to-exe/ 简单说明: 图形化的PyInstaller (PyInstaller手册) 使用参考: python打包教程 easycython easycython.py是一个脚本，它将尝试自动将一个或多个.pyx 文件转换为相应的已编译.pyd|.so的二进制模块。\neasycython.py is a script that will attempt to automatically convert one or more .pyx files into the corresponding compiled .pyd|.so binary modules。\n官网: https://pypi.org/project/easycython/ nuitka编译器 Nuitka是一个Python的替代编译器。 它可以无缝地替代和扩展Python的解释和编译工作。\nNuitka官网: https://nuitka.net/index.html 参考文档: Compare Nuitka VS Pyinstaller 知乎 - Python打包exe的王炸-Nuitka 知乎 - Nuitka之乾坤大挪移-让天下的Python都可以打包 PySide6学习笔记 在Windows系统中使用时:\n需要安装gcc编译器 安装参考: 知乎 - Python打包exe的王炸-Nuitka\n下载MinGW-w64 - for 32 and 64 bit Windows Files中的x86_64-win32-sjlj(当前为GCC-8.1.0版本)\n下载完成后, 解压到选定目录下, 并在系统环境变量PATH中增加gcc.exe(在某目录/bin下)目录。 当然, 还需要安装Nuitka 安装参考: Nuitka Downloads 及 知乎 - Python打包exe的王炸-Nuitka\n使用以下命令进行安装: c:\\\u0026gt; pip install -U \u0026ldquo;https://github.com/Nuitka/Nuitka/archive/develop.zip\"\n# 用上面命令安装后, 编译时会警告, 并提示使用下面的命令(在报错信息及处理中有详细描述)\nc:\\\u0026gt;pip install ordered-set Nuitka\n↑ Nuitka安装界面\r在Windows下常用的编译命令: 注: helloworld代码参考\u0026rdquo;使用PySide6创建Hello World程序\u0026quot;\nc:\\\u0026gt; nuitka --mingw64 --standalone --show-progress --show-memory --enable-plugin=pyside6 --output-dir=r:\\helloworld \\helloworld.py\n使用PySide6框架编写的Python图形界面程序, 使用Nuitka编译后, 独立运行需要的文件有:\n1 2 3 4 5 6 7 8 9 10 编译生成的运行exe文件 pyside6.abi3.dll qt6core.dll qt6gui.dll qt6network.dll qt6svg.dll qt6widgets.dll shiboken6.abi3.dll 完整的PySide6目录 完整的shiboken6目录 在Windows下使用Nuitka编译时遇到的报错信息及处理:\n\u0026ldquo;ordered sets\u0026quot;相关警告信息, 如下:\nNuitka:WARNING: Using very slow fallback for ordered sets, please install \u0026lsquo;orderedset\u0026rsquo; PyPI package for best Python\n相关帖子:\nNuitka can\u0026rsquo;t run on Android termux #1673 处理操作(命令):\nc:\\\u0026gt; pip install ordered-set Nuitka\n关于Python版本的错误信息:\nToo old gcc exe ((8, 1, 0) \u0026lt; (11, 2)) ignored\n(当使用Python3.7时)报错后, 编译操作会停止。\n当改用Python3.10后, 虽然也有报错, 但编译操作会继续: 即使用Python3.10时, 无需处理本错误。\n相关帖子:\nNuitka打包python为.exe时遇到的坑 Nuitka打包python为.exe时遇到的坑 处理操作(命令):\n修改\u0026quot;C:\\Users\\myusr\\venv\\Lib\\site-packages\\nuitka\\build\\SconsCompilerSettings.py\u0026rdquo;,\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 if isGccName(the_cc_name): gcc_version = myDetectVersion(env, compiler_path) # min_version = (11, 2) min_version = (8, 1, 0) if gcc_version is not None and ( gcc_version \u0026lt; min_version or \u0026#34;force-winlibs-gcc\u0026#34; in env.experimental_flags ): scons_logger.info( \u0026#34;Too old gcc %r (%r \u0026lt; %r) ignored!\u0026#34; % (compiler_path, gcc_version, min_version) ) # This also will trigger using it to use our own gcc in branch below. compiler_path = None env[\u0026#34;CC\u0026#34;] = None 关于\u0026quot;libiconv-2.dll\u0026quot;的错误, 信息如下:\n由于找不到libiconv-2.dll，无法继续执行代码\n相关帖子:\n“由于找不到libiconv-2.dll，无法继续执行代码”问题处理 处理操作(命令):\n未处理, 未再现(原因未明)\n\u0026ldquo;WinError\u0026quot;相关错误信息, 如下:\nOSError: [WinError 1] 鍑芥暟涓嶆纭€? \u0026lsquo;R:\\hw\\helloworld.dist\\PySide6\u0026rsquo;\n现象为当用Nuitka编译的程序位于ImDisk虚拟盘上时, 运行该程序会报上述错误。\n相关帖子:\nOSError: [WinError 1] Incorrect function Issue under MSYS2 on Windows when using ImDisk RAM disk #7295 分析原因:\n根据Issue under MSYS2 on Windows when using ImDisk RAM disk #7295分析, 估计是Python有些版本有这个问题。\n处理操作:\n改用最新版本Python(当前为3.10.6)后, 未再出现这个问题。\n在Windows下安装Python运行环境的完整安装过程(在sandbox上再操作了一遍) 在Windows系统上安装Python 下载当前最新的3.10版本, 选择Windows installer (64-bit)进行安装, 安装目录选择缺省目录, 安装最后选择\u0026quot;disable path length limit\u0026rdquo;。\n安装完成后, 需要在系统环境变量path中增加python和python下scripts目录:\n在Windows搜索框中，键入\u0026quot;高级系统设置\u0026quot;，打开高级系统设置窗口; 按下\u0026quot;环境变量\u0026quot;按钮，在打开的窗口中可以在\u0026quot;系统变量\u0026quot;框中选择Path，按\u0026quot;编辑\u0026quot;按钮; 在(path环境变量)其中添加Python执行文件的目录, 在我的系统中, python.exe位于\u0026quot;C:\\Users\\WDAGUtilityAccount\\AppData\\Local\\Programs\\Python\\Python310\u0026quot;目录下; 并在(path环境变量)其中添加该目录下的scripts目录, 即\u0026quot;C:\\Users\\WDAGUtilityAccount\\AppData\\Local\\Programs\\Python\\Python310\\Scripts\u0026quot;目录 - pip等工具安装在这个目录。\n设置完成后, 就可以在命令行中执行python/pip等命令。 在Windows系统上安装Pycharm 从Download PyCharm下载Windows+Community版本。\n当前版本为Pycharm-Community-2022.2.1。\n安装使用的是当前可下载的Pycharm-Community-2022.2.1版本。\n安装后的目录可以当绿色版本直接使用。\n安装完成后, 需要做以下配置:\n配置外观\n在设置-\u0026gt;外观与行为-\u0026gt;外观里, 将主题改为\u0026quot;Windows 10 Light\u0026quot;方案。 配置中文环境, 参考Pycharm 简单一步设置成官方中文版\n曾遇到的问题:\n在使用Pycharm-Community-2019.2版本(旧版)(原来下载的版本)的安装中, 在Plugins-\u0026gt;Marketplace库中找不到\u0026quot;Chinese ​(Simplified)​ Language Pack / 中文语言包\u0026quot;;\n手动从JetBrains官方插件网站下载的Chinese ​(Simplified)​ Language Pack / 中文语言包 For \u0026ldquo;Pycharm Community\u0026quot;插件, 在安装时报\u0026quot;不兼容\u0026quot;错误, 如下:\n改用当前最新版本2022.2.1后问题解决。 配置Python环境, 参考pycharm如何配置python环境\n实际上, 在安装后, Pycharm的配置里已自动加入了Python解释器, 包括pip/setuptools/wheel。 在Windows系统上安装PySide6 可以在\u0026quot;Window命令提示符\u0026quot;里安装PySide6, 也可以在PyCharm的\u0026quot;终端\u0026quot;里操作(建议), 命令很简单, 如下:\npip3 install PySide6\n安装后, 在Python目录下的\u0026quot;Lib\\site-packages\\PySide6\u0026quot;目录中可以看到PySide6相关文件, 其中designer.exe可以直接运行(如果运行时报缺dll库错误, 只需要将所指dll文件拷到Pyside6目录下即可)\n在Pycharm中设置外部工具: Pyside6-Designer和Pyside6-UIC\n参考: 知乎 - Pycharm安装配置Pyside6\n问题:\n本次安装后, 在Pycharm中试着运行Helloworld.py(需要PySide6支持)时, 报\u0026quot;ModuleNotFoundError: No module named \u0026lsquo;PySide6\u0026rsquo;\u0026ldquo;错误。\n本问题未确认原因, 也未找到解决方法。 在Windows系统上安装Nuitka 安装gcc编译器\n安装参考: 知乎 - Python打包exe的王炸-Nuitka\n下载MinGW-w64 - for 32 and 64 bit Windows Files中的x86_64-win32-sjlj(当前为GCC-8.1.0版本)\n下载完成后, 解压到选定目录下, 并在系统环境变量PATH中增加gcc.exe(在某目录/bin下)目录。 完成后, 可以在cmd中使用以下命令以检查安装是否正常 c:\\\u0026gt; gcc --version\n安装Nuitka\n安装参考: Nuitka Downloads 及 知乎 - Python打包exe的王炸-Nuitka\n使用以下命令进行安装: c:\\\u0026gt; pip install -U \u0026ldquo;https://github.com/Nuitka/Nuitka/archive/develop.zip\"\n# 用上面命令安装后, 编译时会警告, 并提示使用下面的命令(在报错信息及处理中有详细描述)\nc:\\\u0026gt;pip install ordered-set Nuitka\n安装完成后, 可以使用Nuitka进行编译 Nuitka编译常用参数(From Nuitka 打包常用命令):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 --windows-disable-console #不显示控制台窗口(CMD控制窗口) --windows-icon=ICON_PATH #添加ico --nofollow-imports # 所有的import不编译，交给python3x.dll执行 --follow-import-to=need #need为你需要编译成C/C++的py文件夹命名 --mingw64 #mingw(官方建议编译器) --standalone #独立环境，这是必须的(否则拷给别人无法使用) --output-dir=out #生成文件路径 --show-progress #显示编译的进度，很直观 --show-memory #显示内存的占用 --include-qt-plugins=sensible,styles #打包后PyQt的样式就不会变了 --plugin-enable=qt-plugins #需要加载的PyQt插件 --plugin-enable=tk-inter #打包tkinter模块的刚需 --plugin-enable=numpy #打包numpy,pandas,matplotlib模块的刚需 --plugin-enable=torch #打包pytorch的刚需 --plugin-enable=tensorflow #打包tensorflow的刚需 --windows-uac-admin=Windows #用户可以使用管理员权限来安装 --onefile #打包成单个exe文件 在Windows下常用的编译命令参考:\n注: helloworld代码参考\u0026rdquo;使用PySide6创建Hello World程序\u0026rdquo;\nc:\u0026gt; nuitka --mingw64 --standalone --windows-disable-console --show-progress --show-memory --enable-plugin=pyside6 --output-dir=x:\\helloworld\\ helloworld.py\n在Windows下编译使用Designer创建的UI程序\n参考:\nPySide6使用Qt Designer创建的UI PyQt5学习笔记05\u0026mdash;-Qt Designer信号槽 创建程序及编译:\n用Qt Designer生成了login.ui\n用pyside6-uic将login.ui转换生成ui_login.py\nc:\u0026gt; pyside6-uic.exe login.ui -o ui_login.py\n用nuitka编译生成可执行文件(.exe)\nc:\u0026gt; dir\n2022/09/05 23:26 \u0026lt;DIR\u0026gt; .\n2022/09/05 23:26 \u0026lt;DIR\u0026gt; ..\n2022/09/05 23:26 588 login.py\n2022/09/05 23:23 2,378 login.ui\n2022/09/05 23:24 2,581 ui_login.py\nc:\u0026gt; nuitka --mingw64 --standalone --windows-disable-console --show-progress --show-memory --enable-plugin=pyside6 --output-dir=x:\\login\\ login.py\n关于独立运行的依赖文件:\n使用Nuitka编译的基于PySide6的图形界面程序(helloworld.exe), 独立运行时至少需要以下文件:\n1 2 3 4 5 6 7 8 9 10 生成的运行exe文件 pyside6.abi3.dll qt6core.dll qt6gui.dll qt6network.dll qt6svg.dll qt6widgets.dll shiboken6.abi3.dll 完整的PySide6目录 完整的shiboken6目录 注: 以上文件列表, 在不同的机器上, 可能会不一样!\n在编译过程中如果遇到异常, 可以参考\u0026rdquo;nuitka编译器\u0026ldquo;后面所列的报错信息及处理。\n","date":"2022-08-30T11:53:00+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-28.jpg","permalink":"https://jimway71.github.io/p/%E5%AE%89%E8%A3%85python%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/","title":"安装Python运行环境"},{"content":"五款Python GUI框架:\n来源: 知乎: 2022- 值得推荐的五款Python GUI框架\nPyQt5/6 PySide6 wxPython Tkinter PySimpleGUI 列表如下: 框架名 来源 许可 易用性 功能性 文档丰富性 特点 教程 界面开发工具 PyQt5 PyQt5 GPL v3 ** ***** ***** Qt Designer PyQt6 PyQt6 GPL v3 ** ***** ***** 需Python3.6.1以上版本; 网络授权支持的在LGPL下授权(来源: PyQt5和PyQt6之间的区别之\u0026quot;许可证变更\u0026quot;) Qt Designer PySide6 PySide6 LGPL ** ***** **** 最初由Nokia官方推出; 对标PyQt6; 以调用动态链接库的形式使用Qt时, 可以任何形式发布程序(含商业、非商业、开源、非开源) PySide6详细中文教程 Qt Designer wxPython wxPython] wxWindows Library Licence] *** *** *** wxPyWiki wxFormbuilder, boa-constructor 2007年停更, wxGlade 2021停更 Tkinter Tkinter PSF-2.0 ***** ** ***** 简单无依赖 Python GUI编程(Tkinter), Tkinter course PAGE, visualtk-在线可用 PySimpleGUI PySimpleGUI LGPL3 **** **** *** 基于Tkinter、Remi、wxpython、PyQt模块; 可以输入相应的代码将其转变网页形式展示，而其余包则都是用来做图形界面的 PySimpleGUI Cookbook SimpleGUIBuilder 2021停更 参考:\nCan I make a program in Qt Designer under the open-source license, and then buy a license so that I can sell my program? Which tool is the best for gui designer(哪个工具最适合 gui 设计师)？ ","date":"2022-08-19T12:00:00+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-20.jpg","permalink":"https://jimway71.github.io/p/%E8%B0%83%E6%9F%A5%E4%BA%94%E6%AC%BEpython-gui%E6%A1%86%E6%9E%B6/","title":"调查五款Python GUI框架"},{"content":"OpenWrt: Openwrt通用固件make menuconfig配置:\n2018-03-14 12:10:35 发布\n内容: OpenWrt的make menuconfig详细配置\n包括: Target System \u0026mdash;\u0026gt;\nTarget Profile \u0026mdash;\u0026gt;\nLuCI \u0026mdash;\u0026gt; Collections\nLuCI \u0026mdash;\u0026gt; Applications\nKernel modules \u0026mdash;\u0026gt; Block Device\nKernelmodules \u0026mdash;\u0026gt; Filesystems\n(Utilities \u0026mdash;\u0026gt;Filesystem)\nKernel modules \u0026mdash;\u0026gt; Native Language Support\nKernel modules \u0026mdash;\u0026gt; Other modules\nBase system \u0026mdash;\u0026gt;\nKernel modules \u0026mdash;\u0026gt; USB Support\nNetwork \u0026mdash;\u0026gt;\nKernel modules \u0026mdash;\u0026gt; Video Support\nMultimedia \u0026mdash;\u0026gt;\nLibraries \u0026mdash;\u0026gt;\nUtilities \u0026mdash;\u0026gt;\nKernel modules \u0026mdash;\u0026gt;Wireless Drivers\nUtilities \u0026mdash;\u0026gt; Compression\nUtilities \u0026mdash;\u0026gt; Filesystem\nUtilities \u0026mdash;\u0026gt; disc\nUtilities \u0026ndash;\u0026gt;\nNetwork\u0026ndash;\u0026gt; wireless\nNetwork\u0026ndash;\u0026gt; VPN\n。\nOpenWRT 软件包中文对照说明:\nhttp://www.wbini.com/id-12.html\n拒绝DNS污染和UDP干扰，在Openwrt路由器上部署DNSCrypt，加密查询DNS 电视盒子 打造最强华为海思hi3798mv100/200/300机顶盒NAS服务器系统 hi3798可适配机型维护参考 - From 海思机顶盒NAS社区 视频播放相关 plyr\nplyr Github\nplyr 一款简单易用，可定制化的Html5的音视频播放器\n特性:\nHTML视频和音频\n无障碍-完全支持VTT字幕和屏幕阅读器\n可自定义-使用所需的标记让播放器可定制化\n干净的HTML-使用原生的元素。\n表示音量，\n自适应-适用于任何屏幕尺寸\n流媒体-支持hls.js，Shaka和dash.js流媒体播放\nAPI-通过标准化的API切换播放，音量，搜索等\n灵活，所有活动都跨格式标准化\n全屏-支持本机全屏并回退到“全屏”模式\n⌨️ 快捷键-支持键盘快捷键\n画中画-支持画中画模式\nPlaysinline-支持playsinline属性\n速度控制-即时调整速度\n多个字幕-支持多个字幕轨道\ni18n支持-支持控件国际化\n预览缩略图-支持显示预览缩略图\n没有框架-用“原生” ES6 JavaScript编写，不需要jQuery\n♀️ SASS-包含在您的构建过程中\nWindows 10 - 播放到设备(play to Devices)\n执行程序名: wmpdmc.exe\nWMPDMC.exe是一个可执行文件，它是Microsoft Corporation开发的Windows Media Player 11程序的一部分。该软件的大小通常约为8.24 MB\n这个\u0026quot;播放到设备\u0026quot;功能，是本地视频DLNA投屏功能, 通过此功能可以把视频播放到电视机上，在电视机的大屏幕上播放。\n网络 SSLH：让 HTTPS、SSH 共享端口\n考虑的缘由:\n· 公网上服务器使用ssh通用端口22/tcp总会招来很多测试攻击;\n· 而如果使用非22/tcp端口, 则(应该是)会被当做非正常访问, 而被GFW攻击而出现异常中断 处理的方式:\n· 使用VNC方式访问, 缺点是操作相对复杂。\n· 让ssh共用已开放的http(或https)端口, 设置上可能麻烦点, 但使用方便。\n解决方案参考:\n· SSLH：让 HTTPS 和 SSH 共享同一个端口\n可以在虚拟机上测试, 并可以同时测试x-ui 支持多协议多用户的 xray 面板 系统性能测试(对比) sysbench and (CPUs)result - OpenBenchMarking HuGo相关 (freecodecamp)从WordPress到Hugo — 我如何迁移250多个页面的网站和我使用的脚本: From WordPress to Hugo – How I Migrated a 250+ Page Site and the Scripts I Used 临时链接(s) 知乎: Pycharm安装配置Pyside6\nPySide6详细中文教程\n两种将python打包成exe的方式讲解 - 含auto-py-to-exe\nPyCharm中配置PySide2的图文教程\nACode Time\nPython \u0026amp; Pyside **PySide程序的国际化\n","date":"2022-08-15T23:33:00+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-19.jpg","permalink":"https://jimway71.github.io/p/%E4%B8%B4%E6%97%B6%E8%AE%B0%E5%BD%95/","title":"临时记录"},{"content":"其他Q\u0026amp;A相关链接:\nQ\u0026amp;A Docker相关 Docker容器无法访问网络 Wordpress Q\u0026amp;A \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;- Windows系统下的问题 \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-\n问题:\nPyCharm启动报错。\n现象: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 Internal error. Please refer to https://jb.gg/ide/critical-startup-errors com.intellij.ide.plugins.StartupAbortedException: Cannot start app at com.intellij.idea.StartupUtil.lambda$start$15(StartupUtil.java:263) at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986) at java.base/java.util.concurrent.CompletableFuture.uniExceptionallyStage(CompletableFuture.java:1004) at java.base/java.util.concurrent.CompletableFuture.exceptionally(CompletableFuture.java:2307) at com.intellij.idea.StartupUtil.start(StartupUtil.java:262) at com.intellij.idea.Main.bootstrap(Main.java:118) at com.intellij.idea.Main.main(Main.java:79) Caused by: java.net.BindException: Address already in use: bind at java.base/sun.nio.ch.Net.bind0(Native Method) at java.base/sun.nio.ch.Net.bind(Net.java:459) at java.base/sun.nio.ch.Net.bind(Net.java:448) at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:227) at io.netty.channel.socket.nio.NioServerSocketChannel.doBind(NioServerSocketChannel.java:134) at io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:562) at io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1334) at io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:506) at io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:491) at io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:973) at io.netty.channel.AbstractChannel.bind(AbstractChannel.java:260) at io.netty.bootstrap.AbstractBootstrap$2.run(AbstractBootstrap.java:356) at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164) at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469) at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:503) at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986) at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) at java.base/java.lang.Thread.run(Thread.java:829) ----- Your JRE: 11.0.15+10-b2043.56 amd64 (JetBrains s.r.o.) D:\\Green Files\\JetBrains\\PyCharm Community Edition\\jbr 猜测: 可能与Hyper-v启动的op系统有关。\n\\jimway\u0026gt;netsh int ipv4 set dynamic tcp start=49152 num=16384\n相关资料:\n● 知乎: intellij pycharm启动报错Address already in use: bind\n● Critical Internal Error on Startup of IntelliJ IDEA: \u0026ldquo;Cannot Lock System Folders\u0026rdquo;\n●Unable to bind ports: Docker-for-Windows \u0026amp; Hyper-V excluding but not using important port ranges #3171\n● The default dynamic port range for TCP/IP has changed since Windows Vista and in Windows Server 2008\n● Pycharm 2020.3 - Internal Error - java.net.BindException: Address already in use: bind - Windows 10\n原因:\n根据\u0026quot;Pycharm 2020.3 - Internal Error - java.net.BindException: Address already in use: bind - Windows 10\u0026ldquo;中的说法:\nTo lock folders IDE is starting a server on localhost, it tries to bind on the first available port between 6942 and 6991, this exception is thrown if IDE was not able to bind on any of the ports in this range.\nPyCharm启动时, 需要从tcp端口6942到6991中找到一个可用的端口, 如果找不到, 就会报这个错误。\n常用cmd命令:\n查看ipv4 TCP的动态端口范围: 1 2 3 4 5 6 c:\\\u0026gt; netsh int ipv4 show dynamicport tcp 协议 tcp 动态端口范围 --------------------------------- 启动端口 : 49152 端口数 : 16384 查看ipv6 TCP的动态端口范围: 1 2 3 4 5 6 c:\\\u0026gt; netsh int ipv6 show dynamicport tcp 协议 tcp 动态端口范围 --------------------------------- 启动端口 : 49152 端口数 : 16384 查看ipv4 tcp保留端口: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 c:\\\u0026gt; netsh int ipv4 show excludedportrange protocol=tcp 协议 tcp 端口排除范围 开始端口 结束端口 ---------- -------- 2869 2869 5357 5357 10243 10243 50000 50059 * 53994 54093 54094 54193 54194 54293 54396 54495 54496 54595 54596 54695 * - 管理的端口排除。 查看ipv6 tcp保留端口: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 c:\\\u0026gt; netsh int ipv6 show excludedportrange protocol=tcp 协议 tcp 端口排除范围 开始端口 结束端口 ---------- -------- 2869 2869 5357 5357 10243 10243 50000 50059 * 53994 54093 54094 54193 54194 54293 54396 54495 54496 54595 54596 54695 * - 管理的端口排除。 解决方法:\n只要确保tcp端口6942到6991不在上述tcp动态端口范围, 也不在上述tcp保留端口范围, 就应该没问题\n参考\u0026rdquo;Unable to bind ports: Docker-for-Windows \u0026amp; Hyper-V excluding but not using important port ranges #3171\u0026ldquo;的操作：\n以管理员身份运行\u0026lsquo;命令提示符\u0026rsquo;(netsh的set命令需要管理员权限), 运行:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 c:\\\u0026gt; netsh int ipv4 set dynamic tcp start=49152 num=16384 确定。 c:\\\u0026gt; netsh int ipv4 show dynamicport tcp 协议 tcp 动态端口范围 --------------------------------- 启动端口 : 49152 端口数 : 16384 c:\\\u0026gt; netsh int ipv4 show excludedportrange protocol=tcp 协议 tcp 端口排除范围 开始端口 结束端口 ---------- -------- 2869 2869 5357 5357 10243 10243 50000 50059 * 53994 54093 54094 54193 54194 54293 54396 54495 54496 54595 54596 54695 * - 管理的端口排除。 操作完成后需要重启, 重启后PyCharm可以正常启动。\n记录:\n其实也不知道哪条命令起的作用:\n● 先停了Hyper-V中的全部虚拟机\n● 把tcp动态端口范围调整到25192-300, 重启后, PyCharm就可以正常启动了;\n● 再把tcp动态端口范围调整到20000-20000, 重启, PyCharm启动也没问题;\n● 最后, 把tcp动态端口范围调整回到49152-16384, 启动Hyper-V中全部虚拟机, PyCharm的启动依然正常。\n反正一通操作后, 一切回归正常, 而tcp的端口配置也应该没有改变。 - 不清楚怎么好的!\n\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;- Windows系统下的问题 \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-\n\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;- Linux系统下的问题 \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-\n\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;- Linux系统下的问题 \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-\n\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;- Hugo服务器相关问题 \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-\n问题:\nHugo服务器并未支持html标签。\n现象:\n在Hugo+theme-stack上, 发现html标签并未生效。 例如: 下划线标记未生效 1 \u0026lt;u\u0026gt;下划线\u0026lt;/u\u0026gt; 显示为(如果正常显示, 说明已正确设置):\n下划线\n查看网页源代码显示为:\n1 2 3 \u0026lt;blockquote\u0026gt; \u0026lt;p\u0026gt;\u0026lt;!-- raw HTML omitted --\u0026gt;下划线\u0026lt;!-- raw HTML omitted --\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/blockquote\u0026gt; 解决方式:\n修改config.yaml, 修改相关部分内容如下:\n1 2 3 4 5 markup: goldmark: renderer: ## Set to true if you have HTML content inside Markdown unsafe: true config.yaml这部分说明中, \u0026lsquo;## Set to true if you have HTML content inside Markdown\u0026rsquo;, 已经说明需要设置unsafe为true, 以使html标签生效\n参考:\n● Hugo shortcode ignored saying \u0026ldquo;raw HTML omitted\u0026rdquo; ☜ ✌\n● Hugo的shortcode(支持视频等)和主题修改Li.027\n● Hugo 详细笔记（建站教程、工作原理）-模板\n\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;- Hugo服务器相关问题 \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-\n","date":"2022-08-15T16:22:00+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-18.jpg","permalink":"https://jimway71.github.io/p/%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB%E8%AE%B0%E5%BD%95/","title":"各种问题汇总记录"},{"content":"常用链接 Markdown 中文文档 Hugo 主题 Stack 工具链接 启动BFL-LS-WVL opensubtitles Markdown在Hugo+Stack主题上的使用 多级(3级)下的引用, 参考在Openwrt上建立Docker环境 二级下的引用 111 222\n222-1 This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\u0026gt;=Go 1.18版本的go\n=Go 1.18版本的go\n222-2 333 Code:\n1 2 3 4 5 6 7 8 9 10 11 * 111 * 222 222-1 \u0026gt; This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. \\\u0026gt;=Go 1.18版本的go \u0026gt;=Go 1.18版本的go \u0026gt; 222-2 * 333 或:\n111 222\n222-1 This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\u0026gt;=Go 1.18版本的go\n=Go 1.18版本的go\n222-2 333 Code:\n1 2 3 4 5 6 7 8 9 10 11 * 111 * 222 222-1 \u0026gt; This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, \u0026gt; consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. \u0026gt; Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. \u0026gt; \\\u0026gt;=Go 1.18版本的go \u0026gt; \u0026gt;=Go 1.18版本的go \u0026gt; 222-2 * 333 硬回车 111\n222\n333\n444\n555\nCode:\n1 2 3 4 5 6 7 8 9 10 11 12 111 \u0026lt;br /\u0026gt; \u0026lt;br /\u0026gt; 222 \u0026lt;br /\u0026gt; 333 \u0026lt;br /\u0026gt; 444 555 默认链接 I get 10 times more traffic from Google than from Yahoo or MSN.\nCode:\n1 2 3 4 5 6 I get 10 times more traffic from [Google][] than from [Yahoo][] or [MSN][]. [google]: http://google.com/ \u0026#34;Google Here\u0026#34; [yahoo]: http://search.yahoo.com/ \u0026#34;Yahoo Here\u0026#34; [msn]: http://search.msn.com/ \u0026#34;MSN Here\u0026#34; 单双重音符号的不同 There is a literal backtick () here.`\nCode:\n1 `There is a literal backtick (`) here.` There is a literal backtick (`) here. Code:\n1 ``There is a literal backtick (`) here.`` 五级标题和六级标题会导致[stack主题][]的\u0026quot;暗色模式\u0026quot;失效。 以下语句会导致[stack主题][]的\u0026quot;暗色模式\u0026quot;失效:\n1 2 3 4 ###### This is an H6 ##### This is an H5 即五级标题 和 六级标题 - 会导致stack主题的\u0026#34;暗色模式\u0026#34;失效。 原因并不清楚, 避免使用即可。 ","date":"2022-08-13T00:00:00Z","image":"https://jimway71.github.io/wallpaper/wallpaper-10.jpg","permalink":"https://jimway71.github.io/p/markdownhtml-on-hugo-with-theme-stack/","title":"Markdown\u0026Html On Hugo With theme Stack"},{"content":"常用链接 Markdown 中文文档 Hugo 主题 Stack 工具链接 启动BFL-LS-WVL opensubtitles 练习确定区 多级(3级)下的引用, 参考在Openwrt上建立Docker环境 二级下的引用 111 222\n222-1 This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\u0026gt;=Go 1.18版本的go\n=Go 1.18版本的go\n222-2 333 Code:\n1 2 3 4 5 6 7 8 9 10 11 * 111 * 222 222-1 \u0026gt; This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. \\\u0026gt;=Go 1.18版本的go \u0026gt;=Go 1.18版本的go \u0026gt; 222-2 * 333 或:\n111 222\n222-1 This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\u0026gt;=Go 1.18版本的go\n=Go 1.18版本的go\n222-2 333 Code:\n1 2 3 4 5 6 7 8 9 10 11 * 111 * 222 222-1 \u0026gt; This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, \u0026gt; consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. \u0026gt; Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. \u0026gt; \\\u0026gt;=Go 1.18版本的go \u0026gt; \u0026gt;=Go 1.18版本的go \u0026gt; 222-2 * 333 硬回车 111\n222\n333\n444\n555\nCode:\n1 2 3 4 5 6 7 8 9 10 11 12 111 \u0026lt;br /\u0026gt; \u0026lt;br /\u0026gt; 222 \u0026lt;br /\u0026gt; 333 \u0026lt;br /\u0026gt; 444 555 默认链接 I get 10 times more traffic from Google than from Yahoo or MSN.\nCode:\n1 2 3 4 5 6 I get 10 times more traffic from [Google][] than from [Yahoo][] or [MSN][]. [google]: http://google.com/ \u0026#34;Google Here\u0026#34; [yahoo]: http://search.yahoo.com/ \u0026#34;Yahoo Here\u0026#34; [msn]: http://search.msn.com/ \u0026#34;MSN Here\u0026#34; 单双重音符号的不同 There is a literal backtick () here.`\nCode:\n1 `There is a literal backtick (`) here.` There is a literal backtick (`) here.\nCode:\n1 ``There is a literal backtick (`) here.`` 练习区 下划线文本\n111\nThis is a regular paragraph.\n你好 Foo This is another regular paragraph.\nhttp://images.google.com/images?num=30\u0026q=larry+bird\nhttp://images.google.com/images?num=30\u0026amp;q=larry+bird\n©\n©\nAT\u0026amp;T\nAT\u0026amp;T\n4 \u0026lt; 5\n4 \u0026lt; 5\n111\n222\n333\n444\nThis is an H1 This is an H2 This is an H1 This is an H2 1 2 3 4 5 以下语句会导致\u0026#34;暗色模式\u0026#34;失效: ###### This is an H6 ##### This is an H5 即五级标题 和 六级标题。 原因并不清楚, 避免使用即可。 This is an H1 This is an H2 This is an H3 This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\nDonec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse id sem consectetuer libero luctus adipiscing.\nThis is the first level of quoting.\nThis is nested blockquote.\nBack to the first level.\n000\n下面这个方式可以用哦!\n111\n222\n222-1 This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n222-2 This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n222-3 1 2 consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. 222-4 333 111\n222\n222-1 This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n222-2 333 This is the first level of quoting.\nThis is nested blockquote.\nBack to the first level.\nThis is a header. This is the first list item. This is the second list item. Here\u0026rsquo;s some example code:\nreturn shell_exec(\u0026quot;echo $input | $markdown_script\u0026quot;);\rThis is a header. This is the first list item. This is the second list item. Here\u0026rsquo;s some example code:\nreturn shell_exec(\u0026quot;echo $input | $markdown_script\u0026quot;);\rThis is a header. This is the first list item. This is the second list item. Here\u0026rsquo;s some example code:\nreturn shell_exec(\u0026quot;echo $input | $markdown_script\u0026quot;);\rdd _ End\nRed Green Blue Red Green Blue Red Green Blue Bird\nMcHale\nParish\nBird\nMcHale\nParish\n1 Bird\rMcHale\rParish\r2 Bird\nMcHale\nParish\nBird\nMcHale\nParish\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\nDonec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse id sem consectetuer libero luctus adipiscing.\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\nDonec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse id sem consectetuer libero luctus adipiscing.\nBird\nMagic\nBird\rMagic\rBird\nMagic\nBird\nMagic\nThis is a list item with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\nVestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. Donec sit amet nisl. Aliquam semper ipsum sit amet velit.\nSuspendisse id sem consectetuer libero luctus adipiscing.\nThis is a list item with two paragraphs.\nThis is the second paragraph in the list item. You\u0026rsquo;re only required to indent the first line. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.\nAnother item in the same list.\nA list item with a blockquote:\nThis is a blockquote inside a list item.\n` 引用 This is a **blockquote**\rinside a list item. ` 引用 This is a **blockquote**\rinside a list item. ddd\nA list item with a code block:\n\u0026lt;code goes here\u0026gt; What a great season. 1986. What a great season.\nThis is a normal paragraph:\nThis is a code block.\rThis is a normal paragraph:\nThis is a code block.\rHere is an example of AppleScript:\ntell application \u0026quot;Foo\u0026quot;\rbeep\rend tell\rHere is an example of AppleScript:\ntell application \"Foo\"\rbeep\rend tell\r\u0026lt;div class=\u0026quot;footer\u0026quot;\u0026gt;\r\u0026amp;copy; 2004 Foo Corporation\r\u0026lt;/div\u0026gt;\r\u0026lt;div class=\"footer\"\u0026gt;\r\u0026amp;copy; 2004 Foo Corporation\r\u0026lt;/div\u0026gt;\rThis is an example inline link.\nThis link has no title attribute.\nThis is an example inline link.\nThis link has no\rtitle attribute.\nSee my About page for details.\nThis is an example reference-style link.\nThis is [an example] id reference-style link.\nI get 10 times more traffic from Google 1 than from Yahoo 2 or MSN 3.\nI get 10 times more traffic from Google than from Yahoo or MSN.\nI get 10 times more traffic from Google than from Yahoo or MSN.\nsingle asterisks\nsingle underscores\ndouble asterisks\ndouble underscores\nunfriggingbelievable\n*this text is surrounded by literal asterisks*\nUse the printf() function.\nThere is a literal backtick () here.`\nThere is a literal backtick (`) here.\nPlease don\u0026rsquo;t use any \u0026lt;blink\u0026gt; tags.\n\u0026amp;#8212; is the decimal-encoded equivalent of \u0026amp;mdash;.\nhttp://example.com/\nhttp://example.com/\naddress@example.com\naddress@example.com\n*literal asterisks*\n1 2 3 4 5 6 7 8 9 10 11 12 \\ backslash ` backtick * asterisk _ underscore {} curly braces [] square brackets () parentheses # hash mark + plus sign - minus sign (hyphen) . dot ! exclamation mark ++文本++\n下划线文本\n下划线文本\ntext-decoration: underline 所添加的需要加下划线的行内文字\n用数学公式： 下划线 $\\underline{X}$ 上划线 $\\overline{X}$\nRow 1, cell 1 Row 1.2, cel 1.2\r\u0026lt;/td\u0026gt;\r\u0026lt;td\u0026gt;Row 1, cell 2\rrow 2.2, cel 2.2\r\u0026lt;/td\u0026gt;\r\u0026lt;/tr\u0026gt;\r\u0026lt;tr\u0026gt;\r\u0026lt;td\u0026gt;Row 1, cell 1 Row 1.2, cel 1.2\r\u0026lt;/td\u0026gt;\r\u0026lt;td\u0026gt;Row 1, cell 2\rrow 2.2, cel 2.2\r\u0026lt;/td\u0026gt;\r\u0026lt;/tr\u0026gt;\rHeade\rr 1\rHeader 2\rrow 1, cell 1\rrow 1, cell 2\rrow 2, cell 1\rrow 2, cell 2\r","date":"2022-08-10T00:00:00Z","image":"https://jimway71.github.io/wallpaper/wallpaper-02.jpg","permalink":"https://jimway71.github.io/p/markdown-hugo%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6/","title":"Markdown+Hugo测试文件"},{"content":"在R3300L(及类似架构设备)等使用S905系列的电视盒子上安装Armbian, 在Armbian系统下可以安装Hugo服务器。\n编译及安装Hugo 选择: Hugo最新版本, +extended, 支持linux/arm64系统\n说明: R3300L的CPU是S905L, Arm架构CPU, 四核A53 有多种方式可以安装Hugo, Armbian提供的apt工具就可以安装Hugo, 但基于Ubuntu传统, 使用这种方式下载的版本较旧, 很多功能并不支持。\n注: 当前Armbian上使用apt可以安装的Hugo版本仅为0.40.1-1, 如下:\n1 2 3 4 5 $ apt search hugo Sorting... Done Full Text Search... Done hugo/bionic 0.40.1-1 arm64 Fast and flexible Static Site Generator written in Go Hugo当前最新Release版本是v0.101.0, 下载地址: Hugo v0.101.0\n但是, Release中仅提供了未+Extended的Linux/Arm64版本, 而缺少扩展功能(Extended), 有些功能或主题就无法使用，因此需要重新编译。\n注意:\n不能使用手机+Termux, 借助手机较强的CPU性能和较高的配置进行编译, 因为编译出来的是For Android/Arm64, 而不是For Linux/Arm64, 因而无法使用。 同理, 在电脑+Linux上做编译也不行。 编译hugo相关参考文档如下:\nBuild from Source on Mac Install Update Hugo Extended for ARM in Ubuntu 编译要求: \u0026gt;=Go 1.18版本的go 最新版本的Hugo源代码包 (实际使用)2.8G的内存(含SWAP分区2G), 估计至少需要1G的内存(含SWAP分区)。\n否则会出现报错, 且运行极长的时间(以十数小时数计), 但是最后还无法成功完成编译。\n编译报错信息为: go build github.com/gohugoio/locales compressed:\n: /usr/local/go/pkg/tool/linux_amd64/compile: signal: killed\n参考: Golang - go build编译项目时出现signal: killed 用SWAP分区’ 解决golang编译项目时出现signal: killed’ /tmp空间需要大于400M, 估计至少应该超过1G: 否则会报错。\n编译报错信息为: * Github.com/bep/golibsass/internal/libsass /tmp/cctAMSUf.s: Assembler messages: /tmp/cctAMSUf.s: Fatal error: can’t write 3916 types to section .debug_loc of $WORK/b490/_x032.o: ‘No space left on device’\n/tmp/cctAMSUf.s: Fatal error: can’t close $WORK/b490/_x032.o: No space left on device\n在运行go build时查看/tmp目录, 确认编译时是使用/tmp做为编译目录, 也基本确认/tmp空间不足会出现错误。 编译操作: 安装(当前)最新稳定版本的go\n参考: 初学GO笔记（1）-Arm64 linux上的安装。\n同样由于Ubuntu传统, 可以用apt直接安装的go包版本仅为1.10.3, 无法用于编译Hugo, 因此改用tar包安装。\ngo包下载列表在go download, 当前最新稳定版本tar包是go1.18.4.linux-arm64.tar.gz:\n# wget https://go.dev/dl/go1.18.4.linux-arm64.tar.gz\n解压下载的go包:\n# tar zxvf go1.18.4.linux-arm64.tar.gz\n移到/usr/local下\n# mv go /usr/local/\n查看go的版本信息:\n# /usr/local/go/bin/go version\ngo version go1.18.4 linux/arm64\n确认go版本没问题后, 开始建立go环境:\n# mkdir /opt/go\n# vim /etc/profile\n在文件末尾增加:\nexport GOROOT=/usr/local/go\nexport GOPATH=/opt/go\nexport PATH=$GOPATH/bin:$GOROOT/bin:$PATH\n重新登录(新登录一回就行)后, 查看环境变量是否生效:\n# echo $PATH\n/opt/go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\n# echo $GOROOT\n/usr/local/go\n# echo $GOPATH\n/opt/go\n确认环境变量已生效!\n修改配置, 改用国内仓库以提高速度:\n# go env -w GOPROXY=https://goproxy.cn,direct\n查看, 并确认已修改成功:\n# go env | grep GOPROXY\nGOPROXY=\u0026ldquo;https://goproxy.cn,direct\u0026rdquo;\n原为: GOPROXY=\u0026quot;https://proxy.golang.org,direct\u0026quot;\n确认Go1.18.4已安装完成\n在R3300L上准备编译Hugo的环境\n准备内存空间, 以配合编译Hugo的内存需求(估计至少大于1G)\n由于R3300L的实际内存仅为805M, 无法满足Hugo编译需要, 因此需要临时增加Swap分区以增加可用内存。\n创建做为swap分区的文件, 命令中创建了一个2G的文件: # dd if=/dev/zero of=/root/swapfile bs=1M count=2048\n格式化为交换分区文件, 建立swap的文件系统: # mkswap /root/swapfile\n启用交换分区(Swap)文件: # swapon /root/swapfile\n查看交换分区状态: # swapon\nNAME TYPE SIZE USED PRIO\n/dev/zram1 partition 400.5M 166.7M 5\n/root/swapfile file 2G 7.6M -2\n注意: 这样的设置方法, 系统重启后不再有效! 增加/tmp目录空间, 以配合编译Hugo的存储空间需求(估计至少也大于1G)\n使用df命令查看空间: # df\nFilesystem 1K-blocks Used Available Use% Mounted on\n…\ntmpfs 410140 8 410132 1% /tmp\n…\n可以看到, /tmp的全部空间是400M, 确认需要临时增加/tmp的空间。 由于/root的空间够用, 因此改为/root下目录做为/tmp:\n新建tmp的目录: # mkdir /root/tmp\n给这个目录设置0777权限(避免有什么权限问题): # chmod 0777 /root/tmp\n把新建的/root/tmp目录bind到/tmp: # mount \u0026ndash;bind /root/tmp /tmp\n再用df命令查看, 已看不到/tmp这一条记录。\n操作方法参考:\n• linux 修改/tmp目录的大小\n• mount \u0026ndash;bind 的妙用\n注: 这样的设置方法, 系统重启后也不再有效 编译Hugo\nHugo源代码包的地址如下:\n• v0.101.0.zip\n或\n• v0.101.0.zip\n解压Hugo源代码tar包:\n# tar zxvf v0.101.0.zip\n进入Hugo目录:\n# cd v0.101.0\n开始编译Hugo, 带extended参数:\n# go build \u0026ndash;tags extended\n编译完成只生成一个文件: hugo\n查看版本:\n# ./hugo version\nhugo v0.101.0+extended linux/amd64 BuildDate=unknown\n注: 在R3300L上两次成功编译Hugo的时长分别是: 24分钟, 3分钟, 很奇怪, 似乎都是这个规律。\n新建hugo目录 新建一个网站(的目录结构):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ sudo mkdir /mnt/hugo $ sudo chown jimway:jimway $ cd /mnt/hugo $ hugo new site blog Congratulations! Your new Hugo site is created in /mnt/hugo/blog. Just a few more steps and you\u0026#39;re ready to go: 1. Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the \u0026#34;hugo new theme \u0026lt;THEMENAME\u0026gt;\u0026#34; command. 2. Perhaps you want to add some content. You can add single files with \u0026#34;hugo new \u0026lt;SECTIONNAME\u0026gt;/\u0026lt;FILENAME\u0026gt;.\u0026lt;FORMAT\u0026gt;\u0026#34;. 3. Start the built-in live server via \u0026#34;hugo server\u0026#34;. 至此, 站点目录已经建立完成。\n选择并下载主题(themes) hugo提供了非常丰富的主题库供下载选用。\n选择了以下几个备用(特点: 简洁):\nBlackburn主题 Diary主题 Fuji主题 Pure主题 docPort主题 下载并安装上述主题(根据相应主题中的安装说明)到blog的themes目录下:\n1 2 3 4 5 6 7 8 9 10 $ git clone https://github.com/yoshiharuyamashita/blackburn.git themes/blackburn $ git clone https://github.com/AmazingRise/hugo-theme-diary.git themes/diary # 注: Diray这个下载是参照blackburn写的, 文档中没有安装说明 $ git init ### 注: 使用git subodule add命令前要在同一目录下调用git init, 否则可能会出现以下错误: ### Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set). $ git submodule add https://github.com/dsrkafuu/hugo-theme-fuji.git themes/fuji ### 注: 这个是使用git submodule add命令 $ git clone https://github.com/jimway71/hugo-theme-pure.git themes/pure $ git submodule add https://github.com/vjeantet/hugo-theme-docport.git themes/hugo-theme-docport Git submodule命令参考文档: Git submodule 知识总结\nthemes分析:\ndocPort主题:\n适合用一个文档做整个网站入口, 即网站入口就是一个文档, 而不是一个页面(分别指向不同文档), 并不适合做普通网站, 比如博客(blog) Pure主题:\n适合做blog: 分左中右三列布局 左/右有文本导航 有标签(tags)/目录(Categories)分类 左侧导航可以添加link链接 左侧有多种配色可选 左上标题、说明均可自定义\n补充: 后面选的Stack主题也满足上述要求 选择主题, 启动hugo 选择Pure主题, Pure相关说明文档:\nPure主题项目文档位于themes\\pure目录下的README.MD(英文)+README-ZH.MD(中文) IconFont图标说明文档位于: demo_fontclass\n相关的icon文件应该是位于themes\\pure\\static\\fonts下的文件, 尤其是iconfont.svg这个文件 写了shell以方便调用:\n1 2 3 4 5 6 $ vim runh hugo server --bind=\u0026#34;0.0.0.0\u0026#34; --baseURL=\u0026#39;http://mnas.otcg.org\u0026#39; --port=8080 -D \u0026amp; $ chmod +x runh $ vim runhugo cd /mnt/hugo/blog; hugo server --bind=\u0026#34;0.0.0.0\u0026#34; --baseURL=\u0026#39;http://mnas.otcg.org\u0026#39; --port=8080 -D \u0026amp; $ chmod +x runhugo 在Linux命令行中调用runhugo/runh可以方便的启动hugo服务器。\n如果需要跟随Armbian系统启动, 把命令加入到/etc/rc.local文件中即可。\n其他 已解决问题: Pure主题的config.yml文件中, menu: -\u0026gt; main:中的图标来源不明(其中每一项的文字前都自动加上了图标)\n说明:\n图标的设置同样在config.yml文件中, 在menuIcons:后进行设置, 与menu-\u0026gt;link-\u0026gt;name对应, 格式如下: name: [这里有个空格]icon-name\n上述icon-name查demo_fontclass中的英文名称 Stack主题在左边导航链接添加Home(主页)的问题:\n如果按ExampleSite中的做法, 在\\content\\page里+home目录和md文件配置(仿照已有文件), md文件里title的名字应该写\u0026quot;主页\u0026quot;;\n但这样配置后, 当使用浏览器访问网站主页时, 网站主页的名称(在浏览器左上角显示的网站名称)就会变成\u0026quot;主页\u0026quot;, 而不是原来在hugo配置文件config.yaml配置里的title名称。\n处理:\n修改hugo配置文件config.yaml, 在menu:main:中增加Home, 适当配置weight(相当于相对位置的值), 可以得到期望的效果。\n修改配置文件blog/config.yaml, 如下: 1 2 3 4 5 6 7 8 menu: main: - identifier: Home name: 主页 url: / params: icon: home weight: -50 Stack主题调整左侧导航栏文字及图标(icon)的颜色问题。\n说明: hugo主题配置中, themes下的配置信息会被网站根目录下相应的配置信息所替代,\n如blog\\themes\\hugo-theme-stack\\assets\\scss\\中的配置信息, 可以被blog\\assets\\sccs\\下的配置替代。\n这样, 修改配置时, 不需要修改themes目录下的主题原始配置文件, 而是仅在网站目录下进行修改, 而且只设置需要修改的字段即可 - 简单、方便, 且便于代码管理。\n左侧导航栏文字原配置的颜色太浅, 需要修改。\n修改方法: 增加目录blog\\assets\\sccs, 并将原blog\\themes\\hugo-theme-stack\\assets\\scss\\custom.scss文件(基本是个空文件, 用于用户自定义的配置)拷贝到该目录下, 在该custome.scss中添加如下配置: 1 2 3 4 :root { --body-text-color: rgba(0, 0, 0, 0.9); } # 修改后, 会看到导航栏文字颜色变得更深一些的效果。(最后一位数字大概就是颜色深度, 越大颜色越深 - 最大值是1) 1 2 3 4 5 6 最开始的操作(错误重现): 上述新的custome.scss文件中body-text-color被设置为bababa，像这样: :root { --body-text-color: bababa; } 修改完成后, 左侧导航栏文字明显变深, 但是, 导航栏上方Social栏中的图标变得完全不可见。 五级标题和六级标题会导致stack主题的\u0026quot;暗色模式\u0026quot;失效。\n以下语句会导致stack主题的\u0026quot;暗色模式\u0026quot;失效: 1 2 3 4 ###### This is an H6 ##### This is an H5 即五级标题 和 六级标题 - 会导致stack主题的\u0026#34;暗色模式\u0026#34;失效。 原因并不清楚, 避免使用即可。 修改导航栏的About链接:\n加几张壁纸图就行了~~~\nPure主题的代码框实在太难看了!(好了, 现在已经改用Stack主题了)\n在Google上搜\u0026quot;markdown 写出 代码框 行数 复制 背景色 hugo theme\u0026quot;, 搜到的风月可能可以参考。\n备选的主题有:\nBlackburn主题?\n[BlackBure主题][]的代码框好看多了, \u0026hellip; 但是, [BlackBure主题][]不符合其他的要求。 Diary主题?\nDiary的Demo网站看着还可以吧, 但感觉好像还是差点什么? Clarity主题? Clarity的Demo网站感觉有点乱\u0026hellip;\n可能还行吧? 看到一个Blog叫风月, 也是用的Hugo+Theme, 所链接的docDock主题并未出现在gohugo官方主题网站上\u0026hellip; 当然, 也不满意。 看到一个网站叫GoJun推荐, 也是该网站所用的hugo-theme-zozo主题, 在gohugo官方主题网站上也没有, 但非常简洁, 感觉很好, 有个zozo主题Demo, 看着比较简单, 看GoJun也差不多。\nJournal主题也是简洁风格, 与hugo-theme-zozo主题有些类似。\nJournal的Demo网站看着就有点太过简单了\u0026hellip; Stack主题初看有些太过简单, 看了实际的效果后感觉还不错, 可以一用。 Stack主题的Demo网站看着还可以, 只是左边菜单的字颜色有点浅(已修改)。\n锦李本鲤也是使用Stack主题的, 可以做参考。\nEchosec @QIN2DIM同样使用Stack主题, 还有一些文档与修改主题样式有关, 比如分享一些有趣的 Hugo-Stack 自定义主题样式; Echosec @QIN2DIM有不少文档讲到Stack主题, 可以在搜索stack中看到。\nStack主题的库在hugo-theme-stack。\nstack主题中文手册网站是个较完善的Stack主题中文手册。\n考虑使用Stack主题 已改用Stack主题 将blog发布的github中遇到的问题 将已经完成的blog发布到github很简单, 步骤如下:\n1.建一个github用户(如果还没有的话), 用这个用户登录github\n我们假定用户名是abcd(后面要用到)\n2.创建一个仓库(repo), 仓库名为用户名(全小写).github.io\n用户名是abcd的用户, 创建的仓库名就是:abcd.github.io\n按缺省设置创建该仓库。\n注意:\n当前, 普通免费用户的github.io仓库只有是Public时, 才能正常打开网页, 否则会报404错误。\n所以, 不能把github.io仓库设置为private。\n3.在hugo里生成静态网站内容\n使用hugo命令生成静态网站内容\n注意:\n使用hugo命令生成静态网站内容时, 需要使用\u0026ndash;basURL参数指定域名, 否则生成的页面中使用的域名是hugo的config文件中配置的域名。\n当域名不正确时, 推送到github后, 浏览时也会报404错误。\n命令如下:\n$ hugo --baseURL=\u0026ldquo;https://abcd.github.io\u0026rdquo;\n待解决问题: 暂无\n其他问题 关于在Windows10上, 使用TortoiseGit(+Git)管理在Samba服务器(基于Armbian系统)上的仓库时出现的问题 问题描述:\n在Armbian系统上使用git clone命令克隆Pure主题仓库(相关目录通过Samba服务器在网络上共享), 在Armbian系统中和Windows共享中修改后, 在Windows上使用TortoiseGit查看diff, 报\u0026quot;fatal: detected dubious ownership in repository\u0026quot;类的错误, 并提示:\n添加环境变量GIT_TEST_DEBUG_UNSAFE_DIRECTORIES=true 使用 git config --global --add safe.directory '仓库目录全路径' 命令, 应该是添加信任目录 其中:\n环境变量可以使用windows的\u0026quot;编辑系统环境变量\u0026quot;工具添加, 在cmd中使用set命令查看确认 添加信任目录可以在cmd中使用已安装的git.exe程序执行 但是, 按此操作后, 并没有效果: 使用TortoiseGit查看diff依然报错。\n另外, 在内存虚拟磁盘(使用\u0026rsquo;Olof Lagerkvist\u0026rsquo;的\u0026rsquo;ImDisk Virtual Disk\u0026rsquo;建立)上, 也会出错同样的问题。\n处理:\n在windows本机磁盘上clone仓库, 并同样进行修改, 可以正常使用git进行操作。\n结论:\n在windows上, 暂时无法使用git工具操作Samba共享目录上的仓库, 可能与权限相关, 因为用户大概率不同 - samba上的文件owner应该是Armbian系统中的用户。\n","date":"2022-08-08T00:00:00Z","image":"https://jimway71.github.io/wallpaper/wallpaper-01.jpg","permalink":"https://jimway71.github.io/p/%E5%9C%A8r3300l%E7%B1%BB-armbian%E4%B8%8A%E5%AE%89%E8%A3%85hugo%E6%9C%8D%E5%8A%A1%E5%99%A8/","title":"在R3300L类+Armbian上安装Hugo服务器"},{"content":"参考: balbes150活跃于Armbian官方(?)论坛, 他提供了支持部分非原厂支持设备的Armbian包, 如支持包括大部分S905系列芯片的Armbian image:\nSingle Armbian image for RK + AML + AW (aarch64 ARMv8) By balbes150 一些安装说明:\nInstallation Instructions for TV Boxes with Amlogic CPUs\nArmbian OS – uEnv.ini and extlinux.conf (2020更新后版本, 改用extlinux.conf+uboot.ext)\nInstallation Guide and your questions answered for TV Boxes\nN1 盒子安装使用最新 Armbian 的记录\nN1如何完美刷入armbian系统教程\nR3300L运行CoreELEC, EmuELEC和Armbian\nArmbian配置工具armbian-config Armbian系统提供armbian-config工具, 功能很丰富, 多数设置可以在这里完成\n操作 调整TF卡上Ext4分区空间 Armbian安装到TF卡上后, 有两个分区, 128M*1 + 1.2G*1.\n第一次用这张TF卡启动时, 系统会自动扩展TF卡的第二个分区, 并会占满整张TF卡的剩余空间\n实际使用中, 希望能留一块独立的空间(分区), 这块空间windows能读写(考虑exfat格式), 即使Armbian系统坏了, 数据还能很方便的读取出来.\n测试方法① (在Armbian安装到TF卡上后)先占一块空间给exfat分区.\n操作:\n在TF卡的最后面分一块exfat分区, 希望第一次启动扩展分区时, 这个exfat分区不会受到影响.\n实际测试中, 发现分了这块exfat分区后, 第一次用这张TF卡启动时, 系统无法完成自动扩展分区.\n删除exfat分区后, 系统才自动完成扩展, 并且占满整个TF卡空间.\n方法①经测试, 确认失败。\n测试方法② 无损调整EXT4分区大小\n参考: 无损调整EXT4分区大小\n操作:\n先等系统用这张TF卡第一次启动, 并自动完成分区扩展;\n关机, 取出TF卡, 插到另一个linux(ubuntu类最好)机器上, 用该linux原系统启动, TF卡不做为启动盘(不需要始终是mount的状态);\n按下列命令操作:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 # 看分区 # lsblk # 检查需要调整的分区 # e2fsck -f /dev/sda2 # 调整分区文件系统到5G. 注意: 需要配合下一步才能生效 _ 这里应该只是把用到的空间都挪到前面5G的空间去了, 但没有实际调整分区大小 # resize2fs /dev/sda2 5G # 进fdisk, 先删除sda2, 再重建5G大小的sda2 # fdisk /dev/sda # 删除原sda2 (command): d (command): 2 # 新建5G大小的sda2 (command): n # 新建 (command): 2 # 第2分区 (command): Sectors位置, sda1 End+1 # 起始sectors位置 (command): +5G # 大小, 或结果secotrs位置: 这里写的是大小, 以+开始, +后面是要划分的空间大小(5G) (command): n # 发现ext4签名, 是否删除: N 不删除 # 顺便把exfat分区也建上... ... (command): w # 写盘退出 # 再检查一下，没有错误就说明没问题了 # e2fsck -f /dev/sda1 结果: 成功\n先在windows上格式化了exfat分区, 确认读写都没有问题.\n然后用这张卡启动linux正常, 用fdisk查看分区也正常.\n确认使用无损调整EXT4分区大小的方法修改Armbian启动TF卡分区成功\nArmbian上安装Docker 参考官网安装说明: Get Docker\n一般用官方的shell安装.\n","date":"2021-04-09T08:54:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-35.png","permalink":"https://jimway71.github.io/p/armbian-on-tv-box/","title":"Armbian on TV box"},{"content":" WordPress英文半角符号自动变成中文全角的解决方法\n参考: WordPress英文半角符号变成中文全角的解决方法\n问题分析:\n查找原因，原来是默认情况下，WordPress会调用函数wptexturize来执行转换。\n解决方法:\n在主题目录下的functions.php文件中添加如下代码即可。\n//WordPress英文半角符号变成中文全角的解决方法\nremove_filter(‘the_title’, ‘wptexturize’);\nremove_filter(‘the_excerpt’, ‘wptexturize’);\nremove_filter(‘the_content’, ‘wptexturize’);\n这是最简单的方法，推荐。\n当然，还有一种方法是更改wp-includes目录里面的formatting.php代码，但是这样每次WordPress更新版本的时候都要去修改代码，不建议。\n","date":"2021-04-08T21:42:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-34.jpg","permalink":"https://jimway71.github.io/p/wordpress-qa/","title":"Wordpress Q\u0026A"},{"content":"关于Docker的网络模式 参考 Docker的四种网络模式\n现象 ① 最初始现象是发现在docker容器中(的系统里)使用apt-get更新(update)时失败, 由于容器里没有ping等一系列工具软件, 无法确认问题具体情况。\n② 接着就找image里有ping的包, 用docker search发现pentest-tools里有, 但pull下来后发现运行错误, 报错信息如下:\nstandard_init_linux.go:211: exec user process caused \u0026ldquo;exec format error\u0026rdquo;\n查了下, 有人说是因为不兼容引起的错误:\n→ docker运行容器报错standard_init_linux.go:211: exec user process caused “exec format error“的可能解决办法\n③ 在查找中突然发现有说centos的image里有ping, 想着操作系统可能都会有整套网络工具软件, 就找了个ubutu的包pull下来, 结果里面还是没有.\n虽然centos不熟, 都是linux应该也差不太多, 回头就pull了centos.\n用docker运行并进入到容器里\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 # docker run -it centos /bin/bash [root@a688b8f2101e /]# ping 192.168.1.1 PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data. ^C --- 192.168.1.1 ping statistics --- 2 packets transmitted, 0 received, 100% packet loss, time 26ms [root@a688b8f2101e /]# ping 192.168.1.7 PING 192.168.1.7 (192.168.1.7) 56(84) bytes of data. 64 bytes from 192.168.1.7: icmp_seq=1 ttl=64 time=0.361 ms [root@a688b8f2101e /]# ping www.sina.com PING spool.grid.sinaedge.com (123.126.55.41) 56(84) bytes of data. ^C --- spool.grid.sinaedge.com ping statistics --- 3 packets transmitted, 0 received, 100% packet loss, time 27ms 现象是除了本宿主机的IP(192.168.1.7), 其它地址都不能ping通\n1 2 3 4 5 [root@a688b8f2101e /]# tracepath www.sina.com 1?: [LOCALHOST] pmtu 1500 1: 119.167.237.233 2.100ms reached 1: 119.167.237.233 0.436ms reached Resume: pmtu 1500 hops 1 back 1 用tracepath跟踪路由也看不出什么\n测试的结果是:\n除了本宿主机地址外, 其它地址都不能ping通 虽然ping不通, 但是dns解析还是可以的. ④ 怀疑是宿主机的防火墙挡住了, 把防火墙关了\n# /etc/init.d/firewall stop\n再进入容器测试, 发现依然ping不通其它设备网址, 而且dns解析也不行了\n[root@88a5cfa727dc /]# ping www.sina.com\nping: www.sina.com: Name or service not known\n这只能说明, 宿主机的防火墙至少还帮着把DNS解析的包给双向转发了.\n问题不是要不要开防火墙, 而是防火墙必须得开, 但是防火墙的规则写的少了点东西.\n要不要处理 本来如果凑合对付着用也行, 但看了下素版的wordpress好象东西还是有点少, 据说很多插件都需要从网上下载, 没法忍, 必须得处理这个问题.\n怎么处理: iptables我也不熟, 要不先来个简单的思路?\n① docker网络改用host模式\nHost模式说明： Docker的四种网络模式\n如果启动容器的时候使用host模式，那么这个容器将不会获得一个独立的Network Namespace，而是和宿主机共用一个Network Namespace。容器将不会虚拟出自己的网卡，配置自己的IP等，而是使用宿主机的IP和端口.\n这样就不会有包转发的问题了.\n在docker启动时, Host模式需要使用\u0026quot;\u0026ndash;network=host\u0026quot;参数.\n测试Host模式:\n还是用centos的包来做测试\n1 2 3 4 5 6 7 8 9 10 11 # docker run --network=host -it centos /bin/bash [root@Q7Op /]# ping www.sina.com PING ww1.sinaimg.cn.w.alikunlun.com (119.167.237.230) 56(84) bytes of data. 64 bytes from 119.167.237.230 (119.167.237.230): icmp_seq=1 ttl=55 time=15.4 ms 64 bytes from 119.167.237.230 (119.167.237.230): icmp_seq=2 ttl=55 time=15.4 ms 64 bytes from 119.167.237.230 (119.167.237.230): icmp_seq=3 ttl=55 time=15.4 ms 64 bytes from 119.167.237.230 (119.167.237.230): icmp_seq=4 ttl=55 time=15.3 ms ^C --- ww1.sinaimg.cn.w.alikunlun.com ping statistics --- 4 packets transmitted, 4 received, 0% packet loss, time 8ms rtt min/avg/max/mdev = 15.308/15.348/15.363/0.023 ms 网络就可以正常访问了.\n把现有的容器改成host模式:\ndocker启动容器时, 如果不设置network模式, 容器就会以bridge模式运行.\n在portainer.io(web管理)界面里, 试着把已经运行的bridge模式的容器改为host模式, 好像不行, 再试一下, 一样的报错:\nfailure container sharing cannot be connected to any other network\n即使暂停或停止容器, 也是报一样的错误.\n看来不可能简单的用管理界面搞定这个事.\n网上有篇文章可能跟这有关: Docker网络管理-网络模式\n文章有点复杂,没看懂\n在portainer.io(web管理)界面里, 想用复制容器的方式, 在复制时, 修改网络为host模式.\n但是, 复制的容器就一直有问题, 试图连接时报错:\n# docker exec -it WordPressHostNet /bin/bash\nError response from daemon: Container 0dd20f7ed6587ba9900acbef9f7da926974c49bebc0fa076d19cbae573c5116c is restarting, wait until the container is running\n说是始终在重启状态\nweb端口也连不上, 原因不清楚.\n参考: Docker第五篇（docker网络管理）\n两个方法:\ndocker update \u0026ndash;network=host …… 设置网桥，连接不同网段\n或者，docker有nat桥？ 参考: Docker 容器内无法通过 HTTP 访问外网\n和当前现象相似\n测试:\n① 参考 Docker 容器内无法通过 HTTP 访问外网\n1 2 3 4 5 6 7 8 9 10 11 # service dockerd stop # killall dockerd # 检查点: 检查网络 # ifconfig # ifconfig docker0 down # brctl delbr docker0 # service dockerd start # 检查点: 检查网络 # ifconfig # 测试: # docker run --rm -it centos /bin/bash 测试结果: 失败\n② 参考 Docker第五篇（docker网络管理）, 用update改network\n1 2 3 # docker update --network=host -it e7d3c1eca2fb unknown flag: --network See \u0026#39;docker update --help\u0026#39;. 结果: update不支持修改network\n测试结果: 失败\n③ 测试用已有的容器作镜像, 用host模式运行生成的镜像, 发现会自动退出\n再测试用wordpress以host模式运行, 也同样会自动退出\n原因可能是某个端口被宿主机占了, 谁知道\n结论: wordpress在当前系统上, 只能以bridge方式运行.\n看来应该是网桥的问题, 估计最终还是iptables的问题\n参考: 如何管理linux设备上的bridge(网桥)和docker bridge\n估计一时半会也搞不定了, 先准备手动安装wp包和插件吧:\n如何手动安装WordPress主题和插件（Linux）\n后记: 放弃了使用WordPress服务器搭博客的方式。\n然而, 其实 . Docker下, 不管是host模式/bridge模式/container模式都不应该存在网络通讯的问题\u0026hellip;\u0026hellip;\n☻\n","date":"2021-04-08T01:17:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-33.jpg","permalink":"https://jimway71.github.io/p/docker%E5%AE%B9%E5%99%A8%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E7%BD%91%E7%BB%9C/","title":"Docker容器无法访问网络"},{"content":"安装环境 在数码视讯Q7上装了openwrt, 并已建好了Docker环境\n参考 armbian装docker+wordpress实现https访问\nwordpress英文官网: https://wordpress.org/ (可能是)\nWordPress中文官网: https://cn.wordpress.org/\nWordPress on GitHub: https://github.com/WordPress/WordPress\n安装 安装数据库 使用mariaDB数据库.\n# 拉取mariadb镜像\n# docker pull mariadb\n# 运行数据库容器\n# docker run -d \u0026ndash;name DB4WordPress -p 3306:3306 -v /data/mysql:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mariadb\n参数说明:\n--name: 容器名称，这里设置为DB4WordPress\n-p: 端口映射，宿主机的3306端口映射给容器的3306端口.第一个3306是宿主机(即物理机器)的端口，第二个是容器的端口\n-e: 环境变量. MYSQL_ROOT_PASSWORD, 设置root密码为123456\n-v: 指定数据卷，也就是将mariadb容器的/var/lib/mysql映射到宿主机的/data/mysql\n检查是否运行:\n# docker ps -a\n新建wordpress的库\n# mysql -h 192.168.1.207 -u root -p\nEnter password:\nWelcome to the MariaDB monitor. Commands end with ; or \\g.\nYour MariaDB connection id is 12\nServer version: 10.5.9-MariaDB-1:10.5.9+maria~focal mariadb.org binary distribution\nCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.\nType \u0026lsquo;help;\u0026rsquo; or \u0026lsquo;\\h\u0026rsquo; for help. Type \u0026lsquo;\\c\u0026rsquo; to clear the current input statement.\nMariaDB [(none)]\u0026gt; create database wordpress;\nQuery OK, 1 row affected (0.001 sec)\nMariaDB [(none)]\u0026gt; quit\nBye\n安装WordPress # 拉取wordpress镜像\n# docker pull wordpress\n运行wordpress容器\n# docker run -d \u0026ndash;name WordPress -p 1080:80 -e WORDPRESS_DB_HOST=192.168.1.207:3306 -e WORDPRESS_DB_USER=root -e WORDPRESS_DB_PASSWORD=123456 -e WORDPRESS_DB_NAME=wordpress wordpress\n参数说明:\nWORDPRESS_DB_HOST : 链接的docker的MySQL的IP地址和端口，一般设置成mysql表示用默认的设置\nWORDPRESS_DB_USER : 指定数据库用户\nWORDPRESS_DB_PASSWORD : 指定数据库用户的密码，如果用户是root，那么要和之前启动数据库时的\u0026quot;MYSQL_ROOT_PASSWORD\u0026quot;相同。\nWORDPRESS_DB_NAME: 数据库名\n--link 链接到mariadb容器的名称(感觉这里用不着link)\n检查是否运行\n# docker ps -a\n用浏览器打开http://192.168.1.207:1080, 确认安装成功\n更改WordPress语言设置为中文 参考: 更改WordPress语言设置（例如中文版和英文版转换）\n注意: WordPress官方英文版不包含任何语言包, 包括Docker版本\n下载中文版wordpress\n在WordPress中文官方网站下载中文版本wordpress, 解压下载的压缩包.\n把wp-content/下的languages目录整个拷到wordpress容器的/var/www/html/wp-content/目录下\n中文版的languages/目录下是中文相关的文件\n# docker cp languages/ WordPress:/var/www/html/wp-content/\n这个拷贝命令还不错, 是拷整个目录所有文件.\n修改wordpress容器中/var/www/html/wp-config.php, 加入中文语言设置\n由于容器里没有编译工具, 比如vi/vim/nano这类的, 所以要先拷到宿主机上, 编辑后再拷回去.\n先把文件wp-config.php从容器拷到宿主机\n# docker cp WordPress:/var/www/html/wp-config.php /tmp\n在宿主机上用vim编辑wp-config.php文件\n# vim /tmp/wp-config.php\n加入: define(\u0026lsquo;WPLANG\u0026rsquo;, \u0026lsquo;zh_CN\u0026rsquo;);\n由于原配置文件中没有WPLANG的设置, 不知道要放在哪里, 就直接放在第一大段注释说明后面了.\n编辑完后, 把改好的wp-config.php拷回到容器里\n# docker cp /tmp/wp-config.php WordPress:/var/www/html/\n用浏览器打开http://192.168.1.207:1080查看, 发现已经有\u0026quot;站点语言\u0026quot;选择(原来没有这项), 并且可以选择中文.\n↑ 修改后, 可以选择语言\n↑ 修改前, 没有语言选择项\n\u0026ldquo;站点语言\u0026quot;选择\u0026quot;中文\u0026rdquo;, 并确认生效.\nⒺⓃⒹ\n","date":"2021-04-07T14:44:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-32.png","permalink":"https://jimway71.github.io/p/%E5%9C%A8docker%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85wordpress/","title":"在Docker环境下安装WordPress"},{"content":"参考: Docker run 命令参数及使用 docker设置容器固定ip 用Docker搭建WordPress博客 armbian装docker+wordpress实现https访问 用Docker部署WordPress\nWordPress连接数据库失败处理方法 基于docker搭建自己的个人网站 Docker Q\u0026amp;A 查看Docker容器环境变量\n标注说明:\nCONTAINER-NAME: 容器名字 CONTAINER-ID: 容器ID 用命令 Docker ps -a 可以查到上述信息\n有下列3种方式查看Docker容器环境变量:\nDocker inspect\n# docker inspect \u0026lt;CONTAINER-NAME\u0026gt; OR \u0026lt;CONTAINER-ID\u0026gt;\n# 如:\n# docker inspect WordPressTest1\n用env查看\n# docker exec -it \u0026lt;CONTAINER-NAME\u0026gt; OR \u0026lt;CONTAINER-ID\u0026gt; env\n# 如:\n# docker exec -it b14df65ecd73 env\n进入容器后用env查看\n# docker exec -it \u0026lt;CONTAINER-NAME\u0026gt; OR \u0026lt;CONTAINER-ID\u0026gt; /bin/bash\n(容器提示符)# env\n# 如:\n# docker exec -it b14df65ecd73 /bin/bash\n(容器提示符)# env\n另: Docker使用\u0026ndash;link参数可以把另一个容器的环境变量连接过来(没有测试), 可以用env查看到\nWordPress的Docker参数\nWordPress的Docker需要的参数是从环境变量里取得.\n读取代码在wordpress容器里的/var/www/html/wp-config.php文件, 相关的主要代码如下:\n// ** MySQL settings - You can get this info from your web host ** //\n/** The name of the database for WordPress */\ndefine( \u0026lsquo;DB_NAME\u0026rsquo;, getenv_docker(\u0026lsquo;WORDPRESS_DB_NAME\u0026rsquo;, \u0026lsquo;wordpress\u0026rsquo;) );\n/** MySQL database username */\ndefine( \u0026lsquo;DB_USER\u0026rsquo;, getenv_docker(\u0026lsquo;WORDPRESS_DB_USER\u0026rsquo;, \u0026rsquo;example username\u0026rsquo;) );\n/** MySQL database password */\ndefine( \u0026lsquo;DB_PASSWORD\u0026rsquo;, getenv_docker(\u0026lsquo;WORDPRESS_DB_PASSWORD\u0026rsquo;, \u0026rsquo;example password\u0026rsquo;) );\n/**\n*/\n/** MySQL hostname */\ndefine( \u0026lsquo;DB_HOST\u0026rsquo;, getenv_docker(\u0026lsquo;WORDPRESS_DB_HOST\u0026rsquo;, \u0026lsquo;mysql\u0026rsquo;) );\n/** Database Charset to use in creating database tables. */\ndefine( \u0026lsquo;DB_CHARSET\u0026rsquo;, getenv_docker(\u0026lsquo;WORDPRESS_DB_CHARSET\u0026rsquo;, \u0026lsquo;utf8\u0026rsquo;) );\n/** The Database Collate type. Don\u0026rsquo;t change this if in doubt. */\ndefine( \u0026lsquo;DB_COLLATE\u0026rsquo;, getenv_docker(\u0026lsquo;WORDPRESS_DB_COLLATE\u0026rsquo;, \u0026lsquo;\u0026rsquo;) );\n可以看到以下环境变量参数:\nWORDPRESS_DB_NAME: wordpress所用数据库名, 缺省为\u0026quot;wordpress\u0026quot;\nWORDPRESS_DB_USER: wordpress访问数据库的用户名, 缺省为\u0026quot;example username\u0026quot;\nWORDPRESS_DB_PASSWORD: wordpress访问数据库的用户密码, 缺省为\u0026quot;example password\u0026quot;\nWORDPRESS_DB_HOST: wordpress访问的数据库地址端口(ip:port)\nWORDPRESS_DB_CHARSET: 数据库字符集\n主要用到前4个参数\nDocker的重启\n# 重启docker\n# service dockerd restart\n# 重启容器，可通过portainer\n# 查看容器id和名称\n# docker ps -a\n# docker restart bc7c8d4514fe\n# 或\n# docker restart mydb\n宿主机(即物理机)与docker文件互传\n# 宿主机传文件至docker容器\n# docker cp 本地文件的路径 container_id:\u0026lt;docker容器内的路径\u0026gt;\n# 容器传文件至宿主机\n# docker cp container_id:\u0026lt;docker容器内的路径\u0026gt; \u0026lt;本地保存文件的路径\u0026gt;\n# 这里的容器ID可以通过portainer或者命令“docker ps -a ”进行查看\n容器里安装nano或vim\n# apt-get update\n# apt-get install nano\n# 或\n# apt-get install vim\n容器自动启动\n在使用docker run时，添加\u0026quot;\u0026ndash;restart=always\u0026quot;参数 运行中的docker使用update时添加\u0026quot;\u0026ndash;restart=always\u0026quot;参数 # docker update \u0026ndash;restart=always wordpress\n\u0026ldquo;wordpress\u0026quot;是容器名称, 也可以写容器ID.\n例:\n# docker update \u0026ndash;restart=always DB4WordPress\nDB4WordPress\n# docker update \u0026ndash;restart=always WordPress\nWordPress\n关机重启后, 数据库和wordpress容器都已启动, 确认命令有效.\nDocker镜像源\n参考: Docker快速安装以及换镜像源\nDocker的镜像配置文件是: /etc/docker/daemon.json, 当前内容是:\n1 2 3 4 5 6 7 8 9 10 11 12 13 { \u0026#34;bip\u0026#34;: \u0026#34;192.168.30.1/24\u0026#34;, \u0026#34;data-root\u0026#34;: \u0026#34;/opt/docker/\u0026#34;, \u0026#34;log-level\u0026#34;: \u0026#34;warn\u0026#34;, \u0026#34;log-driver\u0026#34;: \u0026#34;json-file\u0026#34;, \u0026#34;log-opts\u0026#34;: { \u0026#34;max-size\u0026#34;: \u0026#34;10m\u0026#34;, \u0026#34;max-file\u0026#34;: \u0026#34;5\u0026#34; }, \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;https://dockerhub.azk8s.cn\u0026#34; ] } portainer在armbian上安装运行\n运行参考: Deploying Portainer CE in Docker\n# (安装应该是使用docker pull: docker pull portainer/portainer-ce)\n# 安装使用apt-get\n# apt-get install portainer/portainer-ce\n# 启动\n# docker volume create portainer_data\n# docker run -d -p 8000:8000 -p 9000:9000 \u0026ndash;name=portainer \u0026ndash;restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce\n查看某个docker容器占用的ip\n# docker inspect openwrt | grep Address\n其中“openwrt”是容器的名称\narmbian上安装Docker\n参考官网安装说明: Get Docker\n一般用官方的shell安装.\n修改地址(临时, openwrt)\n# ifconfig br-lan 172.17.0.3 netmask 255.255.255.0\n# 设置网关\nroute add default gw 172.17.0.1\nDocker搜索镜像(img包)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # docker search 镜像包名, 如: # docker search hugo NAME DESCRIPTION STARS OFFICIAL AUTOMATED klakegg/hugo Minimal image and variants with batteries in… 99 [OK] jojomi/hugo hugo, see https://gohugo.io 64 [OK] monachus/hugo Docker image for building and running Hugo (… 42 [OK] publysher/hugo Docker base image for static sites generated… 38 [OK] jguyomard/hugo-builder Lightweight Alpine-Based Docker Image for Hu… 19 [OK] cibuilds/hugo Docker image for Hugo, the static-site gener… 15 fundor333/hugo Docker file for build your Hugo for my site … 4 [OK] peaceiris/hugo Hugo Alpine base Docker Image (Hugo extended… 4 solidnerd/hugo Hugo in a container 2 [OK] yanqd0/hugo The smallest hugo image built from Alpine. 2 [OK] muninn/hugo-caddy hugo + caddy + caddy hugo admin plugin + cad… 2 tarampampam/hugo Hugo (gohugo, static stite generator) applic… 1 [OK] orus/hugo-builder Alpine with hugo, git and pygments installed… 1 dettmering/hugo-build Build a website with Hugo (gohugo.io) 1 [OK] envimate/hugo Dockerized version of hugo cli https://gohug… 1 chabad360/hugo Build a static site with Hugo (includes Hugo… 0 vergissberlin/hugo-docker-watchtower Hugo with continues delivery after commits i… 0 simonszu/hugo An image for the hugo blog system 0 [OK] webhippie/hugo Docker images for Hugo 0 [OK] toschwarz/hugo-builder Hugo Builder Image 0 [OK] svlentink/hugo Official Hugo static web gen. from Github (l… 0 [OK] mazgi/hugo-static-website Docker image for static website by Hugo. 0 [OK] sjugge/hugo Runs the latest stable Hugo static site gene… 0 [OK] forestryio/hugo 0 endocode/hugo-website 0 *STARS越多越好(排在越靠前)\n","date":"2021-04-06T22:23:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-31.jpg","permalink":"https://jimway71.github.io/p/docker%E7%9B%B8%E5%85%B3/","title":"Docker相关"},{"content":"说明 恩山论坛的flippy大侠推出的\u0026ldquo;55+、55+O S905x3、S922x、贝壳云、我家云、微加云等OP固件\u0026rdquo;内置了Docker CE容器(服务-Docker CE容器), 但Docker并不(缺省)可用.\n在Docker CE容器主页面下, 提供了内置的\u0026quot;Docker 初始化无脑配置教程\u0026quot;链接(一个PDF文件), 按照教程说明, 可以简单的把Docker环境搭建完成.\n环境说明 在TF卡里装了flippy大侠的OP固件, 用这张TF卡插在联通(数码视讯)Q7盒子(以下简称Q7)里启动, op可以正常运行.\nTF卡中只用不到1G空间被op系统占用, 剩下的分成了一个exfat的主分区.\n操作步骤 操作步骤大致按照\u0026quot;Docker 初始化无脑配置教程\u0026quot;, 但略有些不同.\n给Docker分配存储空间\n由于原来剩余空间都给了exfat主分区, 所以只能重新分配空间.\n本想通过调整分区大小来分出部分空间给Docker, 但试了Win10的\u0026quot;硬盘管理\u0026quot;+\u0026ldquo;分区助专业版\u0026rdquo;, 发现都不能把exfat分区的空间调小, 所以只能重新分配空间.\n先备份exfat分区文件 TF卡重新分区\n把TF卡插回Q7的TF卡槽, tf卡启动Q7后, 用SecureCRT登录进去: 使用fdisk命令删除原exfat分区\n使用fdisk重分两个分区, 一个exfat分区, 一个ext4分区.\n考虑到Docker可能不会占用多少空间, 给ext4分了10G的空间.\n(exfat分区的类型代码是7)\n格式化(mkfs命令)\n# 格式化exfat分区\n# mkfs.exfat /dev/sda3\n# 格式化ext4分区\n# mkfs.ext4 /dev/sda4\n注意: 如果分区已经mount上就不能格式化, 会显示格式化失败信息.\n这种情况需要umount, 如下:\n# umount /dev/sda3\n↑ 相应的教程内容, 执行的shell功能就是分区+格式化\n挂载(mount)新分区\n把新的ext4分区挂载(mount)到/opt下, 做为Docker的空间.\n与mount有关的配置文件有/etc/mtab + /etc/fstab, /etc/fstab是启动时的挂载配置文件.\n↑ 相应的教程内容, 实现新分区挂载到/opt\n按教程操作完成挂载后, 查看/etc/fstab文件, 并没有看到/opt的挂载信息, 不清楚具体是在哪里配置的.\n用mount命令查看, 可以看到已经挂载到/opt下了\n把备份的exfat分区文件恢复回去. 确认Docker的配置文件\n修改/etc/docker/daemon.json, 把data-root改为/opt/docker/\n说明见文后的问题①\n安装Docker管理系统\n/etc/docker-web是一个shell, 内容如下:\n# cat /etc/docker-web\n#!/bin/sh\ndocker run -d \u0026ndash;restart=always \u0026ndash;name=\u0026ldquo;portainer\u0026rdquo; -p 9999:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce\ndocker-web是用来安装docker的web管理系统, 执行前需要先确认下docker是否已启动, 如果没有启动, docker-web的安装会失败, 如下:\n# ./docker-web\ndocker: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?.\nSee \u0026lsquo;docker run \u0026ndash;help\u0026rsquo;.\n使用service命令确认docker运行状态\n# service dockerd status\ninactive\n如果发现docker未启动, 则先启动docker\n# service dockerd start\n再次确认docker运行状态\n# service dockerd status\nrunning\n确认docker运行后, 可以执行docker-web进行安装\n# ./docker-web\nUnable to find image \u0026lsquo;portainer/portainer-ce:latest\u0026rsquo; locally\nlatest: Pulling from portainer/portainer-ce\n84cfa456b2b1: Pull complete\n39d56ef0881a: Pull complete\n16a45878c700: Pull complete\nDigest:\nStatus: Downloaded newer image for portainer/portainer-ce:latest\n进入Docker管理界面\n在浏览器里输入Q7的ip地址:9999, 设置管理员密码, 选择local进入本地管理界面\n点鲸鱼图标即可管理本地的docker\n问题 ① Docker的配置文件有问题, 需要修改 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # cat /etc/docker/daemon.json { \u0026#34;bip\u0026#34;: \u0026#34;172.31.0.1/24\u0026#34;, \u0026#34;data-root\u0026#34;: \u0026#34;/mnt/mmcblk2p4/docker/\u0026#34;, \u0026#34;log-level\u0026#34;: \u0026#34;warn\u0026#34;, \u0026#34;log-driver\u0026#34;: \u0026#34;json-file\u0026#34;, \u0026#34;log-opts\u0026#34;: { \u0026#34;max-size\u0026#34;: \u0026#34;10m\u0026#34;, \u0026#34;max-file\u0026#34;: \u0026#34;5\u0026#34; }, \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;https://dockerhub.azk8s.cn\u0026#34; ] } 其中data-root所指/mnt/mmcblk2p4不存在, 由于给docker分配的空间是/opt, 因此考虑把data-root所指目录改到/opt/docker/下\n","date":"2021-04-06T18:06:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-30.jpg","permalink":"https://jimway71.github.io/p/%E5%9C%A8openwrt%E4%B8%8A%E5%BB%BA%E7%AB%8Bdocker%E7%8E%AF%E5%A2%83/","title":"在Openwrt上建立Docker环境"},{"content":"问题: 旧版SecureCrt不能连接新版本的sshd服务器 报错如下:\nKey exchange failed. No compatible key exchange method. The server supports these methods: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256\n原因分析:\n旧版SecureCrt(版本号6.7.0 (build 153))支持的密钥交换(Key exchange)为以下5种:\nKerberos Kerberos(Group Exchange) Diffie-hellman-group14 Diffie-hellman-group Diffie-hellman 这5种均不被新的sshd支持, 当前sshd版本信息为:\nOpenSSH_8.3p1, OpenSSL 1.1.1j 16 Feb 2021\n处理方式:\n修改/etc/ssh/sshd_config文件, 添加(我是在文件最后添加):\nKexAlgorithms diffie-hellman-group14-sha1\n然后重启sshd:\n#service sshd restart\n即可。\n(看参考的文档, 说的是添加:\nKexAlgorithms curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha1,diffie-hellman-group-exchange-sha1,diffie-hellman-group1-sha1\n其实添加一种SecureCrt支持的方式就可以了)\n参考:\n升级ssh后续问题 使用SecureCRT连接Ubuntu20.04报错：Key exchange failed. No compatible key exchange method 升级openssh带来的问题 更新:\n可以改用基于MobaXterm license许可的MobaXterm, 不再有这种问题。\n问题: 在openwrt上新建一个可用的samba用户 需要解决的问题:\n需要新增一个samba用户, 而samba用户是与同名系统用户关联的, 所以需要先建立一个同名的系统用户.\n但是, 当前Openwrt的底层系统里没有useradd或者adduser命令, 用opkg update更新后, 搜索可用的包里也没找到相关的包, 包括有人提到的shadow-useradd或者类似的命令, 所以, 不能用命令添加一个用户\n那, 就先手动来新增一个用户\n修改/etc/passwd文件, 增加新用户信息\n# vim /etc/passwd\n增加一行:\nnewuser:x:66666:66666:newuser:/home/newuser:/bin/ash\n说明:\nnewuser是用户名, /home/newuser就是newuser用户的根目录了.\n66666是用户ID, 要注意在整个passwd文件是应该是唯一的.\n/bin/ash是shell, 是从root用户那行抄来的\n修改/etc/group文件, 增加新用户的组信息: 组名和用户名一般都是相同的\n# vim /etc/group\n增加一行:\nnewuser:x:66666:newuser\n说明:\n组名和用户名相同\n组ID号和用户ID号也相同\n建立新用户根目录, 并设置属主/组\n# mkdir /home/newuser\n# chown newuser /home/newuser\n# chgrp newuser /home/newuser\n给新用户设置密码\n# passwd newuser\n该设置samba用户了\n给samba新用户设置密码\n# smbpasswd newuser\n\u0026hellip;\u0026hellip;\nFailed to find entry for user newuser.\n# smbpasswd -a newuser\n\u0026hellip;\u0026hellip;\nAdded user newuser.\n使samba新用户可用\n# smbpasswd -e newuser\nEnabled user newuser.\n问题: 在openwrt上设置samba服务器, Windows/Win10/Es文件浏览器都可以通过网络访问. 环境说明:\n用S905L的盒子装了个openwrt, 装在TF卡上, 用TF卡启动.\nTF卡上除了装op系统的大概1G空间外, 剩下的空间分区并格式化为exfat格式, op启动时会自动加载这个exfat分区, 使用samba(web上在网络存储-网络共享)共享出来可供局域网内设备访问.\nWin10当前版本缺省不支持SMB 1.0/CIFS, 为了访问低版本的samba设备, 已通过\u0026quot;启用或关闭Windows功能\u0026quot;打开\u0026quot;SMB 1.0/CIFS文件共享支持\u0026quot;+\u0026ldquo;SMB Direct\u0026rdquo;, 需要能让这种设备访问盒子上的samba服务器 - 其实这并不是一个问题, 当前版本的samba(V4.11.6)早已支持新版本的samba协议.\n安卓手机app\u0026quot;Es文件管理器\u0026quot;也需要在局域网内能访问同一个samba服务器.\n问题详述:\n问题1. linux上的samba服务器与Windows的Samba服务器是有区别的\nWindows的samba服务器被访问时, 如果需要用户登录, 会在开始连接时就要求登录.\n而Linux的samba服务器被访问时, 只有当访问到\u0026quot;共享目录\u0026quot;时, 才会问到登录信息.\n问题2. 当前版本的Win10在访问samba服务时, 已经不支匿名访问, 只能修改注册表信息来支持\n这个操作比较麻烦, 不考虑\n测试中发现, 当一个samba服务器里只要存在任何一个可以匿名访问的文件共享, Win10就无法访问整个Samba服务器, 因此要求samba服务器中的任何共享都是非匿名访问的.\n问题3 Es文件管理器App访问linux上的Samba服务器时, 缺省是以匿名方式访问\n不会主动弹出登录信息窗口, 即使无法打开一个需要登录的共享时, 也不会主动弹出.\n这就需要手动设置Es的登录信息.\n这个问题和问题1有相关性.\n其他\n由于exfat是微软的文件格式, 没有用户权限信息, 避开了linux复杂的权限问题, 因此选择使用这种文件格式\n结论:\nop上的samba共享都需要设置成用户登录访问 Es访问时需要手动设置用户登录信息. Samba服务器的设置如下\n配置文件\nop上luci的缺省配置文件如下:\n[global]\nnetbios name = |NAME|\ninterfaces = |INTERFACES|\nserver string = |DESCRIPTION|\nunix charset = |CHARSET|\nworkgroup = |WORKGROUP|\n## This global parameter allows the Samba admin to limit what interfaces on a machine will serve SMB requests.\nbind interfaces only = yes\n## time for inactive connections to-be closed in minutes\ndeadtime = 15\n## disable core dumps\nenable core files = no\n## set security (auto, user, domain, ads)\nsecurity = user\n## This parameter controls whether a remote client is allowed or required to use SMB encryption.\n## It has different effects depending on whether the connection uses SMB1 or SMB2 and newer:\n## If the connection uses SMB1, then this option controls the use of a Samba-specific extension to the SMB protocol introduced in Samba 3.2 that makes use of the Unix extensions. server min protocol = NT1\nclient min protocol = NT1\n## If the connection uses SMB2 or newer, then this option controls the use of the SMB-level encryption that is supported in SMB version 3.0 and above and available in Windows 8 and newer.\n## (default/auto,desired,required,off)\n#smb encrypt = default\n## set invalid users\ninvalid users = root\n## map unknow users to guest\nmap to guest = Bad User\n## allow client access to accounts that have null passwords.\nnull passwords = yes\n## The old plaintext passdb backend. Some Samba features will not work if this passdb backend is used. (NOTE: enabled for size reasons)\n## (tdbsam,smbpasswd,ldapsam)\npassdb backend = smbpasswd\n## Set location of smbpasswd (\u0026lsquo;smbd -b\u0026rsquo; will show default compiled location)\n#smb passwd file = /etc/samba/smbpasswd\n## LAN/WAN options (IPTOS_LOWDELAY TCP_NODELAY) WAN (IPTOS_THROUGHPUT)\nsocket options = IPTOS_LOWDELAY TCP_NODELAY\n## If this integer parameter is set to a non-zero value, Samba will read from files asynchronously when the request size is bigger than this value.\n## Note that it happens only for non-chained and non-chaining reads and when not using write cache.\n## The only reasonable values for this parameter are 0 (no async I/O) and 1 (always do async I/O).\n## (1/0)\n#aio read size = 0\n#aio write size = 0\n## If Samba has been built with asynchronous I/O support, Samba will not wait until write requests are finished before returning the result to the client for files listed in this parameter.\n## Instead, Samba will immediately return that the write request has been finished successfully, no matter if the operation will succeed or not.\n## This might speed up clients without aio support, but is really dangerous, because data could be lost and files could be damaged.\n#aio write behind = /*.tmp/\n## lower CPU useage if supported and aio is disabled (aio read size = 0 ; aio write size = 0)\n## currently broken (NOTE: see https://bugzilla.samba.org/show_bug.cgi?id=14095 )\n## (no, yes)\n#use sendfile = yes\n## samba will behave as previous versions of Samba would and will fail the lock request immediately if the lock range cannot be obtained.\n#blocking locks = No\n## disable loading of all printcap printers by default (iprint, cups, lpstat)\nload printers = No\nprintcap name = /dev/null\n## Enabling this parameter will disable Samba\u0026rsquo;s support for the SPOOLSS set of MS-RPC\u0026rsquo;s.\ndisable spoolss = yes\n## This parameters controls how printer status information is interpreted on your system.\n## (BSD, AIX, LPRNG, PLP, SYSV, HPUX, QNX, SOFTQ)\nprinting = bsd\n## Disable that nmbd is acting as a WINS server for unknow netbios names\n#dns proxy = No\n## win/unix user mapping backend\n#idmap config * : backend = tdb\n## Allows the server name that is advertised through MDNS to be set to the hostname rather than the Samba NETBIOS name.\n## This allows an administrator to make Samba registered MDNS records match the case of the hostname rather than being in all capitals.\n## (netbios, mdns)\nmdns name = mdns\n## Clients that only support netbios won\u0026rsquo;t be able to see your samba server when netbios support is disabled.\n#disable netbios = Yes\n## Setting this value to no will cause nmbd never to become a local master browser.\n#local master = no\n## (auto, yes) If this is set to yes, on startup, nmbd will force an election, and it will have a slight advantage in winning the election. It is recommended that this parameter is used in conjunction with domain master = yes, so that nmbd can guarantee becoming a domain master.\n#preferred master = yes\n## (445 139) Specifies which ports the server should listen on for SMB traffic.\n## 139 is netbios/nmbd\n#smb ports = 445 139\n## This is a list of files and directories that are neither visible nor accessible.\n## Each entry in the list must be separated by a \u0026lsquo;/\u0026rsquo;, which allows spaces to be included in the entry. \u0026lsquo;*\u0026rsquo; and \u0026lsquo;?\u0026rsquo; can be used to specify multiple files or directories as in DOS wildcards.\nveto files = /Thumbs.db/.DS_Store/._.DS_Store/.apdisk/\n## If a directory that is to be deleted contains nothing but veto files this deletion will fail unless you also set the delete veto files parameter to yes.\ndelete veto files = yes\n################ Filesystem and creation rules ################\n## reported filesystem type (NTFS,Samba,FAT)\n#fstype = FAT\n## Allows a user who has write access to the file (by whatever means, including an ACL permission) to modify the permissions (including ACL) on it.\n#dos filemode = Yes\n## file/dir creating rules\n#create mask = 0666\n#directory mask = 0777\n#force group = root\n#force user = root\n#inherit owner = windows and unix\n################################################################\n这个配置文件只需要屏蔽 invalid users = root 这一句, 如下:\n#invalid users = root\n设置samba用户\n使用\u0026quot;在openwrt上新建一个可用的samba用户\u0026ldquo;的方法建立用户\n设置共享目录(补记: 可能是在Luci的界面里)\n按上图方式设置共享目录, 允许用户是刚才设置的smb用户.\n访问\nWin10正常访问.\nEs文件浏览器App在局域网里设置相应服务器的登录信息后就可以正常访问.\n读写都没有问题.\nEmuELEC2020春节整合版(s905) 被百毒封了 EmuELEC 3.3.1 2020春节整合版详细说明: https://www.bilibili.com/read/cv4420521/\n下载地址：\nEmuELEC2020春节整合版(s905) 被百毒封了 (访问码:nlp7) -\u0026gt; 已经转天翼云 需要的请下载@人中日月 基础包链接：https://pan.baidu.com/s/1s03OQf60qQCmH8dejykplw 提取码：g13u\n(三个增补包，分别是街机改版、ATOMISWAVE和NAOMI的整合包，需要自己另外根据EMUELEC使用指南里面的方法传到系统里。) 增量包链接：https://pan.baidu.com/s/17xkfIu-Wg1CzKAq9sGrXIw 提取码：zkdr 斐讯N1补丁包链接：https://pan.baidu.com/s/1RaNq2VaWiPvxX-4q2cjs1A 提取码：pty4 另外, 还有\nVol4增量包, 应该是FBN街机的 3.4版的更新包,更新emuelec到3.4 问题: openwrt的history只能看到当前连接的命令记录 原因: op缺省使用的是ash, 这个轻量化的shell就是这样，除非改用别的shell, 比如bash\n处理:\n安装bash\n# opkg update \u0026amp; opkg install bash\n设置用户使用bash\n# vim /etc/passwd\n修改相应用户的shell为bash，并保存退出。\n登出并重新登录后新的shell生效\n# echo $SHELL\n/bin/bash\n查看history\n# history\n应该能看到记录，登出再进，可以看到文件～/.bash_history(bash的history 记录文件)\n网络相关问题: 内网互联 frp 和 nginx 搭建一个内网穿透服务器\n网络结构: 外网nginx -\u0026gt; 外网frp server \u0026lt;-\u0026gt; 内网frp client -\u0026gt; 内网web\n内网渗透代理之frp的应用与改造（一）\n相关的FrpProPlugin\n(rinetd YYDS)socat居然比iptab效率高\n我映象比较深的就是 iptables frp nginx socat haproxy rinetd\n因为我是转发到rdp然后看油管，稍微卡顿都可以很明显的感觉出来。rinetd很流畅，haproxy和frp可以勉强用用，其它的都是战五渣。\n自认为比 frp 更好用的内网穿透工具 nps\n这里列举了一些比较好用的开源的内网穿透工具，详细介绍一下各个软件工具的特点：\nfrp\nFRP 功能完整，主要采用 GO 语言实现，重量级的工具，服务端界面样式风格一般。\n配置繁琐，不同的协议需要配置不同的参数，采用文件存放数据，不支持数据库管理数据。 holer\n轻量级的内网穿透工具，holer 服务端采用 Java 语言实现，服务端界面漂亮简洁。\nHoler 客户端采用了 Java 语言和 GO 语言实现了两种版本，支持几乎所有的 OS 平台。\n用到流行的微服务框架 springboot 和 Java 网络框架 netty。\n配置很简单，针对所有 TCP 协议只需在客户端设置一个 holer access key 即可。\n采用 MySQL 数据库统一管理数据。 nps\n轻量级的内网穿透工具，完全采用 GO 语言实现，服务端界面漂亮简洁。\n支持的协议最广泛，配置稍简单，采用文件存放数据，不支持数据库管理数据。 lanproxy\n轻量级的内网穿透工具，客户端采用 GO 语言和 Java 语言实现两种版本，采用了 Java 网络框架 netty，服务端界面体验较差。\n配置稍繁琐，采用文件存放数据，不支持数据库管理数据。 其他:\n内网穿透工具比较(ngrok,frp,lanproxy,goproxy,nps) 关于目前 GFW(墙) 的封锁方式TCP封锁(阻断)猜想 问题: ubuntu采用Docker官方shell安装时报错 报错信息如下:\n# curl -fsSL https://get.docker.com -o get-docker.sh\n# sh get-docker.sh\n# Executing docker install script, commit: 7cae5f8b0decc17d6571f9f52eb840fbc13b2737\n+ sh -c apt-get update -qq \u0026gt;/dev/null\nW: The repository \u0026lsquo;cdrom://Ubuntu-Server 16.04.6 LTS Xenial Xerus - Release amd64 (20190226) xenial Release\u0026rsquo; does not have a Release file.\nE: Failed to fetch cdrom://Ubuntu-Server 16.04.6 LTS Xenial Xerus - Release amd64 (20190226)/dists/xenial/main/binary-amd64/Packages Please use apt-cdrom to make this CD-ROM recognized by APT. apt-get update cannot be used to add new CD-ROMs\nE: Some index files failed to download. They have been ignored, or old ones used instead.\n错误处理, 操作如下:\n# vim /etc/apt/sources.list\n# 屏蔽掉有cdrom的那一行, 如下\n#deb cdrom:[Ubuntu-Server 16.04.6 LTS Xenial Xerus - Release amd64 (20190226)]/ xenial main restricted\n参考: 如何修复 apt-get update 无法添加新的 CD-ROM 的错误\n问题: Padavan路由作二级桥接无线路由时, 系统时间混乱的问题处理 状态: 配置了NTP同步, 但无效\n原因: 可能是没有配置WAN造成的\n处理:\n手动:\n# ntpd -t -p 192.168.1.1\n自动\n在\u0026quot;系统管理\u0026rdquo;-\u0026ldquo;服务\u0026quot;中修改\u0026quot;调度任务 (Crontab)\u0026rdquo;, 增加\n0 * * * * ntpd -t -p 192.168.1.1\n让系统每小时都做一次时间同步.\nLinux下, 以指定用户身份执行 例: # su - 用户名 -c \u0026ldquo;命令\u0026rdquo;\n如:\n# su - user -c \u0026ldquo;whoami\u0026rdquo;\nuser\n说明: 以用户user身份执行whoami, 返回的用户身份是\u0026quot;user\u0026quot;\n","date":"2021-04-03T22:57:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-29.jpg","permalink":"https://jimway71.github.io/p/qa/","title":"Q\u0026A"},{"content":"说明 联通(数码视讯)Q7盒子(以下简称Q7)做为一个电视盒子应该是没有什么可取之处, 但还可以做点别的, 比如, 做Openwrt盒子。\n恩山论坛的flippy大侠推出了\u0026ldquo;55+、55+O S905x3、S922x、贝壳云、我家云、微加云等OP固件\u0026rdquo;, 是基于amlogic(晶晨)的S9xx系列arm SOC的Openwrt固件, 现在支持包括基于amlogic(晶晨) S922x、S912、S905x、s905x2、S905x3、S905d等多款SOC的盒子。\n但是, flippy大侠的固件说明中, 并未明确指出对S905L的支持, 而Q7用的SOC是S905L。\n查到维基Amlogic说明中是这么说的:\nAmlogic S905L: 与S905X相似，不同之处在于它支持HDMI 2.0b，但缺少VP9解码，摄像头接口和TS输入。 按这种说法, S905L可能是和S905X差不多, 支持S905X应该就能支持S905L, 那么Q7就应该能用。\n推论如此, 然后在网上找到了一个实例, 恩山论坛的Len_大侠在\u0026ldquo;联通北京数码Q7,S905L电视盒刷成了openwrt系统路由器\u0026rdquo;贴子里, 明确说明他已经成功完成了将Q7刷上了Openwrt, 虽然没有详细说明, 但从帖子里可以看出来大概是怎么做的, 那么, 就跟随Len_大侠, 让Q7废物利用吧。\n为了简单化(偷懒😁), 选用的是使用外接存储(U盘或TF卡)启动Q7的方式。\nQ7自带TF卡槽, 这倒是为数不多的优点之一。\n补充 在Github上找了下flippy大侠的源码, 感觉应该是这个: lllrrr/mknop\ntuanqing/mknop这个肯定是分支。\n另外, flippy大侠还做了Docker Openwrt, 看看里面引用的内核源代码来源:\n内核源码来源说明(两个平*的内核都来自各自最活跃的上游发布者)\nAmlogic内核： https://github.com/150balbes/Amlogic_s905-kernel （5.3.0）\nRockchip内核: https://github.com/ayufan-rock64/linux-mainline-kernel/releases （5.3.0）\n公版内核补丁： https://kernel.org （当前最新5.3.6补丁）\nFullCone-Nat： netfilter-full-cone-nat + 952-net-conntrack-events-support-multiple-registrant.patch\n(来自openwrt源码)\nexfat: https://github.com/dorimanx/exfat-nofuse\nWireguard: https://git.zx2c4.com/WireGuard\n\u0026hellip;\u0026hellip;\n参考 \u0026ldquo;55+、55+O S905x3、S922x、贝壳云、我家云、微加云等OP固件\u0026rdquo; From flippy大侠\n\u0026ldquo;联通北京数码Q7,S905L电视盒刷成了openwrt系统路由器\u0026rdquo; From Len_\n所需工具及软件 说明: 可以使用U盘或TF卡启动, SD卡没准也可以。 这里使用的是TF卡。\n除了\u0026ldquo;联通(数码视讯)Q7电视盒子刷机成功, 但这Q7盒子是真的垃圾!\u0026rdquo;帖子中所用的工具及软件外, 还需要用到:\n4G或以上大小的TF卡 + 读卡器\n用于制做盒子启动盘(TF卡)。 镜像写入U盘工具\n用于把固件镜像文件写到TF卡里。\nWindows上这类工具很多, 选用的是USB Image Tool, 绿色软件, 不需要安装。 安卓调试工具ADB\n用于设置Q7从TF卡启动。 下载\u0026ldquo;55+、55+O S905x3、S922x、贝壳云、我家云、微加云等OP固件\u0026rdquo;文中所附的固件包。\n用的是目录\u0026quot;N1-Openwrt_U盘直刷包\u0026quot;下的最新固件包, 当前是:\n\u0026ldquo;openwrt_s905d_n1_R21.2.1_k5.4.105-flippy-55+o.7z\u0026rdquo;\n解开压缩文件, 其中\u0026quot;openwrt_s905d_n1_R21.2.1_k5.4.105-flippy-55+o.img\u0026quot;就是要用的固件包。 刷机流程 破解Q7\n按照\u0026ldquo;联通(数码视讯)Q7电视盒子刷机成功, 但这Q7盒子是真的垃圾!\u0026rdquo;帖子的做法, 破解Q7.\n按恩山论坛的Len_大侠的说法, \u0026ldquo;Q7需要刷过第三方固件才能确定能从卡和U盘启动\u0026rdquo;, 而Q7原厂固件无法确定能做到。\n打开Q7的USB调试功能。(大概操作, 跟安卓手机也差不多)\n正常打开Q7, 按正常方式使用遥控器操作, 进入\u0026quot;设置\u0026quot;(类似安卓的设置界面), 找到\u0026quot;关于设备\u0026quot;-\u0026ldquo;版本号\u0026rdquo;, 连续点击版本号很多次, 可能是十次, 也可能是七次, 试吧\u0026hellip;\n然后退回\u0026quot;设置\u0026quot;界面, 就出现\u0026quot;开发者选项\u0026quot;, 进去就可以找到\u0026quot;USB调试\u0026quot;, 然后打开\u0026quot;USB调试\u0026quot;。\n制作启动TF卡\n选择镜像文件\n按Len_大侠的说法, 在目录\u0026quot;N1-Openwrt_U盘直刷包\u0026quot;下的包都可以刷, 选了最新的55+o版本, 文件是\u0026quot;openwrt_s905d_n1_R21.2.1_k5.4.105-flippy-55+o.7z\u0026quot;, 解压出\u0026quot;openwrt_s905d_n1_R21.2.1_k5.4.105-flippy-55+o.img\u0026quot;文件。 用镜像写入U盘工具USB Image Tool把img文件写到TF卡里 修改TF卡根目录下的\u0026quot;uEnv.txt\u0026quot;文件, 如下图:\n即FDT要改为p212这个dtb文件(这个文件要确认在tf卡相应的目录下存在) 把TF卡插入到Q7的TF卡槽中, 使用ADB工具, 设置Q7从TF卡启动\n连接Q7:~~\n# adb connect Q7地址\n查看连接状态:\n# adb devices\n重启Q7, 并设置成用cf卡或U盘等外围存储设备启动\n# adb shell reboot update\n(上面这个命令需要确认)\n正常的话, 会重新从TF卡启动系统。\n从做好的TF卡启动盒子\n正常启动盒子, 进入电视盒子界面.\n下载\u0026ldquo;Reboot to LibreELEC\u0026rdquo;, 这个apk设置系统首先从外部存储设备启动, 比如TF卡, 或者U盘.\n在盒子的界面上, 安装\u0026ldquo;Reboot to LibreELEC\u0026rdquo;这个应用, 安装完成后运行这个APK, 并选择\u0026quot;ok\u0026quot;\n正常情况下, 如果有外置存储设备可以启动, 则从外置存储设备启动,否则从内部的存储设备启动.\n比如, 插入了刷好固件的TF卡, 就会从TF卡启动, 运行openwrt; 如果没有, 就正常启动, 进入电视盒子界面.\n但是, Q7这个盒子比较奇葩, 如果设置好了能从TF卡启动, 那么就只能从TF卡启动, 不插TF卡时会死在第一屏界面.\n把系统安装到内部存储\n系统里有提供安装工具(shell), 是/root/install-to-emmc.sh\n如果有需要可以使用这个shell将系统装入内部存储\n完成后启动Openwrt 使用tf卡启动, 成功地在Q7上运行了openwrt.\nopenwrt缺省地址: 192.168.1.1, 缺省用户/密码: root/password\n但是:\n不能设置wifi\n可能是无线网卡不能正常驱动。 使用图片 补充: 关于移动魔百盒R3300L(红)\n可以使用给Q7做的启动盘(TF卡)启动.\n用\u0026ldquo;Reboot to LibreELEC\u0026rdquo;可以正常工作, 插卡从卡启动, 不插卡正常启动.\n用CoreMark测试分数比Q7略低, 差得并不多.\nR3300L和Q7内部配置基本一致，甚至包括芯片组: 相同的CPU, 相同的wifi芯片, 相同的内存+存储配置, 壳子都是卡扣结构, 都能从usb口给盒子供电，不受电源开关控制, 都有tf卡槽。 其他 关于TF卡的大小\n前面说过, TF卡要\u0026gt;4G。\n但是, 从使用情况看，TF卡仅有不到1G的空间分给了Openwrt要用的两个分区, 其中有一个是启动分区, 其它的空间都是空的。\n所以, 估计1G的TF卡也都能用。\n关于Q7的供电\n帖子\u0026ldquo;联通(数码视讯)Q7电视盒子刷机成功, 但这Q7盒子是真的垃圾!\u0026rdquo;里面说过, Q7可以直接用USB端口的供电启动, 所以可以从别的设备的USB给Q7供电, 至少还可以少占一个电源插座。\nCPUMark 测速\n命令如下:\n# /etc/coremark.sh\n测速完成后, 在Luci管理界面, \u0026ldquo;状态\u0026rdquo;-\u0026ldquo;概览\u0026quot;里可以看到CpuMark值\n再补充 - 关于网络共享服务 Openwrt中有提供多种网络存储服务, 包括Samba/NFS/miniDLNA/可道云/微力同步等多种相关功能。\n在给Q7刷Openwrt后, 还通过配置Samba+miniDLNA, 设置了一个简单的网络共享服务+多媒体服务\n设置Sabmba服务\n操作如下:\nLuci界面-网络存储-\u0026ldquo;Samba\u0026rdquo;-\u0026ldquo;编辑模板\u0026quot;里改配置文件(没搞懂原因), 关掉\u0026quot;invalid users = root\u0026quot;这行\n## set invalid users\n#invalid users = root\n设置共享目录\n设置如图:\n现象:\n用手机上有EsExplorer连接上后(当前也就只有手机能连上), 看不到共享的文件目录\n原因: 管理界面里共享目录的设置并没有生效, 还是需要手动修改配置文件\u0026rdquo;/etc/samba/smb.conf\u0026quot;进行设置(已确认重启后有效)\n但是, \u0026ldquo;Samba\u0026rdquo;-\u0026ldquo;编辑模板\u0026quot;却是有效的, 而且进入linux界面操作, 直接修改/etc/samba/smb.conf的相应内容却无效!~~~ 必须使用管理界面的\u0026quot;编译模板\u0026quot;进行修改!\n即: 改模板必须在\u0026quot;Samba\u0026rdquo;-\u0026ldquo;编辑模板\u0026quot;里, 改共享目录配置必须直接改\u0026rdquo;/etc/samba/smb.conf\u0026quot;文件\n处理:\n# vim /etc/samba/smb.conf\n在文件最后面增加如下配置:\n[Udisk]\npath = /mnt/mmcblk1p3\ncreate mask = 0777\nread only = no\nguest ok = yes\n如图所示:\n然后重启samba服务:\n# service samba4 restart\n用smbclient查看共享的情况:\n# smbclient -L 192.168.1.206\n会看到已经成功共享, 如图:\n注意:\n还需要对共享出的根目录权限做设置, 才能有读写全部权限\n# chmod 0777 /mnt/mmcblk1p3\n设置miniDLNA\n在X信电视上发现X信的媒体中心支持DLNA, 而Q7上的Openwrt里, \u0026ldquo;网络存储\u0026quot;下是有miniDLNA服务, 设置比较简单, 基本上是设置下目录, 打开功能就可以了。\n经过测试, 在X信电视上用自带的媒体中心可以播放视频、音频、图片等多种媒体, 还可以关屏幕播放mp3音乐。\nBut\u0026hellip;到最后, 重启Q7后, openwrt的Luci界面出错了, 进不了管理界面, 就此, 折腾Q7告一段落。 总结: Openwrt的SAMBA功能大致能用, miniDLNA功能也没问题, 都可以用。\n","date":"2021-03-15T00:49:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-27.jpg","permalink":"https://jimway71.github.io/p/%E8%81%94%E9%80%9A%E6%95%B0%E7%A0%81%E8%A7%86%E8%AE%AFq7%E7%9B%92%E5%AD%90%E5%86%8D%E5%88%B7openwrt/","title":"联通(数码视讯)Q7盒子再刷Openwrt"},{"content":"折腾电视盒子 在斐讯N1盒子上刷入Linux系统代替树莓派做小型服务器 知乎: 在斐讯N1盒子上刷入Linux系统代替树莓派做小型服务器\nR3300L运行CoreELEC, EmuELEC和Armbian 百视通R3300L刷写固件及EMUELEC shmily: 百视通R3300L刷写固件及EMUELEC\n","date":"2021-03-07T11:11:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-26.jpg","permalink":"https://jimway71.github.io/p/%E5%85%B3%E4%BA%8E%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%88%B7%E6%9C%BA%E7%9A%84%E5%A5%BD%E8%B4%B4%E6%94%B6%E9%9B%86/","title":"关于电视盒子刷机的好贴收集"},{"content":"参考: U盘刷机 使用U盘刷机\n参考: 【潜龙定制】CM201-2(mv300H,310,300-emmc,nand)语音强刷固件201910\n● 难度: 极低\n● 所需工具及软件: U盘+刷机文件(一共4个文件)\n● 是否需要拆机: 不需要 _ 如果知道盒子准确类型的话。\n● 结果: 完全重刷盒子固件。\n● 注意点: 需要区分盒子闪存是EMMC还是NAND。 4文件中个有3个文件不一样, 对应不同的闪存。\n● 操作: 把4个文件拷到U盘根目录, U盘插到cm201-2盒子:\n如果是开机状态, 电视上会显示找到新的系统需要升级; 如果是关机状态, 开机即自动刷机。\nTTL连接刷机 使用TTL连上盒子, 进入内部系统(linux), 把需要的apk应用装进系统。\n参考: 江苏移动魔百和cm201-2拆机ttl安装软件教程\n● 难度: 略高\n● 所需要工具及软件:\nU盘 需要安装的apk 排针、烙铁、焊锡等 万用表 USB转TTL模块，连接线 拆机工具 ● 是否需要拆机: 需要\n● 结果: 未对盒子底层系统做修改, 仅安装了几个apk。\n选用的是TTL连接盒子的方式。\n破解方法 破解方法很多:\n● 不拆机破解\n这是利用系统漏洞破解, 通过漏洞是装上可以装App的市场或其他工具。\n● 更新固件刷机\n刷入自制的系统, 除了硬件没变, 原系统的固件都没有了。\n因为移动魔百和CM201的型号极其杂乱, 各地移动公司都有出, 不同厂家代工, 另外不同年份出的盒子硬件都有不同, 同款盒子还有闪存不同, 所以这种方式需要区分型号后, 再找相应的刷机固件。\n↑ 同款板子使用不同类型闪存\n● TTL连接进入底层系统刷机\n板子上有TTL接口, 手上又有相应的工具材料的话, 这倒是最简单的一种破解方法, 因为通过TTL连进系统后, 就有了全部权限(root用户)。\n关于移动魔百和CM201 移动魔百和CM201从型号上分大概有cm201s、cm201-1、 cm201-2等等, 代工方有朝歌、长虹、易视腾等等, 外观倒差不多, 都是一个小黑盒子。\n↑ 这块板子上有TTL接口，但没有插针, 也没有标注针脚定义\n刷机过程 硬件准备 ● 给板子的TTL接口焊上排针\n● 用排线连接板子上TTL针脚和USB转TTL模块，连接如下:\n(收发对倒连接) 板上脚标 - 模块脚标 GND - GND RX - TX TX - RX ● TTL模块插入电脑USB口\n在电脑\u0026quot;设备管理器\u0026quot;-\u0026ldquo;端口\u0026quot;里找到com端口(comx) —— 这个端口号在后面设置电脑上putty连接盒子时要用到， \u0026ldquo;属性\u0026rdquo;-\u0026ldquo;端口设置\u0026rdquo;-\u0026ldquo;位/秒(B)\u0026quot;(波特率), 改为115200。\n抄个图过来↓\n软件准备 ● 准备要安装的应用\n一定要有一个桌面应用, 比如当贝桌面;\n一定要有一个可以做安装的app, 比如市场应用(比如蚂蚁市场), 或者是一个文件管理器, 比如File Manager, 文件管理器也可以安装apk应用。\n把想要安装的apk包拷到一个U盘的根目录里, 插到盒子的USB口上\n● 设置电脑和盒子的连接。\n设置使用putty连接。\nputty官网下载地址在这。\n可以用来做串口连接的软件很多, 比如securecrt等等, 不过putty是免费软件, 也不需要注册什么的, 安装使用上比较方便。\n打开putty, 按图中的提示设置。下面这个图也是抄的\u0026hellip;\u0026hellip; ↓\n先选择连接方式(Connection type)为串口连接(Serial), 再选择串口号(Serial line), 串口号是前面的\u0026quot;设备管理器\u0026quot;里找到的com端口，波特率(Speed)填115200(和前面的Com口波特率一致)。\n接着点击Open开始连接，然后给盒子开机，连接正确的话, 盒子开机后, putty上会显示盒子的输出信息, 是个linux的终端界面(Console界面)。\n安装apk应用, 修改界面 在putty的连接界面上，输入命令执行操作。\n首先要确认下U盘的目录名, 了解linux的应该知道, 外挂的盘一般会加载到/mnt目录下, 一般而言, U盘会加载到\u0026rdquo;/mnt/sda/sda1\u0026quot;目录下, 用ls命令可以确认是否正确\n# ls /mnt/sda/sda1/ -la\n如果正确, 则进入U盘根目录\n# cd /mnt/sda/sda1/\n把apk包拷贝到\u0026rdquo;/usr/app/\u0026ldquo;目录下, 即完成apk包的安装\n# cp *.apk /usr/app/\n启动当贝桌面\n# am start com.dangbei.tvlauncher\n安装完成。\n## 实际和现实总有差距!\n因为把U盘刷机的4个文件也拷到了U盘根目录下, 盒子开机后提示有更新, 因为连着网络, 还以为是在线更新, 没理。\n后来重启盒子后, 盒子就直接开始更新, 这时也不敢停, 怕刷一半给刷成砖了。\n等刷完了, 也退不回去了, 没有官方固件。\n更新完成后重启, 看到的已经是另一幅模样了, 不过通过TTL拷进去的几个应用都在, 两种方法齐上, 搞成了混合刷机。\n从系统管理菜单里恢复出厂后(密码:10086), 又重做了一遍, 这回没出问题。\n测试 也没怎么测, 系统用着没问题, 遥控没问题, 操作反应够快, 应用运行也够快。\n用speedtest测了下网速, 使用wifi连接的情况下, 可以到80Mbps左右, 速度也还可以。\n迁移补记 于 2022.8.23 ● 最近一次查看这部CM201-2盒子时, 发现又回到了类似初始的状态, 已经不是能自定义的桌面, 应该是系统再次自动更新, 又回到未刷机的状态。\n● 近期在论坛上看到有大神将Armbian移植到基于海思Hi3798芯片的多种电视盒子, 包括CM201-2盒子, 有时间可以try.\n打造最强华为海思hi3798mv100/200/300机顶盒NAS服务器系统 rk322x armbian 移植hi3798 mv100, 其中:\n百度云共享, 提取码：slkc 移动魔百和cm201-1-ys刷armbian 还有Armbian For S9xxx的Github链接:\namlogic-s9xxx-armbian Hixxxx support for Linux Kernel 代码现在看着都有了:\nHiSTBLinuxKernel torvalds linux 另:\nhi3798可适配机型维护参考, From 海思机顶盒NAS社区 ","date":"2021-03-06T16:14:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-25.jpg","permalink":"https://jimway71.github.io/p/%E5%86%8D%E5%88%B7%E7%A7%BB%E5%8A%A8%E9%AD%94%E7%99%BE%E5%92%8Ccm201-2%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90/","title":"再刷移动魔百和CM201-2电视盒子"},{"content":"关于联通Q7电视盒子 Q7配置如下:\nUSB BOOT孔(红圈内两个孔): 刷机时需要短接\n破解方式 联通(数码视讯)Q7(以下简称Q7)有很多种破解方式:\n➀ 不拆机破解: 主要通过漏洞是装上可以装App的市场或其他工具\n➁ TTL破解: 连接TTL线，通过进入底层系统打开adb调试, 再通过其它工具安装App,\n参考: 北京联通盒子-数码视讯Q7-破解\n或者在底层的Linux系统里直接安装App.\n➂ 使用USB Burn方式刷机: 直接刷成别的系统，\n参考: 【2020年11月】北京联通数码视讯Q7破解教程\n最后用的是方式➂进行刷机。\n相关的包下载地址:\no 刷机固件:\n链接：https://pan.baidu.com/s/18ukQVyQiScAeQPCReoBr0Q 提取码：yp6t\n使用其中的压缩包: 20191218-Q7-4.4.2-root-twrp-Milton.rar\no 遥控器文件:\n压缩包: 北京联通数码视讯Q7.rar\n在上面链接的固件里找。\no 刷机软件USB Burn Tool\n刷机过程 ➀ 拆机\nQ7盒子外壳是用卡扣固定, 而非螺丝，用改锥插入盒子外壳边缘撬开。\n板子上有螺丝固定, 需要拆掉。\n➁ 刷机\n用双公头USB线连接盒子(板子中间的USB口)和电脑的USB口。\nUSB连上后，电脑在开机状态时，会给盒子供电，盒子会开机运行 (即Q7这个盒子可以直接从USB口供电，即使没接电源，或者接了电源没按下开电源开关也能正常开机运行)。\n刷机流程:\n➀ 先打开开Ami USB Burn Tool软件, 导入镜像文件后，按开始按键:\n➁ 短接板子USB BOOT那两个触点后, 用双头USB线连接盒子和电脑, 这时盒子上的灯会亮, 但HDMI没有输出(电视不会有显示), USB Burn Tools软件上会显示找到设备并开始刷入固件, 这时保持USB BOOT触点的短接。\n➂ 等到刷过 \u0026ldquo;4% 加载UBOOT\u0026rdquo; 后, 断开短接的USB BOOT触点，再等待刷机到100%\n刷机完成。\n刷机流程可参考: 北京联通数码视讯q7 刷 安卓6.0+遥控器文件教程\n另: 刷机所用软件\u0026quot;Ami USB Burn Tool\u0026quot;不能在Win10上使用, Win7上使用没问题:\n刷机时, 先用的是工作机操作, 发现USB Burn Tool软件找不到设备, 后来换了一台旧电脑就可以了 _ 旧电脑是Win7系统, 而工作机装的是Win10.\n刷机完成后的测试 ➀ 开机界面\n这样:\n和这样:\n很差点意思!\n➁ CpuZ测试\n➂ 网络测速\n测试方式: 在浏览器里打开speedtest进行测试\n使用wifi连接(Q7只支持2.4G频段的wifi)\n而在同样网络下, 同样使用Wifi连接的一台电视, 同样也只支持2.4G的wifi, 是这样的\n总结 Q7明显的慢, 打开App明显慢也就算了, 居然有的App里连视频都打不开, 不行, 非常差。\n这盒子很垃圾, 用的居然还是2.4G无线网卡和百兆有线网卡, 用wifi连接, 网速根本跑不上去, 高清视频看着非常卡。\n除了S905L这颗芯还凑合能用, 这个盒子其它没有什么可取之处！\n(后话, 做电视盒子不行, 干别的活还不错)\n","date":"2021-03-02T17:17:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-24.jpg","permalink":"https://jimway71.github.io/p/%E8%81%94%E9%80%9A%E6%95%B0%E7%A0%81%E8%A7%86%E8%AE%AFq7%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%88%B7%E6%9C%BA%E6%88%90%E5%8A%9F-%E4%BD%86%E8%BF%99q7%E7%9B%92%E5%AD%90%E6%98%AF%E7%9C%9F%E7%9A%84%E5%9E%83%E5%9C%BE/","title":"联通(数码视讯)Q7电视盒子刷机成功, 但这Q7盒子是真的垃圾"},{"content":"2019年由于美国政府封杀华为，在政策要求下, 谷歌不再给华为提供GMS许可。\n而在这之前，由于中国政府封杀谷歌, 国行版本手机都是没有安装谷歌Play Store的, 包括华为手机。\n但是谷歌服务框架, 即GMS, 在华为手机上是安装好的。只需要从华为应用商店简单的下载安装谷歌Play Store, 就可以正常使用谷歌的服务及其应用。\n在谷歌不再给华为提供GMS许可之后, 华为官方就不在其生产的手机上安装谷歌相应的服务和应用, 包括国行版本和非国行版本。\n华为在国行手机上不提供谷歌服务影响不大，毕竟谷歌在国内被封杀多年, 还能使用谷歌服务的用户并不太多; 但是, 国外安卓用户对谷歌服务有着相当大的依赖性, 手机上不能提供谷歌服务对多数国外用户而言, 基本上是无法使用的。\n为此, 华为也想过一些方法: 这之后不久, 有一个lzplay网站横空出世, 为华为手机安装GMS提供支持, 但之后不久, 这个网站又突然消失了。\n这段故事我也是在寻找在P40pro上安装GMS的方法时才知道一点，由于当时并没有关注, 具体情况也不清楚。\n这之后，在网上找到的安装GMS方法基本上都是个人提供的, 但跟lzplay都存在一定的关系。\n为了给一部华为P40 pro安装GMS, 前后大概花了一个月时间, 找了好几个教程, 失败了很多次, 失败的原因也是多种多样, 有:\na. 不能同步通讯录(最后一次, 更换另一个人提供的Google Contact Sync后解决)\nb. 设置谷歌帐户时, 似乎网络连不上, 但用浏览器看, 却又能正常访问谷歌(有时重新启动后能解决)\n\u0026hellip;\u0026hellip;\n找了很多攻略, 国内的国外的, 试了各种方式, 花了不少时间, 并没有找到一个完美方案。\n最后, 把华为手机处理了事, 完美的结局☻\n","date":"2020-06-26T16:52:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-23.jpg","permalink":"https://jimway71.github.io/p/%E5%8D%8E%E4%B8%BAp40-pro%E5%AE%89%E8%A3%85%E8%B0%B7%E6%AD%8Cgms-%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E5%90%8C%E6%AD%A5%E9%80%9A%E8%AE%AF%E5%BD%95-%E5%85%B6%E5%AE%83%E5%8A%9F%E8%83%BD%E9%83%BD%E8%83%BD%E6%AD%A3%E5%B8%B8%E8%BF%90%E8%A1%8C-%E4%B8%94%E4%B8%8D%E6%8A%A5%E9%94%99/","title":"华为P40 pro安装谷歌GMS, 可以正常同步通讯录, 其它功能都能正常运行, 且不报错"},{"content":"2020.6.1\nOpenwrt编译命令汇总: 开始编译:\n1 2 3 4 5 6 7 8 9 $ sudo apt-get update $ sudo apt-get -y install build-essential asciidoc binutils bzip2 gawk gettext git libncurses5-dev libz-dev patch python3.5 python2.7 unzip zlib1g-dev lib32gcc1 libc6-dev-i386 subversion flex uglifyjs git-core gcc-multilib p7zip p7zip-full msmtp libssl-dev texinfo libglib2.0-dev xmlto qemu-utils upx libelf-dev autoconf automake libtool autopoint device-tree-compiler g++-multilib antlr3 gperf wget $ git clone https://github.com/coolsnowwolf/lede $ cd ./lede $ vim feeds.conf.default $ ./scripts/feeds update -a $ ./scripts/feeds install -a $ make menuconfig 在make menuconfig中:\n选择: MediaTek Ralink MIPS / MT7620 based boards /Phicomm PSG128 rev.Ax\u0026quot;\n选择: Luci _ Application _ SSR PLUS\u0026hellip;\u0026quot;\n说明: 斐讯K2路由器, CPU型号为MT7620, 芯片架构为MIPS, 路由器型号为PSG1218 rev.Ax; K1 是 PSG1208,K2 是 PSG1218 rev.Ax, K2C是PSG1218 rev.Bx\n1 2 3 Target system -\u0026gt; MediaTek Ralink MIPS Subtarget -\u0026gt; MT7620 based boards Target Profile -\u0026gt; Phicomm PSG128 rev.Ax 继续编译:\n1 2 $ make -j8 download V=s $ make -j15 V=s 由于空间不够，luci-\u0026gt;application留下：\n1 2 3 4 5 6 7 8 9 10 11 12 accesscontrol - adbyby-plus arpbind autoreboot - ddns firewall flowoffload - nlbwmon 流量监控 ramfree ssr_plus + trojan upnp (因为不能保存配置, 再去掉IPV6支持) 不知道为什么, 内网的网段(ip)不能成功修改, 每次改过后, 路由就不能保存(或者会丢失)修改的内容: 需要在编译的时候就改掉这个地址。\n位于: ./package/base-files/files/bin/config_generate\n在make menuconfig完成后修改\n关于用WSL代替虚拟机运行Ubuntu:\n当前WSL上Ubuntu最早版本是18.04LTS(16.04LTS已经没有了)，最新的是20.04LTS\n用WSL比较简单, 不用费劲去安装, 但移动虚拟机会很麻烦。这个问题可以参考:\n在系统重置或重新安装之前，如何备份（WSL）Windows 10的Linux子系统: Windows 10 v1903 包含内置的WSL导出/导入命令。具体来说，wsl \u0026ndash;export会产生tar和wsl \u0026ndash;import，并会导入先前导出的tar。然后，您可以在计算机之间移动此文件。 您还可以使用指定stdin / stdout -，这应允许您直接转移到另一台计算机并使用远程shell（如）导入ssh。\n错误处理: 1 sudo apt-get install gcc-multilib g++-multilib\n原因：type_traits:38:10: fatal error: bits/c++config.h: No such file or directory\n参考: https://stackoverflow.com/questions/4643197/missing-include-bits-cconfig-h-when-cross-compiling-64-bit-program-on-32-bit\n2 sudo apt install qtchooser\n原因: File \u0026ldquo;/usr/lib/python2.7/subprocess.py\u0026rdquo;, line 1047, in _execute_child\n参考: https://github.com/kovidgoyal/build-calibre/issues/9\n编译时长记录: 在Google云主机(e2-standard-8（8 个 vCPU，32 GB 内存), 30GSSD硬盘, Ubuntu 16.04)上完成，最后编译用了7个线程，总共用时不到1小时 参考: 编译更新OpenWrt PassWall和SSR-plus插件 From mianao Lean 的 Openwrt 源码仓库 ","date":"2020-06-01T01:06:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-22.jpg","permalink":"https://jimway71.github.io/p/wsl%E4%B8%8B%E7%BC%96%E8%AF%91lede%E7%9A%84openwrt-%E7%94%A8%E4%BA%8E%E6%96%90%E8%AE%AFk2/","title":"WSL下编译LEDE的openwrt, 用于斐讯K2"},{"content":"抄自: kischang 的 \u0026ldquo;2020高清稳定快速的电视直播源,支持在线更新,支持电视指南\u0026quot;(已404)\n首先感谢两个数据源：\n第一个：提供直播地址的服务：\n产品大师：http://www.chanpindashi.com/2020/01/18/2655.html\n本服务从此地址获取基础的直播地址。\n第二个：电视指南\n51zmt： http://epg.51zmt.top:8000\n工作逻辑说明：\n从直播地址源中获取基础的直播地址，解析处理后，发给电视指南，解析出对应的台标和指南对应关系，然后恢复到第一个源中的分组和台名信息。\n可以直接在 Jellyfin 中配置使用。\n最终的访问地址：http://kischang.top:8080/main/tv.m3u\n本服务缓存了配置，每隔 3 天自动更新，如果发现数据出错，您也可以自行触发清空缓存的动作：http://kischang.top:8080/main/re_gen\n不要总触发清空，毕竟每次更新都要占用数据源的服务器资源。\n源码地址：https://github.com/kisChang/tvm3u\n侵删\n","date":"2020-03-06T01:31:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-21.jpg","permalink":"https://jimway71.github.io/p/%E7%94%B5%E8%A7%86%E7%9B%B4%E6%92%AD%E6%BA%90/","title":"电视直播源"},{"content":"说明: 在安卓手机上测试成功，苹果手机应该也可以。\n用了两年的这部三星手机上, 谷歌地图一直不能显示地点的照片和评价信息，一直以为是港行手机刷国行ROM造成的(在谷歌Play里, \u0026ldquo;Play保护机制认证\u0026ldquo;显示\u0026rdquo;设备未通过认证\u0026quot;)，也曾经找了些法子试着处理，但一直都没成功。\n今天突然发现备用的另一部国外版本Rom手机上, 谷歌地图居然也不显示地点照片和评价信息，而在谷歌Play里, \u0026ldquo;Play保护机制认证\u0026ldquo;显示为\u0026rdquo;设备已通过认证\u0026rdquo;, 那这个问题就跟设备认证没关系了。\n那是什么原因造成的呢? 上网搜到知乎的一个问答: \u0026ldquo;如何在大陆使用 Google Maps 的地点评价功能?\u0026rdquo;, 里面有不只一个人提到 \u0026ldquo;要取出(中国运营商的)SIM卡\u0026rdquo;, 那就试试吧。\n手上刚好有一张外国sim卡, 于是操作方式就成了:\n1.清除谷歌地图数据, 删除谷歌地图(或删除谷歌地图升级)\n2.关机, 取出\u0026quot;中国运营商的SIM卡\u0026rdquo;, 插入外国SIM卡\n3.开机, 重装谷歌地图\n4.测试\n完成后, 两部手机都能看到地点照片和评价信息, 问题解决了, 菜单里\u0026quot;您的时间轴\u0026quot;也出现了, 以前这个也没有。\n在上面这个知乎问答里，有人提到要\u0026quot;在没插sim卡的时候，把各种谷歌的功能都先打开\u0026quot;, 看来谷歌的各种服务对\u0026quot;(中国运营商的)SIM卡\u0026ldquo;很敏感, 以后给手机装系统需要记住这一点。\n","date":"2020-03-05T02:33:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-17.jpg","permalink":"https://jimway71.github.io/p/%E8%B0%B7%E6%AD%8C%E5%9C%B0%E5%9B%BEapp%E4%B8%8D%E6%98%BE%E7%A4%BA%E5%9C%B0%E7%82%B9%E7%85%A7%E7%89%87%E8%AF%84%E4%BB%B7%E7%AD%89%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/","title":"谷歌地图App不显示地点照片、评价等信息的解决方法"},{"content":"问题:\n在Macbook pro上装了windows 10后, 访问家里的NAS一直是正常的。\n有一天, 突然访问不了, 报错是: windows无法访问xxx(NAS); 详细信息里的错误代码是0x80004005\n但是, 在其他的电脑上(Macbook+Thinkpad x230)和手机上(三星S9+Nubia Z11minis)都能正常访问\n处理:\n在网上查报错的信息, 试了几种法子, 都没有解决\n过了很久了, 也没什么法子, 只好重装机器\n备份数据 \u0026hellip;\u0026hellip;\n先想是把机器恢复到初始状态\n恢复完成后, 还是不能访问NAS(奇怪? 但也没多想)\n找出以前给这台机器装windows10时做的BootCamp的win10安装U盘和驱动U盘, Win10版本应该是1809\n回到Mac系统里, 删除BootCamp分区, 再从BootCamp里重新分区装windows10系统\n装完系统再装驱动, 再试, 依然不能访问NAS\n奇怪? 上次装完系统后, 肯定是能访问NAS的!\n再去网上搜索, 终于找到一篇\u0026quot;windows 10无法访问其它系统或Nas共享的samba共享目录的解决办法\u0026quot;, 其中说道:\n问题的原因是: \u0026ldquo;造成新版Win10无法连接SAMBA网络共享的原因是，Win10强制屏蔽了不安全的samba v1和v2协议\u0026rdquo;\n解决的方法是: \u0026ldquo;控制面板-程序-程序和功能-启用或关闭windows功能，开启（勾选）SMB 1.0/CIFS文件共享支持\u0026rdquo;\n按这个方法操作, 问题解决.\nSo easy\n原因再分析: 微软考虑到安全原因关闭了旧的SMB协议, 但是我家里的NAS只支持旧的SMB协议, 所以不能访问.\n优化: 只打开SMB 1.0/CIFS客户端\nMBP上装的这个win10版本(1709)的\u0026quot;启动或或关闭windows功能\u0026quot;中, \u0026ldquo;SMB 1.0/CIFS文件共享支持\u0026quot;项目下打开有三项, 分别是:\nSMB 1.0/CIFS服务器\nSMB 1.0/CIFS客户端\nSMB 1.0/CIFS自动删除\n只要打开\u0026quot;SMB 1.0/CIFS客户端\u0026quot;就可以了, 关掉其它两项.\n经测试, 可以正常访问NAS\n","date":"2020-03-05T01:53:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-16.jpg","permalink":"https://jimway71.github.io/p/windows-10%E7%89%88%E6%9C%AC1709%E4%B8%8D%E8%83%BD%E8%AE%BF%E9%97%AEnas%E7%9A%84%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90%E5%8F%8A%E5%A4%84%E7%90%86/","title":"Windows 10(版本1709)不能访问NAS的原因分析及处理"},{"content":"简单说明:\n系统: Ubuntu 18.04 LTS。\na.安装: V2RAY mKCP+dtls, AAAA; ss: BBBB; brook: CCCC。\nb.(V2ray安装的)shadowsocks改用了新的加密方式(AHEAD: chacha20-ietf-poly1305), 以避免被GFW检测到\n终端软件上, 不再使用单独的shadowsocks终端, 而改用v2ray终端(包含shadowsocks终端)\n电脑上使用V2rayN, 安卓手机上使用BifrostV\n在Ubuntu Server 18.04版上进行安装\n0.确认unzip已安装(可以直接运行unzip)\n如果没有安装, 用下面命令装(如果unzip没有安装, 会自动提示这条命令)\n# sudo apt install unzip\n1.V2RAY+ss(单端口)安装, 再+BBR\nV2RAY一键安装\n选择:\nV2RAY ~ 协议 mKCP_dtls, 端口 AAAA\nss 和原来一样\nhttps://ssr.tools/1026 安装时, BBR自己就装上了\n使用233版V2ray一键安装脚本(集成BBR/锐速/Shadowsocks):\nbash \u0026lt;(curl -s -L https://git.io/v2ray.sh) 2.Brook安装\n参考\nhttps://doub.io/brook-jc1/\n1)下载\n# mkdir /root/brook/\n# cd /root/brook/\n最新版本地址: https://github.com/txthinking/brook#download\n# wget -N \u0026ndash;no-check-certificate \u0026ldquo;https://github.com/txthinking/brook/releases/download/v20200201/brook\"\n# chmod +x brook\n2)启动\n# nohup ./brook server -l :CCCC-p passwd \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 \u0026amp;\n3)防火墙\n[ 现在没开云服务器ubuntu自身的防火墙iptable/ufw\n# sudo ufw allow CCCC\n]\n云的防火墙也要打开\n4)开机自启动\n由于ubuntu 18.04的变化, 原rc.local初始不再有效, 需要处理, 参考:\nUbuntu 18.04 rc.local systemd设置\nhttps://blog.csdn.net/zhengchaooo/article/details/80202599\n命令如下:\n# ln -fs /lib/systemd/system/rc-local.service /etc/systemd/system/rc-local.service\n# touch /etc/rc.local\n# chmod 755 /etc/rc.local\n并在/etc/rc.local第一行加上下面这行:\n#!/bin/bash\n后面一样\n参考\nhttp://blog.csdn.net/fireroll/article/details/15503463\n放在/etc/rc.local里\n加入:\nnohup /root/brook/brook server -l :CCCC-p passwd \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 \u0026amp;\n注意brook所在目录\n3.谷歌云防火墙开端口(需要打开相应端口的tcp/udp端口)\n4.本机ubuntu防火墙(ufw/iptables)不开\n5.设置时区\nhttp://www.cnblogs.com/h2appy/archive/2008/11/27/1342029.html\ntzselect\n6.定时关机\ncron里的时间是标准时间(GMT)\nhttp://www.cnblogs.com/peida/archive/2013/01/08/2850483.html\ncron任务分两类, 系统任务_在/etc/crontab里; 用户任务_在/var/spool/cron/crontabs/里\ncrontab -e是编辑用户任务, crontab -l是显示用户任务.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # cat /etc/crontab # /etc/crontab: system-wide crontab # Unlike any other crontab you don\u0026#39;t have to run the `crontab\u0026#39; # command to install the new version when you edit this file # and files in /etc/cron.d. These files also have username fields, # that none of the other crontabs do. SHELL=/bin/sh PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin # m h dom mon dow user command 17 * * * * root cd / \u0026amp;\u0026amp; run-parts --report /etc/cron.hourly 25 6 * * * root test -x /usr/sbin/anacron || ( cd / \u0026amp;\u0026amp; run-parts --report /etc/cron.daily ) 47 6 * * 7 root test -x /usr/sbin/anacron || ( cd / \u0026amp;\u0026amp; run-parts --report /etc/cron.weekly ) 52 6 1 * * root test -x /usr/sbin/anacron || ( cd / \u0026amp;\u0026amp; run-parts --report /etc/cron.monthly ) # 30 21 * * 2,4,6,0 root reboot 每周2,4,6,0 _ GMT时间21:30分(中国时间5:30)用户root重启\nhttp://blog.csdn.net/xiyuan1999/article/details/8160998\n查看调度任务\n# crontab -l //列出当前的所有调度任务\n# crontab -l -u jp //列出用户jp的所有调度任务\n","date":"2020-03-05T01:53:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-15.jpg","permalink":"https://jimway71.github.io/p/%E5%AE%89%E8%A3%85%E7%BF%BB%E5%A2%99%E6%9C%8D%E5%8A%A1%E5%99%A8v2ray-ss-brook/","title":"安装翻墙服务器(V2ray+ss+brook)"},{"content":"2017.6.9\n使用中国驾照可以开车的州，以及证件有效性 持中国驾照可以在美国大部分州短期内合法驾车，但有少部分州是不可以持中国驾照开车，其中包括肯塔基州、麻萨诸塞州、密歇根州、新泽西州、俄亥俄州、德克萨斯州、佛蒙特州、威斯康辛州等，大多数都位于美国东北部。\n下面这个文档是我找到的最详细的相关说明文档:\n中国驾照在美国开车的规定(官方文件)\n在上述这些州里，你可能因为租车公司员工不清楚法律规定而拿到车，但万一碰上警察就可能遇上麻烦。\n如果只是路上要经过其中某个州，而不方便绕过的话，那就小心点开车，也别招警察注意，因为在这段路程中，不仅不合法，可能租车相关的保险也是无效的。\n持中国驾照，在美国租车最好携带翻译件，这样租车公司员工能看明白驾照上写的是什么。携程上有各租车公司的翻译件模板，照着做一个就ok。\n携程翻译件模板下地址如下:\n免费驾照翻译件下载\n翻译件必须和驾照原件一起使用。\n在美国开车不需要什么驾照公证件，租车公司就不知道这么个东西，你给他公证件，他就当个翻译件来用。\n所谓的国际驾照(IDP)对仅持有中国驾照的人而言是完全无效的，中国没有加入联合国道路交通公约，不能颁发国际驾照。这个骗局十多年前就看到了，到现在还在继续。\n如果你想拿到有效的IDP，你可以通过拿到加入到相关公约国家的驾照，比如韩国，并使用该国有效驾照申请IDP。\nIDP有效期应该是一年，需要和相应的驾照一起使用才有效。\n交通规则 这个先不写了，网上好多。\n第三方保险 租车公司提供的车损险是有免责条款的，比如车顶、车底、玻璃等是不在保险覆盖范围内的，在详细的合同条款里应该会有，我记得在某一家租车公司的文档里看到过，另外还问过Hertz中国的客服并得到确认。\n虽然大部分公司不会拿这些损伤说事，比如去年在路易斯安娜州租的车，就被前面卡车掉落的石子把前挡砸出了一个小坑，最终还车也没从信用卡里另外收钱(当时有买车损险)，但万一有事真搬出这条款出来你也没办法。\n第三方保险有车损险，而且包括了这些租车公司不保的项目，另外还包括什么道路救援、轮胎打气、丢钥匙等等各种可能出的问题，保得很全，租车公司分开一项一项给你收钱的项目，第三方保险一个基本上全包了，基本上说，除了三者险、人身伤害险、财产险，第三方的保险都有了。\n而且，还不贵，一年的保险不到600RMB，覆盖了全世界(战乱国家除外).\n在国内租一次车，七八天的车损补充险，大概就有四五百块了。\n当然用租车公司的车损险，万一有车损处理起来会非常方便。\n用第三方保险缺点就是万一出了事故，需要先垫款，而且周期可以会比较长。 找的这家是rentalcars用的第三方保险，叫rentalcover，最近发现好像主页上没有年度保险了，不会不卖了吧。\n租车费以外的其它费用(各种保险、罚款、道路救援等) 跟车相关的保险有车损+盗抢(LDW/CDW)，三者(ALI/SLI/EP)\n不同租车公司的写法不太一样。 车损盗抢+三者是必须有的\n这没什么好说的。 道路救援(RAP)\n其实一般用不到。 人身保险(PAI/PEI) 财物险(PEP)\n买个旅游保险就都有了 加油服务(FUEL SERVICE OPTION)\n如果还车的时候不赶时间，肯定选满油还车(FULL TO FULL)，租车公司的油，贵，还要加税。 异地还车费(One way fee/Drop fee)\n有的州不收异地还车费，比如加州、内华达州、佛罗里达州(好像有的公司不免) 。\nAvis异地还车起步价$50(budget好像也是), alamo是$100(hertz好像一样), 另加税。 增加驾驶员(Additional Driver)\n加州应该是免费的, 其它的都收费。\n不同的租车公司在这块的收费价格差异还是很大的，往往越是号称低价的，在这些不太容易看明白的项目上收费就越高，比如Dollar/Thrifty，最后算起来，总的费用可能比有些看着价格高点的公司还要多。\n其实这跟廉价航空一样，比如spirit航空, 票价便宜, 但随身行李也要收费, 餐食收费，托运行李收费也比别家贵不少, 总得找地方把钱赚出来。 过路费\n过路费有三种收法: 租用etoll pass, 类似国内的ETC.\n车上带的etolls pass一般都有开关, 可以启用或关闭。\n只要租期内用了一次，整个租期内按全部天数计算租用费，部分公司有封顶, 一个月内最多$20左右。每天租金各公司不同，ALAMO/AVIS最低, $3.95/天， Hertz略高, $4.95/天，Dollar/Thrifty更高, $8.99/天，而且没有封顶。\n过路费另算，这个应该只是代收, 没有别的费用。\n这块的费用一般是还车后，租车公司直接从信用卡里扣。\n具体费用明细可以在美国路桥费官网查，地址是: htallc\n查的时候，需要租车合同号或用的信用卡号的前6位和后4位。\n结果像这样\n纽约到华盛顿这条路上收费挺贵的。\n有时候会有同一个租车合同会收两次过路费，应该是数据延迟。\n关于etoll pass系统，美国各地都不同, 加州叫FastTrak，伊利诺伊州叫ipass, 东北部十多个州用的ezpass, 德克萨斯州用的EZ Tag，佛罗里达州叫sunpass.\nTPW Toll pass waive, 通行费免除, 买了这个后，不再向租车方收取过路费，相当于一价全包。\n比如， Alamo在部分地区提供这种服务，比如伊利诺伊州, $7.99/天, 不含税。\n估计是这些地方通行费收的便宜, 全包租车公司肯定也是赚的。\n曾在芝加哥租到了辆没带etoll pass的车子, 回去找alamo, 就被卖了TPW, 肯定是不划算的, 还好时间不长。\n主要是担心下面的这个坑。\nToll by plate/Charge by plate ~ 收通行费+服务费 或 toll pass日租金 车辆上没有etoll pass, 过路费收费公司会把帐单给租车公司，租车公司再转给第三方公司来收费，每一笔都收服务费。 Dollar就是这么干的，每一笔收$20左右。\n像alamo这样的公司有可能是按etoll pass租金+过路费的收费模式，当时急着走，就没细问。\n另外，导航虽然有避开收费站的功能，但并不能保证肯定都能避开, 因为路也在变。 去年在德州休斯顿, 用谷歌导航，就没能避开两个收费站。\n其实还有一种方式，就是自己交费。 旧金山大桥金门大桥的过桥费，就可以自己在网站上交，在网上操作，好像是车牌挂张信用卡就行。\n而佛罗里达州的电子过路费收费系统sunpass, 且支持租车用户时自己买卡交费。\n这家的网站是: sunpass 注意: 不知道什么原因，这个网站在我国境内是不存在的，需要通过技术手段访问。\n同时，sunpass也有提供手机app，当然也需要技术手段访问。 在Walgreen超市，或者CVS药店, 会有一种mini sunpass出售, 有的publix超市可能也有, 价格是$4.99+税。\n这种是贴在前挡风玻璃上，在后视镜后面的位置，一次性的，用完撕下来大概就废了(很难撕下来)。在网上看，有人说可以用胶带把pass粘在前风挡上, 但这样不能确认是否有效。\n买了mini sunpass后，如果还没有sunpass帐户，先用买的这张sunpass的ID去注册一个帐号, 充值, 加上车辆信息, 就能用了。\nApp上增加车车辆信息的操作界面就这样，上面需要的车辆信息，可以在车钥匙的标牌上，或者车辆前挡风玻璃上找到。写车辆信息应该是为了在没有读到卡的情况下，根据车辆牌号等信息，直接从对应帐户扣款。\n租用车辆需要设置下面的起止时间，到期后，车辆信息会被自动删除。\n在app上可以查看交费收费的明细信息，见下图:\n佛罗里达州的过路费看来收的地方不多，而且比较便宜，主要是大城市周边收费，如果时间不长，10块钱就够了。\n还车后，如果不再用这个帐号，剩下的钱可以退款，或者直接关掉帐户(Close Account).\n这些操作在app上没有, 只能在网页上操作。\n导航 有了谷歌地图，还需要其它导航吗?\n订机票、酒店、租车等等的时候，把确认邮件发到你的gmail邮箱里，谷歌地图上就会在对应的地点显示所有的这些行程。另外，你只需要在规划行程的时间把其它要去的地方在地图上标上，到时间出门打开地图就可以开始导航，根本不需要再去查地址，so easy.\n怕没有网络？谷歌有离线地图，提前下好就行了。\n离线地图除了没有实时路况，别的也不缺什么。\n当然, 流量还是需要的，买美国电话卡是最好的方案，电话流量全部搞定。\nLycamobile用的是tmobile的网络，价格不错，在美国东部的覆盖也可以，再加上国内手机号漫游过去，实在不行用国内手机(可以漫游到任何一个支持的网络)，通讯就没问题了。\n不过不知道是不是华为系统的问题, mate 7装上lyca的卡后开热点，别的手机联上了却不能上网, 还好的是交易的这家美国当地有客服，跟客服电话里沟通了半天，最后认为可能是手机问题 ~~ 以前也有过华为手机开热点出现类似的情况，后来把sim卡换到另外的手机上就好了。\n租车 租车预定的渠道大概三种\n租车公司\n租车公司主页要都有一些优惠的页面，可以到里面找找\n一般租车公司都给合作的航空、信用卡公司、或者信用卡组织等提供一些折扣码，有些是在相关公司的页面上能找到。\n但.com的租车网站往往没有包保险的套餐, 加上保险后可能会比较贵。 租车公司他国分支机构\n比如.cn的，或者.uk的, 或者.de的\n上面说到的折扣码, 有些公司是全球通用的，比如avis/hertz, 也有些不是, 比如alamo。\n.cn和.uk往往提供包保险的套餐, 而.uk的价格经常会比较便宜一些。\n前些年不少人用.uk的网站预定租车，现在不少租车公司都不让这么干了，用.uk网站订车会有被拒绝提车的风险。\nHertz这家的网站比较有意思，在.cn的网站上也可以订到uk的价格: 其价格策略是根据你选的location来定, 而不是网站是.cn或是别的。所以在.cn的网站上, 只要选择的国家是united kingdom，就能订到uk的价格，不过这样怕是也有问题。\nAlamo还可以这么订车，当然也不能保证能拿到车。\n如果价格实在太好，也可以去试一下，订个不预付的订单，跟美国租车公司客服确认订单的有效性，并留好后手，避免万一拿不到车打乱行程。\n~~~ 如果用其它国家订单, 汇率变化可能会影响到最终价格。 代理\n代理也会有好价格，比如国内的携程、租租车什么的，不过好像看到有人报怨携程晚上没客服，那就得靠自己了。\n用Bid方式租车可能并不合适，因为bid只租了车，如果加上保险，没准比套餐的价格还贵。 另外，提车的时候，有的租车点有自助的机器(kiosk), 一般在机场这种大的点会有, 有可能有中文，即使没中文也更好理解，我觉得应该尽量选择使用kiosk,可以避开语言障碍和人为的干扰。\n说到人为干扰，在网上看到过有人被店员加了没有要的项目，好像最多的就是道路救援，如果是预付款的订单，出现要收钱的和未税的项，肯定是另加了东西，有的还放了提车收费单上来，其中后加上的项目很明确，只是有些人就因为不清楚那些英文简写的意思，而看不出来。\n还有，如果对车大小类型没有硬性要求，可以尽量订便宜的车，因为便宜的车可能会没有，免费升级会经常碰到，尤其是比较小的网点。\n在我的租车经历里，有一半都被升级了，而没被升级的几次中，有一次是在门店直接下的订单(傻了),另外的都是订的mini van, 没法升级。\n在一个行程里，租车费用并不是主要的费用，酒店才是大头，所以也不用在租车上花太多时间，差不多就行了。\n","date":"2017-06-10T00:32:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-14.png","permalink":"https://jimway71.github.io/p/%E5%9C%A8%E7%BE%8E%E5%9B%BD%E7%A7%9F%E8%BD%A6/","title":"在美国租车"},{"content":"一、花生壳for linux安装包里有phlinux-1.1-install.ubuntu.8.04.tar.gz, 是为ubuntu 8.0.4 i386下使用\n二、在ubuntu 8.0.4 x86_64下使用, 会报错(无文件错误)\n三、分析原因, 是因为在ubuntu x86_64下没有i386的库\n解决方法是安装32位的库文件\n四、安装方法:\n# sudo apt-get install ia32-libs*\n注:\n新装系统, 需要更新/etc/apt/sources.list\n# sudo vim /etc/apt/sources.list\n并做update\n# sudo apt-get update\n嗯, 原来就没写完 :)\n怪不得这么短\n就这样吧\n","date":"2009-05-14T21:39:16+08:00","image":"https://jimway71.github.io/wallpaper/wallpaper-13.jpg","permalink":"https://jimway71.github.io/p/%E8%8A%B1%E7%94%9F%E5%A3%B3%E5%8A%A8%E6%80%81%E5%9F%9F%E5%90%8D-for-linux-%E5%9C%A8ubuntu-8.0.4-x86_64%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"花生壳动态域名 for Linux 在ubuntu 8.0.4 x86_64系统下的使用"},{"content":"一、相关版本软件的下载\nWindows NT/2K/XP\nCodeBlocks 1.0rc2版: (引自 http://www.codeblocks.org/downloads.php)\nCode::Blocks IDE 1.0rc2, with MinGW compiler\n注: CodeBlocks 1.0rc2所带MinGW的版本不确定, gcc/g++的版本为3.4.4 (mingw special)\nCodeBlocks Unicode Dll for Windows 2.6.3版: (引自 http://www.codeblocks.org/nightly/, 应该可以不用)\nCodeBlocks Unicode Dll for Windows 2.6.3版, ZIP格式文件\nCodeBlocks Nightly Builds: (引自 http://www.codeblocks.org/nightly/)\nForum about Nightly build, 找个最新的版本下载\nMinGW: (引自 http://www.mingw.org/download.shtml)\n因CodeBlocks下载了带了MinGW编译器, 所以不用下载\nwxWidgets 2.8.0版: (引自 http://www.wxwidgets.org/downloads/)\nwxMSW 2.8.0 二、相应版本的安装\nWindows NT/2K/XP\n1)安装CodeBlocks带MinGW的版本\n略\n2)安装CodeBlocks的Unicode版本Dll\n把文件解压覆盖到CodeBlocks安装目录下(我的安装目录: C:\\Program Files\\CodeBlocks)\n3)安装CodeBlocks的新的Nightly Builds版本\n把文件解压覆盖到CodeBlocks安装目录下(我的安装目录: C:\\Program Files\\CodeBlocks)\n4)安装wxWidgets\n可安装到D:\\wxWidgets-2.8.0\n注意:\nwxWidgets后续的编译需要约1.5G(静态debug库)/0.5G(动态debug库)(注:release库相对较小)的硬盘空间来完成, 在编译完成后, 还需占用约1G(静态debug库)/0.5G(动态debug库)(注:release库相对较小)的空间, 即需要有1.5G(静态库)/0.5G(动态库)的空间完成后续的编译操作, 所以, 需要注意检查目标磁盘是否有足够空间\n安装过程: 略\n5)编译wxWidgets(支持ODBC)\na. 建立用于设置环境的批处理文件\n在目录D:\\wxWidgets-2.8.0\\build\\msw下新建批处理文件envset.bat, 如下:\nset PATH=%PATH%;C:\\Program Files\\CodeBlocks\\bin;C:\\Program Files\\CodeBlocks\\mingw32\\bin;\nset LIBRARY_PATH=C:\\Program Files\\CodeBlocks\\lib\nset C_INCLUDE_PATH=C:\\Program Files\\CodeBlocks\\include\nset CPLUS_INCLUDE_PATH=C:\\Program Files\\CodeBlocks\\include;D:\\wxWidgets-2.8.0\\include;D:\\wxWidgets-2.8.0\\contrib\\include;\nb.编译\na)进入DOS命令行模式\nb)切换工作目录至D:\\wxWidgets-2.8.0\\build\\msw\nc)执行清理命令(debug版本, 第一次运行应该可以不用)\nmingw32-make -f makefile.gcc UNICODE=1 USE_ODBC=1 MONOLITHIC=1 SHARED=1 clean\n参数说明:\nUNICODE=1表示使用unicode编码\nUSE_ODBC=1 表示生成支持ODBC的库\nMONOLITHIC=1 表示生成单一的库文件 (0表示生成多个按模块分割的库文件)\nSHARED=1 表示生成的动态链接库DLL (0表示生成静态链接库)\nBUILD=debug 表示生成带Debug信息的版本方便调试 (release是发布版, 缺省是debug版本)\n缺省的参数设置可以参考配置文件config.gcc\nd)执行编译命令(动态库debug版本)\nmingw32-make -f makefile.gcc UNICODE=1 USE_ODBC=1 MONOLITHIC=1 SHARED=1 VENDOR=jimway\n然后, 开始漫长的等待, 时间视机器的性能而定, 最终在目录....\\lib\\下生成库文件\ne)执行编译命令(动态库release版本)\nmingw32-make -f makefile.gcc UNICODE=1 USE_ODBC=1 MONOLITHIC=1 SHARED=1 BUILD=release VENDOR=jimway\n然后, 继续漫长的等待, 时间同样视机器的性能而定, 最终在目录....\\lib\\下生成库文件\n注意:\n关于动态库编译的警告(Warning)\n当使用“SHARED=1”编译选项时, 在编译中, 会出现大量的Warning, 大致如下:\n\u0026ldquo;type attributes are honored only at type definition\u0026rdquo;\n似乎是编译器的问题, 现在仅可以通过降低Warning级别来关掉, 或等待新的版本来处理这个问题\n可以参考文档wxWidgets 2.6 (MSW, GCC) installation instructions\n6)测试使用建立一个wxWidgets Project, 并使用动态库编译\n成功 参考:\n官方网站:\nwxwidgets: http://www.wxwidgets.org/\nMinGW: http://www.mingw.org/\ncodeblocks: http://www.codeblocks.org/\n说明文档:\nwxWiki: http://www.wxwidgets.org/wiki/index.php/Main_Page\n其它下载:\nCodeblocks的Nightly Builds: http://forums.codeblocks.org/index.php/board,20.0.html\n其它文档:\nRex的Codeblocks安装说明: http://flord.net/node/109\nWinCE相关文档:\nDevelopment: wxWinCE http://www.wxwidgets.org/wiki/index.php/Development:_wxWinCE\nwxEmbedded: wxWidgets for embedded applications http://www.wxwidgets.org/docs/embedded.htm\n","date":"2007-02-28T16:37:16+10:00","image":"https://jimway71.github.io/wallpaper/wallpaper-12.jpg","permalink":"https://jimway71.github.io/p/codeblocks%E7%9A%84windows-nt/2k/xp/ce%E7%89%88%E6%9C%AC%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/","title":"CodeBlocks的Windows NT/2K/XP/CE版本的安装及相关说明"},{"content":"说起大堡礁, 一般人都会想到凯恩斯(Cains), 因为这是大多数的来自中国的澳洲旅游团必到的景点之一。其实, 大堡礁位于澳大利亚东北部昆士兰州的东海岸, 由南至北延绵二千多公里, 从昆士兰州的很多地方都能去看大堡礁, 圣灵岛就是其中之一。\n圣灵岛位于凯恩斯的南部, 黄金海岸的北部, 是由74个大大小小的岛屿组成的一个度假胜地, 在这里不仅能看到大堡礁, 还能看到白色的天堂沙滩(WhiteHeaven Beach)和热带雨林。(圣灵岛及周边地图)\n如果要坐飞机到圣灵岛, 可以选择飞到Whitsunday Coast Airport (Whitsunday Coast Airport及周边地图), 再坐Taxi或Whitsunday Transit的公车, 经A1公路, 穿过Proserpine镇, 然后转到Shute Harbour Road, 一个小时之内就能到达Shute Harbour, 总共有50多公里的路程, 从Shute Harour就可以坐船出海了\n或者直接飞到位于圣灵岛之一的Hamilton Island Airport(Hamilton Island Airport及周边地图)\n这两个机场都是小型机场，都只有一条跑道。\n坐船来到X公司大堡礁海上基地, 在这里可以潜水、浮潜、坐透明底船或潜艇看海底世界, 晚上还可以住在这里。\nWhite Heaven Beach\nAirlie Beach\nDaydream Island\nHamilton Island\n旅游TIPS:\n季节:\n12月到3月是这里的雨季, 这段时间的雨量较大, 另一方面游人会较少一些, 价格应该会优惠一些 交通\n可以坐飞机到Whitsunday Coast Airport(即Proserpine airport, 在Proserpine的南部约十公里), 坐出租车或shutle约45公里到Airport, 价格A$15-16/人, 很方便(小地方的出租车, 人多了按人头收费)\n可以坐飞机到Hamilton island airport, 在Hamilton island上, 如果住在岛上倒很方便, 不过一般会贵A$50/人左右, 而且要去Airlie beach时还需要坐船过去, 这里的船票可都不太便宜\n具体机票价格可以查jetstar或virgin blue的网站, 或在webjet上可以查询到各航空公司的价格\n一般来说, jetstar的价格要便宜一些 住宿:\n在Airlie beach的YHA、在Cannonvale(离Airlie beach约2km)的Bush village网上的评价最好, 价格也不贵, 而且一般的daytrip在这里都能提供接送服务\nYHA提供厨房, 很大很干净, Bush Village可能也有提供\n另外, 还有宾馆或Aparment, 如果人多, 时间较长, Aparment可能也是一个很好的选择\n注:\n大公司的船一般在shute harbour出发(离Airlie beach约10km), 有的会接Daydream island和Hamilton island的游客\n小公司的船有在Abel Point出发(离Airlie beach约2km) YHA相关\n如果有YHA卡, 参加某些活动会有折扣, 有时折扣会较多, 另外, 如果住YHA, 没有YHA卡时, 需要另付约A$3.5/天.人, 且这里对OverSea的游客办YHA卡需收A$37, 所以对中国游客来说, 在国内办个YHA卡不仅便宜, 而且应该能用得着 吃饭及购物\n在Airlie beach, 吃饭的地方挺多的, 在Water front backpacker边上二楼还有个中餐馆, 另外, 在Airlie beach还有个小超市\n在Cannonvale有个Coles(较大的超市) 活动\n一般通过travel agent订各种活动, 一般在晚上8点前, 在Airlie beach还有Travel agent开门(当然, 也有很多关门了的, 选择余地就会少一些, 所以最好白天来订。我们订的那家, 一位女士服务态度极好, 我们在那谈了一个多小时, 但早晚上都不开门)\nAirlie Beach的travel agent极多, 住宿的地方也可以订, 所以我感觉不需要预先订好。Hamilton island上的Travel Agent远不如Airlie beach的多, 价格折扣也极少, 且有些活动不提供接送, 所以主要的住宿还是不在Hamilton island为好, 我感觉最多住上一天为好 Buggy\nHamilton island上的buggy是一种小型车, 一车可坐4人, 速度很慢, 应该低于20km/h, 租用需要出示驾照, 租一天约A$65。因岛较大, 虽然有红、绿、橙三条免费的bus线路, 但并不能覆盖全岛, 且等车时间较长, 所以租辆buggy是个很好的选择 自驾船\n自驾船是一种更自由的选择, 而且自驾船上还可以住宿, 不用再考虑住宿的问题\n在shute harbour往里走, 有个自驾船租赁的公司, 看着不错, 没有租过, 可以在rentayacht上查询相关资料 其它\n澳洲阳光巨强, 必须带SPF30+的防晒霜\n药品:\n去reef的航程较远, 外海浪大, 容易晕船, 最好带晕船药\n另:\n1)华人(当括当地的和游客)都很少, 基本上不用考虑能用中文跟人对话\n2)似乎有个心型小岛, 情侣可以去看一下喔 ","date":"2007-02-28T07:25:16+10:00","image":"https://jimway71.github.io/wallpaper/wallpaper-11.jpg","permalink":"https://jimway71.github.io/p/%E5%9C%A3%E7%81%B5%E5%B2%9Bwhitsunday-islands%E5%92%8C%E5%A4%A7%E5%A0%A1%E7%A4%81great-barrier-reef/","title":"圣灵岛(Whitsunday Islands)和大堡礁(Great Barrier Reef)"}]